{"version":3,"sources":["e:/Code/pixi/node_modules/browser-pack/_prelude.js","js/main.js","e:/Code/pixi/js/audioPlayer.js","e:/Code/pixi/js/background.js","e:/Code/pixi/js/bird.js","e:/Code/pixi/js/game.js","e:/Code/pixi/js/gameOverScreen.js","e:/Code/pixi/js/level.js","e:/Code/pixi/js/settings.js","e:/Code/pixi/js/setup.js","e:/Code/pixi/js/utils.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","let game = require('./game');\r\n\r\n(function() {\r\n    game.start();\r\n})();\r\n\r\n","let settings = require('./settings');\r\n\r\nlet audioPlayer = {\r\n\r\n    audioFragments: {\r\n        'FLAP': 'sfx_wing.ogg',\r\n        'HIT': 'sfx_hit.ogg',\r\n        'DIE': 'sfx_die.ogg',\r\n        'POINT': 'sfx_point.ogg',\r\n        'SWIM': 'sfx_blub.ogg',\r\n        'ENTER_WATER': 'sfx_water-enter.ogg',\r\n        'EXIT_WATER': 'sfx_water-exit.ogg',\r\n    },\r\n\r\n    _audio: [],\r\n\r\n    init() {\r\n        // Todo: Maybe we need to wait with starting the game until these have been loaded\r\n        for (let key in this.audioFragments) {\r\n            this._audio[this.audioFragments[key]] = new Audio(settings.soundsPath + this.audioFragments[key]);\r\n        }\r\n    },\r\n\r\n    play(audioFragment, callback) {\r\n        if (this._audio[audioFragment].currentTime > 0) {\r\n            this._audio[audioFragment].currentTime = 0;\r\n        }\r\n\r\n        this._audio[audioFragment].play();\r\n\r\n        if (typeof callback === 'function')\r\n            setTimeout(callback, this._audio[audioFragment].duration * 1000);\r\n    }\r\n};\r\n\r\naudioPlayer.init();\r\n\r\n\r\nmodule.exports = audioPlayer;\r\n","let settings = require('./settings.js');\r\nlet utils = require('./utils.js');\r\n\r\nvar background = {\r\n    /**\r\n     * The container that will contain all background tiles lined up\r\n     */\r\n    backgroundSprite: undefined,\r\n\r\n    /**\r\n     * Initialize the background\r\n     * @returns {PIXI.Sprite}\r\n     */\r\n    initialize() {\r\n        let skyTileTexture = utils.getTexture(settings.textures.background);\r\n        this.backgroundSprite = new PIXI.extras.TilingSprite(skyTileTexture, settings.gameWidth, skyTileTexture.height);\r\n        this.backgroundSprite.y = this._getBackgroundSpriteYPosition(skyTileTexture.height);\r\n\r\n        return this.backgroundSprite;\r\n    },\r\n\r\n    /**\r\n     * Update loop of the background\r\n     */\r\n    loop() {\r\n        this.backgroundSprite.tilePosition.x += -settings.backgroundSpeed;\r\n    },\r\n\r\n    /**\r\n     * Get the y position for the background sprite\r\n     * @returns {Number}\r\n     * @private\r\n     */\r\n    _getBackgroundSpriteYPosition(height) {\r\n        return settings.playableAreaAboveWater - height + utils.getTexture(settings.textures.ceiling).height;\r\n    }\r\n};\r\n\r\nmodule.exports = background;\r\n","let settings = require('./settings');\r\nlet utils = require('./utils');\r\n\r\nlet audioPlayer = require('./audioPlayer');\r\n\r\nlet bird = {\r\n    sprite: undefined,\r\n\r\n    /**\r\n     * The velocity of the bird\r\n     */\r\n    velocity: 0,\r\n\r\n    /**\r\n     * Bool if the bird is below the water\r\n     */\r\n    isBelowWater: false,\r\n\r\n    /**\r\n     * The amount of frames the animation has\r\n     */\r\n    animationFrames: 4,\r\n\r\n    birdTextureNamePrefix: 'bird_',\r\n    birdTextureNameSuffix: '.png',\r\n\r\n    initialize() {\r\n        this.sprite = this._setupBirdSprite();\r\n        return this.sprite;\r\n    },\r\n\r\n    loop() {\r\n        if (this.isBelowWater) {\r\n            this.velocity -= settings.waterPushForce;\r\n        } else {\r\n            this.velocity += settings.gravity;\r\n        }\r\n\r\n        this.sprite.y += this.velocity;\r\n        this.sprite.rotation = Math.atan2(this.velocity, settings.forwardSpeed);\r\n    },\r\n\r\n    /**\r\n     * Flap behaviour, is different based on being below or above water\r\n     */\r\n    flap() {\r\n        // Setting to easily test different flap behaviour\r\n        if (settings.shouldBirdFlapResetVelocity) {\r\n            this.velocity = 0;\r\n        }\r\n\r\n        if (this.isBelowWater) {\r\n            this._swim();\r\n        } else {\r\n            this._flap();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Reset the position and velocity of the bird\r\n     */\r\n    reset() {\r\n        this.sprite.x = settings.birdStartPosition.x;\r\n        this.sprite.y = settings.birdStartPosition.y;\r\n        this.velocity = 0;\r\n    },\r\n\r\n    /**\r\n     * Simple helper function to get the top position of the bird\r\n     * @returns {number}\r\n     */\r\n    getTop() {\r\n        return this.sprite.y - this.sprite.height / 2;\r\n    },\r\n\r\n    /**\r\n     * Simple helper function to get the bottom position of the bird\r\n     * @returns {number}\r\n     */\r\n    getBottom() {\r\n        return this.sprite.y + this.sprite.height / 2;\r\n    },\r\n\r\n    /**\r\n     * Simple helper function to get the right position of the bird\r\n     * @returns {number}\r\n     */\r\n    getRight() {\r\n        return this.sprite.x + this.sprite.width / 2;\r\n    },\r\n\r\n    /**\r\n     * Simple helper function to get the left position of the bird\r\n     * @returns {number}\r\n     */\r\n    getLeft() {\r\n        return this.sprite.x - this.sprite.width / 2;\r\n    },\r\n\r\n    /**\r\n     * When the bird enters the water\r\n     */\r\n    enterWater() {\r\n        if (this.isBelowWater) return;\r\n        this.isBelowWater = true;\r\n\r\n        audioPlayer.play(audioPlayer.audioFragments.ENTER_WATER);\r\n    },\r\n\r\n    /**\r\n     * When the bird leaves the water\r\n     */\r\n    leaveWater() {\r\n        if (!this.isBelowWater) return;\r\n        this.isBelowWater = false;\r\n\r\n        audioPlayer.play(audioPlayer.audioFragments.EXIT_WATER);\r\n    },\r\n\r\n    /**\r\n     * Setup the bird sprite with its animations\r\n     * @returns {AnimatedSprite|*}\r\n     * @private\r\n     */\r\n    _setupBirdSprite() {\r\n        let spriteFrames = [];\r\n        for (let i = 0; i < this.animationFrames; i++) {\r\n            spriteFrames.push(utils.getTexture(this.birdTextureNamePrefix + i +  this.birdTextureNameSuffix));\r\n        }\r\n\r\n        let sprite = new PIXI.extras.AnimatedSprite(spriteFrames);\r\n\r\n        sprite.animationSpeed = settings.birdAnimationSpeed;\r\n        sprite.play();\r\n\r\n        sprite.anchor.x = 0.5;\r\n        sprite.anchor.y = 0.5;\r\n\r\n        sprite.x = settings.birdStartPosition.x;\r\n        sprite.y = settings.birdStartPosition.y;\r\n\r\n        return sprite;\r\n    },\r\n\r\n    /**\r\n     * The above water flap behaviour\r\n     * @private\r\n     */\r\n    _flap() {\r\n        audioPlayer.play(audioPlayer.audioFragments.FLAP);\r\n\r\n        this.velocity -= settings.birdFlapVelocity;\r\n    },\r\n\r\n    /**\r\n     * The below water flap (aka swim) behaviour\r\n     * @private\r\n     */\r\n    _swim() {\r\n        audioPlayer.play(audioPlayer.audioFragments.SWIM);\r\n\r\n        this.velocity += settings.birdFlapVelocity;\r\n    }\r\n};\r\n\r\nmodule.exports = bird;\r\n","let setup = require('./setup');\r\n\r\nlet gameOverScreen = require('./gameOverScreen');\r\nlet audioPlayer = require('./audioPlayer');\r\nlet settings = require('./settings');\r\nlet utils = require('./utils');\r\n\r\nlet background = require('./background');\r\nlet level = require('./level');\r\nlet bird = require('./bird');\r\n\r\nlet game = {\r\n    renderer: undefined,\r\n    stage: undefined,\r\n\r\n    /**\r\n     * Whether the game (loop) has stopped or not\r\n     */\r\n    hasStopped: false,\r\n\r\n    /**\r\n     * Start the game\r\n     */\r\n    start() {\r\n        this.renderer = setup.renderer();\r\n        setup.loadAssets(this.initialize.bind(this));\r\n    },\r\n\r\n    /**\r\n     * Initialize all required parts of the game\r\n     */\r\n    initialize() {\r\n        this.stage = new PIXI.Container();\r\n\r\n        this.stage.addChild(background.initialize());\r\n        this.stage.addChild(level.initialize());\r\n        this.stage.addChild(bird.initialize());\r\n\r\n        this.stage.addChild(this._getWaterSprite());\r\n\r\n        let onRestartClick = this._clickRestart.bind(this);\r\n        this.stage.addChild(gameOverScreen.initialize(onRestartClick));\r\n\r\n        this.renderer.render(this.stage);\r\n\r\n        this._setEvents();\r\n\r\n        this.loop();\r\n    },\r\n\r\n    /**\r\n     * The game loop\r\n     */\r\n    loop() {\r\n        requestAnimationFrame(this.loop.bind(this));\r\n\r\n        // This causes the game loop to freeze. Is used when the players hits something and a menu is shown to _restart\r\n        if (this.hasStopped) return;\r\n\r\n        background.loop();\r\n        level.loop();\r\n        bird.loop();\r\n\r\n        this._handleCollision();\r\n\r\n        this.renderer.render(this.stage);\r\n    },\r\n\r\n    /**\r\n     * Trigger game over happening\r\n     * @private\r\n     */\r\n    _gameOver() {\r\n        this._stop();\r\n        this._playDieAudio();\r\n\r\n        // Show game over screen\r\n        gameOverScreen.updateScores(level.score, level.bestScore);\r\n        gameOverScreen.show();\r\n    },\r\n\r\n    /**\r\n     * Function to be called when _restart is clicked from the game over screen\r\n     * @private\r\n     */\r\n    _clickRestart() {\r\n        this._restart();\r\n        gameOverScreen.hide();\r\n    },\r\n\r\n    /**\r\n     * Stop the game\r\n     * @private\r\n     */\r\n    _stop() {\r\n        this.hasStopped = true;\r\n    },\r\n\r\n    /**\r\n     * Continue the game after stopping\r\n     * @private\r\n     */\r\n    _restart() {\r\n        level.reset();\r\n        bird.reset();\r\n\r\n        this.hasStopped = false;\r\n    },\r\n\r\n    /**\r\n     * Handle collision between the bird and 'obstacles'\r\n     * @private\r\n     */\r\n    _handleCollision() {\r\n        // Check if the bird is below or underneath the water\r\n        if (bird.getTop() < level.getWaterLevel() && bird.isBelowWater) {\r\n            bird.leaveWater();\r\n        } else if (bird.getTop() >= level.getWaterLevel() && !bird.isBelowWater) {\r\n            bird.enterWater();\r\n        }\r\n\r\n        // Ceiling collision\r\n        if (bird.getTop() <= level.ceilingSprite.y + level.ceilingSprite.height) {\r\n            this._gameOver();\r\n        }\r\n\r\n        // Floor collision\r\n        if (bird.getBottom() >= level.ceilingSprite.y + level.ceilingSprite.height + settings.playableAreaAboveWater + settings.playableAreaBelowWater) {\r\n            this._gameOver();\r\n        }\r\n\r\n        if (level.pipeCollision(bird)) {\r\n            this._gameOver();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Play the audio for when the player dies\r\n     * @private\r\n     */\r\n    _playDieAudio() {\r\n        audioPlayer.play(audioPlayer.audioFragments.HIT,\r\n            audioPlayer.play.bind(audioPlayer, audioPlayer.audioFragments.DIE)\r\n        );\r\n    },\r\n\r\n    /**\r\n     * Set the required events for interacting with the game\r\n     * @private\r\n     */\r\n    _setEvents() {\r\n        window.addEventListener(\"keyup\", (e) => {\r\n            if (e.keyCode != 32) return; // Not spacebar\r\n            if (this.hasStopped) {\r\n                this._clickRestart();\r\n                return;\r\n            }\r\n            bird.flap();\r\n        }, false);\r\n\r\n        if (\"ontouchstart\" in window) {\r\n            window.addEventListener(\"touchstart\", () => {\r\n                if (this.hasStopped) return;\r\n                bird.flap();\r\n            });\r\n        } else {\r\n            window.addEventListener(\"mousedown\", () => {\r\n                if (this.hasStopped) return;\r\n                bird.flap();\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Create and get the tiled sprite for the water\r\n     * @returns {TilingSprite|PIXI.TilingSprite|{enumerable, get}|*}\r\n     * @private\r\n     */\r\n    _getWaterSprite() {\r\n        let waterTexture = utils.getTexture(settings.textures.WATER);\r\n        let waterSprite = new PIXI.extras.TilingSprite(waterTexture, settings.gameWidth, settings.playableAreaBelowWater);\r\n        waterSprite.y = utils.getTexture(settings.textures.ceiling).height + settings.playableAreaAboveWater;\r\n\r\n        return waterSprite;\r\n    }\r\n};\r\n\r\nmodule.exports = game;\r\n","let settings = require('./settings');\r\nlet utils = require('./utils');\r\n\r\nlet gameOverScreen = {\r\n\r\n    /**\r\n     * The callback when the _restart button is clicked\r\n     */\r\n    onClickRestart: undefined,\r\n\r\n    /**\r\n     * The container that will hold the game over container\r\n     */\r\n    container: undefined,\r\n\r\n    /**\r\n     * The container that will hold the the scores and the game over sprite\r\n     */\r\n    gameOverContainer: undefined,\r\n\r\n    scoreYPosition: 93,\r\n    bestScoreYPosition: 135,\r\n    restartButtonYPosition: 190,\r\n    gameOverContainerXPosition: 150,\r\n\r\n    /**\r\n     * Because the score box is not perfectly centered we add some offset\r\n     */\r\n    elementsXOffset: 2,\r\n\r\n    /**\r\n     * Create the game over screen, should only be called once\r\n     */\r\n    initialize(callback) {\r\n        this._setRestartCallback(callback);\r\n\r\n        this.container = new PIXI.Container();\r\n\r\n        this.container.y = this._getContainerYPosition();\r\n        this.container.x = this.gameOverContainerXPosition;\r\n\r\n        this.gameOverContainer = new PIXI.Sprite(utils.getTexture(settings.textures.GAME_OVER));\r\n\r\n        this._renderScores(0, 0);\r\n\r\n        let restartButton = new PIXI.Sprite(utils.getTexture(settings.textures.RESTART));\r\n        restartButton.x = this.gameOverContainer.width / 2 - restartButton.width / 2 + this.elementsXOffset;\r\n        restartButton.y = this.restartButtonYPosition;\r\n        restartButton.interactive = true;\r\n        restartButton.buttonMode = true;\r\n        restartButton.defaultCursor = 'pointer';\r\n\r\n        restartButton.addListener(\"click\", this.onClickRestart);\r\n\r\n        if (\"ontouchstart\" in window) {\r\n            restartButton.addListener(\"touchstart\", this.onClickRestart);\r\n        }\r\n\r\n        this.gameOverContainer.addChild(restartButton);\r\n\r\n        this.container.addChild(this.gameOverContainer);\r\n\r\n        this.hide();\r\n\r\n        return this.container;\r\n    },\r\n\r\n    /**\r\n     * Update the game over screen with the new scores\r\n     */\r\n    updateScores(score, bestScore) {\r\n        this._clearScores();\r\n        this._renderScores(score, bestScore);\r\n    },\r\n\r\n    /**\r\n     * Hide the game over screen\r\n     */\r\n    hide() {\r\n        this.gameOverContainer.visible = false;\r\n    },\r\n\r\n    /**\r\n     * Show the game over screen\r\n     */\r\n    show() {\r\n        this.gameOverContainer.visible = true;\r\n    },\r\n\r\n    /**\r\n     * Set the callback for when the _restart button has been pressed\r\n     * @param callback\r\n     * @private\r\n     */\r\n    _setRestartCallback(callback) {\r\n        if (typeof callback !== 'function') throw new Error('Supplied callback is not a function');\r\n\r\n        this.onClickRestart = callback;\r\n    },\r\n\r\n    /**\r\n     * @param score\r\n     * @param bestScore\r\n     * @private\r\n     */\r\n    _renderScores(score, bestScore) {\r\n        this.scoreSprite = utils.scoreToSprites(score, utils.scoreSize.SMALL);\r\n        this.scoreSprite.x = this.gameOverContainer.width / 2 - this.scoreSprite.width / 2 + this.elementsXOffset;\r\n        this.scoreSprite.y = this.scoreYPosition;\r\n\r\n        this.bestScoreSprite = utils.scoreToSprites(bestScore, utils.scoreSize.SMALL);\r\n        this.bestScoreSprite.x = this.gameOverContainer.width / 2 - this.bestScoreSprite.width / 2 + this.elementsXOffset;\r\n        this.bestScoreSprite.y = this.bestScoreYPosition;\r\n\r\n        this.gameOverContainer.addChild(this.scoreSprite);\r\n        this.gameOverContainer.addChild(this.bestScoreSprite);\r\n    },\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _clearScores() {\r\n        this.gameOverContainer.removeChild(this.scoreSprite);\r\n        this.gameOverContainer.removeChild(this.bestScoreSprite);\r\n    },\r\n\r\n    /**\r\n     * @returns {number}\r\n     * @private\r\n     */\r\n    _getContainerYPosition() {\r\n        let ceilingHeight = utils.getTexture(settings.textures.ceiling).height;\r\n        let gameOverScreenHeight = utils.getTexture(settings.textures.GAME_OVER).height;\r\n        return (ceilingHeight + settings.playableAreaAboveWater + settings.playableAreaBelowWater) / 2 - gameOverScreenHeight / 2;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = gameOverScreen;\r\n","let settings = require('./settings');\r\nlet utils = require('./utils.js');\r\n\r\nlet audioPlayer = require('./audioPlayer');\r\n\r\nconst pipeFacing = {\r\n    'UP': 1,\r\n    'DOWN': -1,\r\n};\r\n\r\nlet level = {\r\n    /**\r\n     * The container that will contain everything that needs to be moved towards the player\r\n     */\r\n    container: undefined,\r\n    /**\r\n     * The container that will contain all floor tiles\r\n     */\r\n    floorSprite: undefined,\r\n\r\n    ceilingSprite: undefined,\r\n\r\n    pipesContainer: undefined,\r\n    pipes: [],\r\n\r\n    pipeTexture: undefined,\r\n    pipeTopTexture: undefined,\r\n    pipeBottomTexture: undefined,\r\n\r\n    firstPipeFacing: pipeFacing.UP,\r\n\r\n    nextPipeFacing: 0,\r\n    placedPipesCount: 0,\r\n\r\n    playerInsidePipe: false,\r\n\r\n    pipeGapSize: 100,\r\n\r\n    pipeDistance: 400,\r\n    firstPipeDistance: 800,\r\n\r\n    score: 0,\r\n    bestScore: 0,\r\n    scoreContainer: undefined,\r\n\r\n    initialize() {\r\n        this.container = new PIXI.Container();\r\n\r\n        this.container.addChild(this._createCeiling());\r\n        this.container.addChild(this._createFloor());\r\n\r\n        // Pipes stuff\r\n        this.nextPipeFacing = this.firstPipeFacing;\r\n        this.pipeTexture = utils.getTexture(settings.textures.pipe);\r\n        this.pipeTopTexture = utils.getTexture(settings.textures.pipeUp);\r\n        this.pipeBottomTexture = utils.getTexture(settings.textures.pipeDown);\r\n\r\n        this.pipesContainer = new PIXI.Container();\r\n\r\n        this._initialPipes();\r\n\r\n        this.container.addChild(this.pipesContainer);\r\n\r\n        // Score\r\n        this.scoreContainer = new PIXI.Container();\r\n        this.scoreContainer.addChild(utils.scoreToSprites(this.score, utils.scoreSize.BIG));\r\n\r\n        // Todo: Make vars\r\n        this.scoreContainer.x = 10;\r\n        this.scoreContainer.y = utils.getTexture(settings.textures.ceiling).height + 10;\r\n\r\n        this.container.addChild(this.scoreContainer);\r\n\r\n        return this.container;\r\n    },\r\n\r\n    reset() {\r\n        this.score = 0;\r\n        this.scoreContainer.removeChild(this.scoreContainer.children[0]);\r\n        this.scoreContainer.addChild(utils.scoreToSprites(this.score, utils.scoreSize.BIG));\r\n\r\n        this.pipesContainer.x = 0;\r\n        this.pipesContainer.children.splice(0);\r\n        this.pipes = [];\r\n        this.playerInsidePipe = false;\r\n        this.nextPipeFacing = this.firstPipeFacing;\r\n        this.placedPipesCount = 0;\r\n        this._initialPipes();\r\n    },\r\n\r\n    loop() {\r\n        this.ceilingSprite.tilePosition.x += -settings.forwardSpeed;\r\n        this.floorSprite.tilePosition.x += -settings.forwardSpeed;\r\n\r\n        // Pipes stuff\r\n        this.pipesContainer.x += -settings.forwardSpeed;\r\n\r\n        // Remove pipes when they're off screen\r\n        if (this.pipes.length > 0) {\r\n\r\n            if (this.pipesContainer.x < -this.pipes[0].x - this.pipeTexture.width) {\r\n                this.pipesContainer.removeChild(this.pipes[0]);\r\n                this.pipes.shift();\r\n\r\n                this._placeNewPipe();\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get the y position of the water\r\n     */\r\n    getWaterLevel() {\r\n        return settings.playableAreaAboveWater;\r\n    },\r\n\r\n    pipeCollision(bird) {\r\n\r\n        // We will check if the bird is colliding with the first pipe\r\n        // The bird can't possibly hit any other pipes\r\n\r\n        // We only need to collide with the left side of the pipes and the top/bottom pieces\r\n        // We know how far the pipe container has moved to the right, we can use this to get the left side\r\n\r\n        // Because of square collision it can feel unfair when hitting the sides of the pipes while at an angle\r\n        // Which often happens when diving through the gap. To make things a bit fairer, added a small margin;\r\n        let collisionMargin = 2;\r\n\r\n        let left = this.pipesContainer.x + this.pipes[0].x + collisionMargin;\r\n        let right = left + utils.getTexture(settings.textures.pipe).width - collisionMargin;\r\n        \r\n        // The bird is in the left/right boundaries of the first pipe\r\n        if (bird.getRight() > left && bird.getLeft() < right) {\r\n\r\n            this.playerInsidePipe = true;\r\n\r\n            // The bird is above the gap!\r\n            if (bird.getTop() < this.pipes[0].gap.top || bird.getBottom() > this.pipes[0].gap.bottom) {\r\n                return true;\r\n            }\r\n        } else if (this.playerInsidePipe) {\r\n            // Player has passed the pipe\r\n            this._increaseScore();\r\n            this.playerInsidePipe = false;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    _createCeiling() {\r\n        let ceilingTexture = utils.getTexture(settings.textures.ceiling);\r\n\r\n        this.ceilingSprite = new PIXI.extras.TilingSprite(ceilingTexture, settings.gameWidth, ceilingTexture.height);\r\n\r\n        return this.ceilingSprite;\r\n    },\r\n\r\n    _createFloor() {\r\n        let floorTexture = utils.getTexture(settings.textures.floor);\r\n\r\n        this.floorSprite = new PIXI.extras.TilingSprite(floorTexture, settings.gameWidth, floorTexture.height);\r\n        this.floorSprite.y = settings.playableAreaAboveWater + settings.playableAreaBelowWater + utils.getTexture(settings.textures.ceiling).height;\r\n\r\n        return this.floorSprite;\r\n    },\r\n\r\n    _initialPipes() {\r\n        let startingPipesCount = Math.ceil(settings.gameWidth / this.pipeDistance);\r\n\r\n        for (let i = 0; i < startingPipesCount; i++) {\r\n            let pipe = this._createPipe(this._getRandomPipeHeight(), this.nextPipeFacing);\r\n            pipe.x = this.firstPipeDistance + this.pipeDistance * i;\r\n            this.pipesContainer.addChild(pipe);\r\n            this.pipes.push(pipe);\r\n\r\n            this.nextPipeFacing *= -1;\r\n            this.placedPipesCount++;\r\n        }\r\n    },\r\n\r\n    _placeNewPipe() {\r\n        // We need total pipe amount, to calculate position of new one\r\n        let pipe = this._createPipe(this._getRandomPipeHeight(), this.nextPipeFacing);\r\n        pipe.x = this.placedPipesCount * this.pipeDistance + this.firstPipeDistance;\r\n        this.pipesContainer.addChild(pipe);\r\n        this.pipes.push(pipe);\r\n\r\n        this.nextPipeFacing *= -1;\r\n        this.placedPipesCount++;\r\n    },\r\n\r\n    _createPipe(height, direction) {\r\n        let container = new PIXI.Container();\r\n\r\n        let totalPlayHeight = settings.playableAreaAboveWater + settings.playableAreaBelowWater;\r\n\r\n        if (direction === pipeFacing.UP) {\r\n            container.addChild(this._createUpFacingPipe(height));\r\n        } else if (direction === pipeFacing.DOWN) {\r\n            container.addChild(this._createDownFacingPipe(height));\r\n        }\r\n\r\n        // Check if we have space for pipe in opposite direction to complete the gap\r\n        if (height + this.pipeGapSize < totalPlayHeight) {\r\n            // We can fit another pipe opposite to it\r\n            let oppositePipeHeight = totalPlayHeight - height - this.pipeGapSize;\r\n            if (direction === pipeFacing.UP)\r\n                container.addChild(this._createDownFacingPipe(oppositePipeHeight));\r\n\r\n            if (direction === pipeFacing.DOWN)\r\n                container.addChild(this._createUpFacingPipe(oppositePipeHeight));\r\n        }\r\n\r\n        // Store the information of the gap position in the container object for easier collision checks\r\n        let top = (direction === pipeFacing.UP ? totalPlayHeight - height - this.pipeGapSize : height) + this.ceilingSprite.height;\r\n        let bottom = (direction === pipeFacing.UP ? totalPlayHeight - height : height + this.pipeGapSize) + this.ceilingSprite.height;\r\n        container.gap = { top, bottom }\r\n\r\n        return container;\r\n    },\r\n\r\n    _createUpFacingPipe(height) {\r\n        let container = new PIXI.Container();\r\n\r\n        let pipeTop = new PIXI.Sprite(this.pipeTopTexture);\r\n        container.addChild(pipeTop);\r\n\r\n        let pipePartHeight = height - this.pipeTopTexture.height;\r\n\r\n        let pipe = new PIXI.extras.TilingSprite(this.pipeTexture, this.pipeTexture.width, pipePartHeight);\r\n        pipe.y = this.pipeTopTexture.height;\r\n        container.addChild(pipe);\r\n\r\n        // Place pipe on the bottom\r\n        container.y = settings.playableAreaAboveWater + settings.playableAreaBelowWater - height + utils.getTexture(settings.textures.ceiling).height;\r\n\r\n        return container;\r\n    },\r\n\r\n    _createDownFacingPipe(height) {\r\n        let container = new PIXI.Container();\r\n\r\n        let pipePartHeight = height - this.pipeBottomTexture.height;\r\n\r\n        let pipe = new PIXI.extras.TilingSprite(this.pipeTexture, this.pipeTexture.width, pipePartHeight);\r\n        container.addChild(pipe);\r\n\r\n        let pipeBottom = new PIXI.Sprite(this.pipeBottomTexture);\r\n        pipeBottom.y = pipePartHeight;\r\n        container.addChild(pipeBottom);\r\n\r\n        // We can place it against the ceiling\r\n        container.y = utils.getTexture(settings.textures.ceiling).height;\r\n\r\n        return container;\r\n    },\r\n\r\n    _increaseScore() {\r\n        audioPlayer.play(audioPlayer.audioFragments.POINT);\r\n        this.score++;\r\n\r\n        if (this.score > this.bestScore) this.bestScore = this.score;\r\n\r\n        // Because we put all digits inside one container, we only have to remove on child\r\n        this.scoreContainer.removeChild(this.scoreContainer.children[0]);\r\n\r\n        this.scoreContainer.addChild(utils.scoreToSprites(this.score, utils.scoreSize.BIG));\r\n   },\r\n\r\n    _getRandomPipeHeight() {\r\n        // Todo: Grab from settings somewhere\r\n        let minHeight = 280;\r\n        let maxHeight = 390;\r\n\r\n        return Math.random() * (maxHeight - minHeight) + minHeight;\r\n    },\r\n};\r\n\r\nmodule.exports = level;\r\n","const settings = {\r\n    /**\r\n     * The location of the assets json\r\n     */\r\n    assetFile: \"assets/assets.json\",\r\n\r\n    soundsPath: \"assets/sounds/\",\r\n\r\n    /**\r\n     * The area that is available above the water\r\n     */\r\n    playableAreaAboveWater: 260,\r\n\r\n    playableAreaBelowWater: 260,\r\n\r\n    gameWidth: 0,\r\n\r\n    gameOverScreenPosition: { x: 0, y: 0 },\r\n\r\n    /**\r\n     * The speed at which objects move towards the player\r\n     */\r\n    forwardSpeed: 5,\r\n\r\n    /**\r\n     * The speed at which the background moves\r\n     */\r\n    backgroundSpeed: 2,\r\n\r\n    /**\r\n     * The amount of gravity added to the velocity of the player while above the water\r\n     */\r\n    gravity: 0.3,\r\n\r\n    /**\r\n     * The amount of upward force added to the velocity of the player while below the water\r\n     */\r\n    waterPushForce: 0.3,\r\n\r\n    /**\r\n     * The amount of upward velocity is added to the player on 'flapping'.\r\n     */\r\n    birdFlapVelocity: 4.5,\r\n\r\n    birdAnimationSpeed: 0.2,\r\n\r\n    birdStartPosition: {\r\n        x: 100,\r\n        y: 150,\r\n    },\r\n\r\n    /**\r\n     * If vertical velocity of the player should be reset before applying the flap velocity\r\n     */\r\n    shouldBirdFlapResetVelocity: true,\r\n\r\n    ceilingSpriteHeight: 0,\r\n\r\n    textures: {\r\n        'background': 'sky.png',\r\n        'floor': 'land.png',\r\n        'ceiling': 'ceiling.png',\r\n        'pipe': 'pipe.png',\r\n        'pipeUp': 'pipe-up.png',\r\n        'pipeDown': 'pipe-down.png',\r\n        'WATER': 'water.png',\r\n        'GAME_OVER': 'scoreboard.png',\r\n        'RESTART': 'replay.png',\r\n        'BIG_0': 'font_big_0.png',\r\n        'BIG_1': 'font_big_1.png',\r\n        'BIG_2': 'font_big_2.png',\r\n        'BIG_3': 'font_big_3.png',\r\n        'BIG_4': 'font_big_4.png',\r\n        'BIG_5': 'font_big_5.png',\r\n        'BIG_6': 'font_big_6.png',\r\n        'BIG_7': 'font_big_7.png',\r\n        'BIG_8': 'font_big_8.png',\r\n        'BIG_9': 'font_big_9.png',\r\n        'SMALL_0': 'font_small_0.png',\r\n        'SMALL_1': 'font_small_1.png',\r\n        'SMALL_2': 'font_small_2.png',\r\n        'SMALL_3': 'font_small_3.png',\r\n        'SMALL_4': 'font_small_4.png',\r\n        'SMALL_5': 'font_small_5.png',\r\n        'SMALL_6': 'font_small_6.png',\r\n        'SMALL_7': 'font_small_7.png',\r\n        'SMALL_8': 'font_small_8.png',\r\n        'SMALL_9': 'font_small_9.png',\r\n    },\r\n\r\n    init() {\r\n        this.gameWidth = window.innerWidth;\r\n    }\r\n};\r\n\r\nsettings.init();\r\n\r\nmodule.exports = settings;\r\n","let settings = require('./settings');\r\n\r\nlet setup = {\r\n    /**\r\n     * Set up the renderer\r\n     * @returns {PIXI.WebGLRenderer|PIXI.CanvasRenderer}\r\n     */\r\n    renderer() {\r\n        let renderer = PIXI.autoDetectRenderer(settings.gameWidth, window.innerHeight);\r\n        renderer.view.style.position = \"absolute\";\r\n        renderer.view.style.display = \"block\";\r\n        renderer.backgroundColor = 0x4ec0ca;\r\n        renderer.autoResize = true;\r\n\r\n        document.body.appendChild(renderer.view);\r\n\r\n        return renderer;\r\n    },\r\n\r\n    /**\r\n     * Load the assets\r\n     * @param callback action to perform after assets have been loaded\r\n     */\r\n    loadAssets(callback) {\r\n        if (typeof callback !== 'function') throw new Error('Callback must be a function');\r\n\r\n        PIXI.loader.add(\"assets/assets.json\").load(callback);\r\n    }\r\n};\r\n\r\nmodule.exports = setup;\r\n","let settings = require('./settings');\r\n\r\nlet utils = {\r\n\r\n    scoreSize: {\r\n        'SMALL': 0,\r\n        'BIG': 1\r\n    },\r\n\r\n    /**\r\n     * Get a texture from the pixi loader by name\r\n     * @param name texture name, with extension\r\n     * @returns {*|PIXI.Texture|FrameObject}\r\n     */\r\n    getTexture(name) {\r\n        return PIXI.loader.resources[settings.assetFile].textures[name]\r\n    },\r\n\r\n    /**\r\n     * Fill a given pixi container and fill it with vertically aligned tiles fitting whole window width\r\n     * @param container\r\n     * @param texture\r\n     */\r\n    fillContainerWithWindowWidthTiles(container, texture) {\r\n        let requiredTiles = this._getRequiredWidthTiles(texture.width);\r\n\r\n        for (let i = 0; i < requiredTiles; i++) {\r\n            let tile = new PIXI.Sprite(texture);\r\n            tile.x = tile.width * i;\r\n            container.addChild(tile);\r\n        }\r\n    },\r\n\r\n    scoreToSprites(score, size) {\r\n        let stringScore = score.toString();\r\n\r\n        let texturePrefix = size === this.scoreSize.BIG ? 'BIG_' : 'SMALL_';\r\n        let letterSpacing = size === this.scoreSize.BIG ? 25 : 10;\r\n\r\n\r\n        let digitsContainer = new PIXI.Container();\r\n\r\n        for (let i = 0, len = stringScore.length; i < len; i++) {\r\n            let digit = new PIXI.Sprite(this.getTexture(settings.textures[texturePrefix + stringScore.charAt(i)]));\r\n            digit.x = i * letterSpacing;\r\n            digitsContainer.addChild(digit)\r\n        }\r\n\r\n        return digitsContainer;\r\n    },\r\n\r\n    _getRequiredWidthTiles(tileWidth) {\r\n        return Math.ceil(settings.gameWidth / tileWidth) + 1;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = utils;\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImU6L0NvZGUvcGl4aS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwianNcXG1haW4uanMiLCJlOlxcQ29kZVxccGl4aVxcanNcXGF1ZGlvUGxheWVyLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxiYWNrZ3JvdW5kLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxiaXJkLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxnYW1lLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxnYW1lT3ZlclNjcmVlbi5qcyIsImU6XFxDb2RlXFxwaXhpXFxqc1xcbGV2ZWwuanMiLCJlOlxcQ29kZVxccGl4aVxcanNcXHNldHRpbmdzLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxzZXR1cC5qcyIsImU6XFxDb2RlXFxwaXhpXFxqc1xcdXRpbHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLElBQUksT0FBTyxRQUFRLFFBQVIsQ0FBWDs7QUFFQSxDQUFDLFlBQVc7QUFDUixTQUFLLEtBQUw7QUFDSCxDQUZEOzs7OztBQ0ZBLElBQUksV0FBVyxRQUFRLFlBQVIsQ0FBZjs7QUFFQSxJQUFJLGNBQWM7O0FBRWQsb0JBQWdCO0FBQ1osZ0JBQVEsY0FESTtBQUVaLGVBQU8sYUFGSztBQUdaLGVBQU8sYUFISztBQUlaLGlCQUFTLGVBSkc7QUFLWixnQkFBUSxjQUxJO0FBTVosdUJBQWUscUJBTkg7QUFPWixzQkFBYztBQVBGLEtBRkY7O0FBWWQsWUFBUSxFQVpNOztBQWNkLFFBZGMsa0JBY1A7QUFDSDtBQUNBLGFBQUssSUFBSSxHQUFULElBQWdCLEtBQUssY0FBckIsRUFBcUM7QUFDakMsaUJBQUssTUFBTCxDQUFZLEtBQUssY0FBTCxDQUFvQixHQUFwQixDQUFaLElBQXdDLElBQUksS0FBSixDQUFVLFNBQVMsVUFBVCxHQUFzQixLQUFLLGNBQUwsQ0FBb0IsR0FBcEIsQ0FBaEMsQ0FBeEM7QUFDSDtBQUNKLEtBbkJhO0FBcUJkLFFBckJj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Q0osS0E3Qk87QUErQlIsa0JBL0JRLDBCQStCTyxLQS9CUCxFQStCYyxJQS9CZCxFQStCb0I7QUFDeEIsWUFBSSxjQUFjLE1BQU0sUUFBTixFQUFsQjs7QUFFQSxZQUFJLGdCQUFnQixTQUFTLEtBQUssU0FBTCxDQUFlLEdBQXhCLEdBQThCLE1BQTlCLEdBQXVDLFFBQTNEO0FBQ0EsWUFBSSxnQkFBZ0IsU0FBUyxLQUFLLFNBQUwsQ0FBZSxHQUF4QixHQUE4QixFQUE5QixHQUFtQyxFQUF2RDs7QUFHQSxZQUFJLGtCQUFrQixJQUFJLEtBQUssU0FBVCxFQUF0Qjs7QUFFQSxhQUFLLElBQUksSUFBSSxDQUFSLEVBQVcsTUFBTSxZQUFZLE1BQWxDLEVBQTBDLElBQUksR0FBOUMsRUFBbUQsR0FBbkQsRUFBd0Q7QUFDcEQsZ0JBQUksUUFBUSxJQUFJLEtBQUssTUFBVCxDQUFnQixLQUFLLFVBQUwsQ0FBZ0IsU0FBUyxRQUFULENBQWtCLGdCQUFnQixZQUFZLE1BQVosQ0FBbUIsQ0FBbkIsQ0FBbEMsQ0FBaEIsQ0FBaEIsQ0FBWjtBQUNBLGtCQUFNLENBQU4sR0FBVSxJQUFJLGFBQWQ7QUFDQSw0QkFBZ0IsUUFBaEIsQ0FBeUIsS0FBekI7QUFDSDs7QUFFRCxlQUFPLGVBQVA7QUFDSCxLQS9DTztBQWlEUiwwQkFqRFEsa0NBaURlLFNBakRmLEVBaUQwQjtBQUM5QixlQUFPLEtBQUssSUFBTCxDQUFVLFNBQVMsU0FBVCxHQUFxQixTQUEvQixJQUE0QyxDQUFuRDtBQUNIO0FBbkRPLENBQVo7O0FBdURBLE9BQU8sT0FBUCxHQUFpQixLQUFqQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJsZXQgZ2FtZSA9IHJlcXVpcmUoJy4vZ2FtZScpO1xyXG5cclxuKGZ1bmN0aW9uKCkge1xyXG4gICAgZ2FtZS5zdGFydCgpO1xyXG59KSgpO1xyXG5cclxuIiwibGV0IHNldHRpbmdzID0gcmVxdWlyZSgnLi9zZXR0aW5ncycpO1xyXG5cclxubGV0IGF1ZGlvUGxheWVyID0ge1xyXG5cclxuICAgIGF1ZGlvRnJhZ21lbnRzOiB7XHJcbiAgICAgICAgJ0ZMQVAnOiAnc2Z4X3dpbmcub2dnJyxcclxuICAgICAgICAnSElUJzogJ3NmeF9oaXQub2dnJyxcclxuICAgICAgICAnRElFJzogJ3NmeF9kaWUub2dnJyxcclxuICAgICAgICAnUE9JTlQnOiAnc2Z4X3BvaW50Lm9nZycsXHJcbiAgICAgICAgJ1NXSU0nOiAnc2Z4X2JsdWIub2dnJyxcclxuICAgICAgICAnRU5URVJfV0FURVInOiAnc2Z4X3dhdGVyLWVudGVyLm9nZycsXHJcbiAgICAgICAgJ0VYSVRfV0FURVInOiAnc2Z4X3dhdGVyLWV4aXQub2dnJyxcclxuICAgIH0sXHJcblxyXG4gICAgX2F1ZGlvOiBbXSxcclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIC8vIFRvZG86IE1heWJlIHdlIG5lZWQgdG8gd2FpdCB3aXRoIHN0YXJ0aW5nIHRoZSBnYW1lIHVudGlsIHRoZXNlIGhhdmUgYmVlbiBsb2FkZWRcclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5hdWRpb0ZyYWdtZW50cykge1xyXG4gICAgICAgICAgICB0aGlzLl9hdWRpb1t0aGlzLmF1ZGlvRnJhZ21lbnRzW2tleV1dID0gbmV3IEF1ZGlvKHNldHRpbmdzLnNvdW5kc1BhdGggKyB0aGlzLmF1ZGlvRnJhZ21lbnRzW2tleV0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgcGxheShhdWRpb0ZyYWdtZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmICh0aGlzLl9hdWRpb1thdWRpb0ZyYWdtZW50XS5jdXJyZW50VGltZSA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5fYXVkaW9bYXVkaW9GcmFnbWVudF0uY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fYXVkaW9bYXVkaW9GcmFnbWVudF0ucGxheSgpO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCB0aGlzLl9hdWRpb1thdWRpb0ZyYWdtZW50XS5kdXJhdGlvbiAqIDEwMDApO1xyXG4gICAgfVxyXG59O1xyXG5cclxuYXVkaW9QbGF5ZXIuaW5pdCgpO1xyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYXVkaW9QbGF5ZXI7XHJcbiIsImxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MuanMnKTtcclxubGV0IHV0aWxzID0gcmVxdWlyZSgnLi91dGlscy5qcycpO1xyXG5cclxudmFyIGJhY2tncm91bmQgPSB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjb250YWluZXIgdGhhdCB3aWxsIGNvbnRhaW4gYWxsIGJhY2tncm91bmQgdGlsZXMgbGluZWQgdXBcclxuICAgICAqL1xyXG4gICAgYmFja2dyb3VuZFNwcml0ZTogdW5kZWZpbmVkLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgYmFja2dyb3VuZFxyXG4gICAgICogQHJldHVybnMge1BJWEkuU3ByaXRlfVxyXG4gICAgICovXHJcbiAgICBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIGxldCBza3lUaWxlVGV4dHVyZSA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuYmFja2dyb3VuZCk7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU3ByaXRlID0gbmV3IFBJWEkuZXh0cmFzLlRpbGluZ1Nwcml0ZShza3lUaWxlVGV4dHVyZSwgc2V0dGluZ3MuZ2FtZVdpZHRoLCBza3lUaWxlVGV4dHVyZS5oZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZFNwcml0ZS55ID0gdGhpcy5fZ2V0QmFja2dyb3VuZFNwcml0ZVlQb3NpdGlvbihza3lUaWxlVGV4dHVyZS5oZWlnaHQpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5iYWNrZ3JvdW5kU3ByaXRlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBsb29wIG9mIHRoZSBiYWNrZ3JvdW5kXHJcbiAgICAgKi9cclxuICAgIGxvb3AoKSB7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU3ByaXRlLnRpbGVQb3NpdGlvbi54ICs9IC1zZXR0aW5ncy5iYWNrZ3JvdW5kU3BlZWQ7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSB5IHBvc2l0aW9uIGZvciB0aGUgYmFja2dyb3VuZCBzcHJpdGVcclxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfZ2V0QmFja2dyb3VuZFNwcml0ZVlQb3NpdGlvbihoZWlnaHQpIHtcclxuICAgICAgICByZXR1cm4gc2V0dGluZ3MucGxheWFibGVBcmVhQWJvdmVXYXRlciAtIGhlaWdodCArIHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuY2VpbGluZykuaGVpZ2h0O1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBiYWNrZ3JvdW5kO1xyXG4iLCJsZXQgc2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldHRpbmdzJyk7XHJcbmxldCB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuXHJcbmxldCBhdWRpb1BsYXllciA9IHJlcXVpcmUoJy4vYXVkaW9QbGF5ZXInKTtcclxuXHJcbmxldCBiaXJkID0ge1xyXG4gICAgc3ByaXRlOiB1bmRlZmluZWQsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdmVsb2NpdHkgb2YgdGhlIGJpcmRcclxuICAgICAqL1xyXG4gICAgdmVsb2NpdHk6IDAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCb29sIGlmIHRoZSBiaXJkIGlzIGJlbG93IHRoZSB3YXRlclxyXG4gICAgICovXHJcbiAgICBpc0JlbG93V2F0ZXI6IGZhbHNlLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGFtb3VudCBvZiBmcmFtZXMgdGhlIGFuaW1hdGlvbiBoYXNcclxuICAgICAqL1xyXG4gICAgYW5pbWF0aW9uRnJhbWVzOiA0LFxyXG5cclxuICAgIGJpcmRUZXh0dXJlTmFtZVByZWZpeDogJ2JpcmRfJyxcclxuICAgIGJpcmRUZXh0dXJlTmFtZVN1ZmZpeDogJy5wbmcnLFxyXG5cclxuICAgIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgdGhpcy5zcHJpdGUgPSB0aGlzLl9zZXR1cEJpcmRTcHJpdGUoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGU7XHJcbiAgICB9LFxyXG5cclxuICAgIGxvb3AoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNCZWxvd1dhdGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmVsb2NpdHkgLT0gc2V0dGluZ3Mud2F0ZXJQdXNoRm9yY2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy52ZWxvY2l0eSArPSBzZXR0aW5ncy5ncmF2aXR5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zcHJpdGUueSArPSB0aGlzLnZlbG9jaXR5O1xyXG4gICAgICAgIHRoaXMuc3ByaXRlLnJvdGF0aW9uID0gTWF0aC5hdGFuMih0aGlzLnZlbG9jaXR5LCBzZXR0aW5ncy5mb3J3YXJkU3BlZWQpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEZsYXAgYmVoYXZpb3VyLCBpcyBkaWZmZXJlbnQgYmFzZWQgb24gYmVpbmcgYmVsb3cgb3IgYWJvdmUgd2F0ZXJcclxuICAgICAqL1xyXG4gICAgZmxhcCgpIHtcclxuICAgICAgICAvLyBTZXR0aW5nIHRvIGVhc2lseSB0ZXN0IGRpZmZlcmVudCBmbGFwIGJlaGF2aW91clxyXG4gICAgICAgIGlmIChzZXR0aW5ncy5zaG91bGRCaXJkRmxhcFJlc2V0VmVsb2NpdHkpIHtcclxuICAgICAgICAgICAgdGhpcy52ZWxvY2l0eSA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc0JlbG93V2F0ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fc3dpbSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZsYXAoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXQgdGhlIHBvc2l0aW9uIGFuZCB2ZWxvY2l0eSBvZiB0aGUgYmlyZFxyXG4gICAgICovXHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLnNwcml0ZS54ID0gc2V0dGluZ3MuYmlyZFN0YXJ0UG9zaXRpb24ueDtcclxuICAgICAgICB0aGlzLnNwcml0ZS55ID0gc2V0dGluZ3MuYmlyZFN0YXJ0UG9zaXRpb24ueTtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gMDtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaW1wbGUgaGVscGVyIGZ1bmN0aW9uIHRvIGdldCB0aGUgdG9wIHBvc2l0aW9uIG9mIHRoZSBiaXJkXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBnZXRUb3AoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlLnkgLSB0aGlzLnNwcml0ZS5oZWlnaHQgLyAyO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNpbXBsZSBoZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSBib3R0b20gcG9zaXRpb24gb2YgdGhlIGJpcmRcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIGdldEJvdHRvbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGUueSArIHRoaXMuc3ByaXRlLmhlaWdodCAvIDI7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2ltcGxlIGhlbHBlciBmdW5jdGlvbiB0byBnZXQgdGhlIHJpZ2h0IHBvc2l0aW9uIG9mIHRoZSBiaXJkXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBnZXRSaWdodCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGUueCArIHRoaXMuc3ByaXRlLndpZHRoIC8gMjtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaW1wbGUgaGVscGVyIGZ1bmN0aW9uIHRvIGdldCB0aGUgbGVmdCBwb3NpdGlvbiBvZiB0aGUgYmlyZFxyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgZ2V0TGVmdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGUueCAtIHRoaXMuc3ByaXRlLndpZHRoIC8gMjtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGVuIHRoZSBiaXJkIGVudGVycyB0aGUgd2F0ZXJcclxuICAgICAqL1xyXG4gICAgZW50ZXJXYXRlcigpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0JlbG93V2F0ZXIpIHJldHVybjtcclxuICAgICAgICB0aGlzLmlzQmVsb3dXYXRlciA9IHRydWU7XHJcblxyXG4gICAgICAgIGF1ZGlvUGxheWVyLnBsYXkoYXVkaW9QbGF5ZXIuYXVkaW9GcmFnbWVudHMuRU5URVJfV0FURVIpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZW4gdGhlIGJpcmQgbGVhdmVzIHRoZSB3YXRlclxyXG4gICAgICovXHJcbiAgICBsZWF2ZVdhdGVyKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0JlbG93V2F0ZXIpIHJldHVybjtcclxuICAgICAgICB0aGlzLmlzQmVsb3dXYXRlciA9IGZhbHNlO1xyXG5cclxuICAgICAgICBhdWRpb1BsYXllci5wbGF5KGF1ZGlvUGxheWVyLmF1ZGlvRnJhZ21lbnRzLkVYSVRfV0FURVIpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHVwIHRoZSBiaXJkIHNwcml0ZSB3aXRoIGl0cyBhbmltYXRpb25zXHJcbiAgICAgKiBAcmV0dXJucyB7QW5pbWF0ZWRTcHJpdGV8Kn1cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9zZXR1cEJpcmRTcHJpdGUoKSB7XHJcbiAgICAgICAgbGV0IHNwcml0ZUZyYW1lcyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hbmltYXRpb25GcmFtZXM7IGkrKykge1xyXG4gICAgICAgICAgICBzcHJpdGVGcmFtZXMucHVzaCh1dGlscy5nZXRUZXh0dXJlKHRoaXMuYmlyZFRleHR1cmVOYW1lUHJlZml4ICsgaSArICB0aGlzLmJpcmRUZXh0dXJlTmFtZVN1ZmZpeCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHNwcml0ZSA9IG5ldyBQSVhJLmV4dHJhcy5BbmltYXRlZFNwcml0ZShzcHJpdGVGcmFtZXMpO1xyXG5cclxuICAgICAgICBzcHJpdGUuYW5pbWF0aW9uU3BlZWQgPSBzZXR0aW5ncy5iaXJkQW5pbWF0aW9uU3BlZWQ7XHJcbiAgICAgICAgc3ByaXRlLnBsYXkoKTtcclxuXHJcbiAgICAgICAgc3ByaXRlLmFuY2hvci54ID0gMC41O1xyXG4gICAgICAgIHNwcml0ZS5hbmNob3IueSA9IDAuNTtcclxuXHJcbiAgICAgICAgc3ByaXRlLnggPSBzZXR0aW5ncy5iaXJkU3RhcnRQb3NpdGlvbi54O1xyXG4gICAgICAgIHNwcml0ZS55ID0gc2V0dGluZ3MuYmlyZFN0YXJ0UG9zaXRpb24ueTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNwcml0ZTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYWJvdmUgd2F0ZXIgZmxhcCBiZWhhdmlvdXJcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9mbGFwKCkge1xyXG4gICAgICAgIGF1ZGlvUGxheWVyLnBsYXkoYXVkaW9QbGF5ZXIuYXVkaW9GcmFnbWVudHMuRkxBUCk7XHJcblxyXG4gICAgICAgIHRoaXMudmVsb2NpdHkgLT0gc2V0dGluZ3MuYmlyZEZsYXBWZWxvY2l0eTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYmVsb3cgd2F0ZXIgZmxhcCAoYWthIHN3aW0pIGJlaGF2aW91clxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3N3aW0oKSB7XHJcbiAgICAgICAgYXVkaW9QbGF5ZXIucGxheShhdWRpb1BsYXllci5hdWRpb0ZyYWdtZW50cy5TV0lNKTtcclxuXHJcbiAgICAgICAgdGhpcy52ZWxvY2l0eSArPSBzZXR0aW5ncy5iaXJkRmxhcFZlbG9jaXR5O1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBiaXJkO1xyXG4iLCJsZXQgc2V0dXAgPSByZXF1aXJlKCcuL3NldHVwJyk7XHJcblxyXG5sZXQgZ2FtZU92ZXJTY3JlZW4gPSByZXF1aXJlKCcuL2dhbWVPdmVyU2NyZWVuJyk7XHJcbmxldCBhdWRpb1BsYXllciA9IHJlcXVpcmUoJy4vYXVkaW9QbGF5ZXInKTtcclxubGV0IHNldHRpbmdzID0gcmVxdWlyZSgnLi9zZXR0aW5ncycpO1xyXG5sZXQgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcblxyXG5sZXQgYmFja2dyb3VuZCA9IHJlcXVpcmUoJy4vYmFja2dyb3VuZCcpO1xyXG5sZXQgbGV2ZWwgPSByZXF1aXJlKCcuL2xldmVsJyk7XHJcbmxldCBiaXJkID0gcmVxdWlyZSgnLi9iaXJkJyk7XHJcblxyXG5sZXQgZ2FtZSA9IHtcclxuICAgIHJlbmRlcmVyOiB1bmRlZmluZWQsXHJcbiAgICBzdGFnZTogdW5kZWZpbmVkLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0aGUgZ2FtZSAobG9vcCkgaGFzIHN0b3BwZWQgb3Igbm90XHJcbiAgICAgKi9cclxuICAgIGhhc1N0b3BwZWQ6IGZhbHNlLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnQgdGhlIGdhbWVcclxuICAgICAqL1xyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHNldHVwLnJlbmRlcmVyKCk7XHJcbiAgICAgICAgc2V0dXAubG9hZEFzc2V0cyh0aGlzLmluaXRpYWxpemUuYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSBhbGwgcmVxdWlyZWQgcGFydHMgb2YgdGhlIGdhbWVcclxuICAgICAqL1xyXG4gICAgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICB0aGlzLnN0YWdlID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhZ2UuYWRkQ2hpbGQoYmFja2dyb3VuZC5pbml0aWFsaXplKCkpO1xyXG4gICAgICAgIHRoaXMuc3RhZ2UuYWRkQ2hpbGQobGV2ZWwuaW5pdGlhbGl6ZSgpKTtcclxuICAgICAgICB0aGlzLnN0YWdlLmFkZENoaWxkKGJpcmQuaW5pdGlhbGl6ZSgpKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGFnZS5hZGRDaGlsZCh0aGlzLl9nZXRXYXRlclNwcml0ZSgpKTtcclxuXHJcbiAgICAgICAgbGV0IG9uUmVzdGFydENsaWNrID0gdGhpcy5fY2xpY2tSZXN0YXJ0LmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zdGFnZS5hZGRDaGlsZChnYW1lT3ZlclNjcmVlbi5pbml0aWFsaXplKG9uUmVzdGFydENsaWNrKSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMuc3RhZ2UpO1xyXG5cclxuICAgICAgICB0aGlzLl9zZXRFdmVudHMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb29wKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGdhbWUgbG9vcFxyXG4gICAgICovXHJcbiAgICBsb29wKCkge1xyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmxvb3AuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIC8vIFRoaXMgY2F1c2VzIHRoZSBnYW1lIGxvb3AgdG8gZnJlZXplLiBJcyB1c2VkIHdoZW4gdGhlIHBsYXllcnMgaGl0cyBzb21ldGhpbmcgYW5kIGEgbWVudSBpcyBzaG93biB0byBfcmVzdGFydFxyXG4gICAgICAgIGlmICh0aGlzLmhhc1N0b3BwZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgYmFja2dyb3VuZC5sb29wKCk7XHJcbiAgICAgICAgbGV2ZWwubG9vcCgpO1xyXG4gICAgICAgIGJpcmQubG9vcCgpO1xyXG5cclxuICAgICAgICB0aGlzLl9oYW5kbGVDb2xsaXNpb24oKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5zdGFnZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJpZ2dlciBnYW1lIG92ZXIgaGFwcGVuaW5nXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfZ2FtZU92ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5fc3RvcCgpO1xyXG4gICAgICAgIHRoaXMuX3BsYXlEaWVBdWRpbygpO1xyXG5cclxuICAgICAgICAvLyBTaG93IGdhbWUgb3ZlciBzY3JlZW5cclxuICAgICAgICBnYW1lT3ZlclNjcmVlbi51cGRhdGVTY29yZXMobGV2ZWwuc2NvcmUsIGxldmVsLmJlc3RTY29yZSk7XHJcbiAgICAgICAgZ2FtZU92ZXJTY3JlZW4uc2hvdygpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIF9yZXN0YXJ0IGlzIGNsaWNrZWQgZnJvbSB0aGUgZ2FtZSBvdmVyIHNjcmVlblxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2NsaWNrUmVzdGFydCgpIHtcclxuICAgICAgICB0aGlzLl9yZXN0YXJ0KCk7XHJcbiAgICAgICAgZ2FtZU92ZXJTY3JlZW4uaGlkZSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0b3AgdGhlIGdhbWVcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9zdG9wKCkge1xyXG4gICAgICAgIHRoaXMuaGFzU3RvcHBlZCA9IHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29udGludWUgdGhlIGdhbWUgYWZ0ZXIgc3RvcHBpbmdcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9yZXN0YXJ0KCkge1xyXG4gICAgICAgIGxldmVsLnJlc2V0KCk7XHJcbiAgICAgICAgYmlyZC5yZXNldCgpO1xyXG5cclxuICAgICAgICB0aGlzLmhhc1N0b3BwZWQgPSBmYWxzZTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGUgY29sbGlzaW9uIGJldHdlZW4gdGhlIGJpcmQgYW5kICdvYnN0YWNsZXMnXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfaGFuZGxlQ29sbGlzaW9uKCkge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBiaXJkIGlzIGJlbG93IG9yIHVuZGVybmVhdGggdGhlIHdhdGVyXHJcbiAgICAgICAgaWYgKGJpcmQuZ2V0VG9wKCkgPCBsZXZlbC5nZXRXYXRlckxldmVsKCkgJiYgYmlyZC5pc0JlbG93V2F0ZXIpIHtcclxuICAgICAgICAgICAgYmlyZC5sZWF2ZVdhdGVyKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChiaXJkLmdldFRvcCgpID49IGxldmVsLmdldFdhdGVyTGV2ZWwoKSAmJiAhYmlyZC5pc0JlbG93V2F0ZXIpIHtcclxuICAgICAgICAgICAgYmlyZC5lbnRlcldhdGVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDZWlsaW5nIGNvbGxpc2lvblxyXG4gICAgICAgIGlmIChiaXJkLmdldFRvcCgpIDw9IGxldmVsLmNlaWxpbmdTcHJpdGUueSArIGxldmVsLmNlaWxpbmdTcHJpdGUuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2dhbWVPdmVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGbG9vciBjb2xsaXNpb25cclxuICAgICAgICBpZiAoYmlyZC5nZXRCb3R0b20oKSA+PSBsZXZlbC5jZWlsaW5nU3ByaXRlLnkgKyBsZXZlbC5jZWlsaW5nU3ByaXRlLmhlaWdodCArIHNldHRpbmdzLnBsYXlhYmxlQXJlYUFib3ZlV2F0ZXIgKyBzZXR0aW5ncy5wbGF5YWJsZUFyZWFCZWxvd1dhdGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2dhbWVPdmVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobGV2ZWwucGlwZUNvbGxpc2lvbihiaXJkKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9nYW1lT3ZlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQbGF5IHRoZSBhdWRpbyBmb3Igd2hlbiB0aGUgcGxheWVyIGRpZXNcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9wbGF5RGllQXVkaW8oKSB7XHJcbiAgICAgICAgYXVkaW9QbGF5ZXIucGxheShhdWRpb1BsYXllci5hdWRpb0ZyYWdtZW50cy5ISVQsXHJcbiAgICAgICAgICAgIGF1ZGlvUGxheWVyLnBsYXkuYmluZChhdWRpb1BsYXllciwgYXVkaW9QbGF5ZXIuYXVkaW9GcmFnbWVudHMuRElFKVxyXG4gICAgICAgICk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSByZXF1aXJlZCBldmVudHMgZm9yIGludGVyYWN0aW5nIHdpdGggdGhlIGdhbWVcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9zZXRFdmVudHMoKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlICE9IDMyKSByZXR1cm47IC8vIE5vdCBzcGFjZWJhclxyXG4gICAgICAgICAgICBpZiAodGhpcy5oYXNTdG9wcGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jbGlja1Jlc3RhcnQoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBiaXJkLmZsYXAoKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgICAgIGlmIChcIm9udG91Y2hzdGFydFwiIGluIHdpbmRvdykge1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzU3RvcHBlZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgYmlyZC5mbGFwKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1N0b3BwZWQpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGJpcmQuZmxhcCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGFuZCBnZXQgdGhlIHRpbGVkIHNwcml0ZSBmb3IgdGhlIHdhdGVyXHJcbiAgICAgKiBAcmV0dXJucyB7VGlsaW5nU3ByaXRlfFBJWEkuVGlsaW5nU3ByaXRlfHtlbnVtZXJhYmxlLCBnZXR9fCp9XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfZ2V0V2F0ZXJTcHJpdGUoKSB7XHJcbiAgICAgICAgbGV0IHdhdGVyVGV4dHVyZSA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuV0FURVIpO1xyXG4gICAgICAgIGxldCB3YXRlclNwcml0ZSA9IG5ldyBQSVhJLmV4dHJhcy5UaWxpbmdTcHJpdGUod2F0ZXJUZXh0dXJlLCBzZXR0aW5ncy5nYW1lV2lkdGgsIHNldHRpbmdzLnBsYXlhYmxlQXJlYUJlbG93V2F0ZXIpO1xyXG4gICAgICAgIHdhdGVyU3ByaXRlLnkgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLmNlaWxpbmcpLmhlaWdodCArIHNldHRpbmdzLnBsYXlhYmxlQXJlYUFib3ZlV2F0ZXI7XHJcblxyXG4gICAgICAgIHJldHVybiB3YXRlclNwcml0ZTtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZ2FtZTtcclxuIiwibGV0IHNldHRpbmdzID0gcmVxdWlyZSgnLi9zZXR0aW5ncycpO1xyXG5sZXQgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcblxyXG5sZXQgZ2FtZU92ZXJTY3JlZW4gPSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY2FsbGJhY2sgd2hlbiB0aGUgX3Jlc3RhcnQgYnV0dG9uIGlzIGNsaWNrZWRcclxuICAgICAqL1xyXG4gICAgb25DbGlja1Jlc3RhcnQ6IHVuZGVmaW5lZCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjb250YWluZXIgdGhhdCB3aWxsIGhvbGQgdGhlIGdhbWUgb3ZlciBjb250YWluZXJcclxuICAgICAqL1xyXG4gICAgY29udGFpbmVyOiB1bmRlZmluZWQsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY29udGFpbmVyIHRoYXQgd2lsbCBob2xkIHRoZSB0aGUgc2NvcmVzIGFuZCB0aGUgZ2FtZSBvdmVyIHNwcml0ZVxyXG4gICAgICovXHJcbiAgICBnYW1lT3ZlckNvbnRhaW5lcjogdW5kZWZpbmVkLFxyXG5cclxuICAgIHNjb3JlWVBvc2l0aW9uOiA5MyxcclxuICAgIGJlc3RTY29yZVlQb3NpdGlvbjogMTM1LFxyXG4gICAgcmVzdGFydEJ1dHRvbllQb3NpdGlvbjogMTkwLFxyXG4gICAgZ2FtZU92ZXJDb250YWluZXJYUG9zaXRpb246IDE1MCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEJlY2F1c2UgdGhlIHNjb3JlIGJveCBpcyBub3QgcGVyZmVjdGx5IGNlbnRlcmVkIHdlIGFkZCBzb21lIG9mZnNldFxyXG4gICAgICovXHJcbiAgICBlbGVtZW50c1hPZmZzZXQ6IDIsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgdGhlIGdhbWUgb3ZlciBzY3JlZW4sIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbmNlXHJcbiAgICAgKi9cclxuICAgIGluaXRpYWxpemUoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLl9zZXRSZXN0YXJ0Q2FsbGJhY2soY2FsbGJhY2spO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lci55ID0gdGhpcy5fZ2V0Q29udGFpbmVyWVBvc2l0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIueCA9IHRoaXMuZ2FtZU92ZXJDb250YWluZXJYUG9zaXRpb247XHJcblxyXG4gICAgICAgIHRoaXMuZ2FtZU92ZXJDb250YWluZXIgPSBuZXcgUElYSS5TcHJpdGUodXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5HQU1FX09WRVIpKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcmVuZGVyU2NvcmVzKDAsIDApO1xyXG5cclxuICAgICAgICBsZXQgcmVzdGFydEJ1dHRvbiA9IG5ldyBQSVhJLlNwcml0ZSh1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLlJFU1RBUlQpKTtcclxuICAgICAgICByZXN0YXJ0QnV0dG9uLnggPSB0aGlzLmdhbWVPdmVyQ29udGFpbmVyLndpZHRoIC8gMiAtIHJlc3RhcnRCdXR0b24ud2lkdGggLyAyICsgdGhpcy5lbGVtZW50c1hPZmZzZXQ7XHJcbiAgICAgICAgcmVzdGFydEJ1dHRvbi55ID0gdGhpcy5yZXN0YXJ0QnV0dG9uWVBvc2l0aW9uO1xyXG4gICAgICAgIHJlc3RhcnRCdXR0b24uaW50ZXJhY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHJlc3RhcnRCdXR0b24uYnV0dG9uTW9kZSA9IHRydWU7XHJcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5kZWZhdWx0Q3Vyc29yID0gJ3BvaW50ZXInO1xyXG5cclxuICAgICAgICByZXN0YXJ0QnV0dG9uLmFkZExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5vbkNsaWNrUmVzdGFydCk7XHJcblxyXG4gICAgICAgIGlmIChcIm9udG91Y2hzdGFydFwiIGluIHdpbmRvdykge1xyXG4gICAgICAgICAgICByZXN0YXJ0QnV0dG9uLmFkZExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCB0aGlzLm9uQ2xpY2tSZXN0YXJ0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZ2FtZU92ZXJDb250YWluZXIuYWRkQ2hpbGQocmVzdGFydEJ1dHRvbik7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuZ2FtZU92ZXJDb250YWluZXIpO1xyXG5cclxuICAgICAgICB0aGlzLmhpZGUoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSB0aGUgZ2FtZSBvdmVyIHNjcmVlbiB3aXRoIHRoZSBuZXcgc2NvcmVzXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZVNjb3JlcyhzY29yZSwgYmVzdFNjb3JlKSB7XHJcbiAgICAgICAgdGhpcy5fY2xlYXJTY29yZXMoKTtcclxuICAgICAgICB0aGlzLl9yZW5kZXJTY29yZXMoc2NvcmUsIGJlc3RTY29yZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGlkZSB0aGUgZ2FtZSBvdmVyIHNjcmVlblxyXG4gICAgICovXHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZU92ZXJDb250YWluZXIudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3cgdGhlIGdhbWUgb3ZlciBzY3JlZW5cclxuICAgICAqL1xyXG4gICAgc2hvdygpIHtcclxuICAgICAgICB0aGlzLmdhbWVPdmVyQ29udGFpbmVyLnZpc2libGUgPSB0cnVlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgY2FsbGJhY2sgZm9yIHdoZW4gdGhlIF9yZXN0YXJ0IGJ1dHRvbiBoYXMgYmVlbiBwcmVzc2VkXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9zZXRSZXN0YXJ0Q2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgRXJyb3IoJ1N1cHBsaWVkIGNhbGxiYWNrIGlzIG5vdCBhIGZ1bmN0aW9uJyk7XHJcblxyXG4gICAgICAgIHRoaXMub25DbGlja1Jlc3RhcnQgPSBjYWxsYmFjaztcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gc2NvcmVcclxuICAgICAqIEBwYXJhbSBiZXN0U2NvcmVcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9yZW5kZXJTY29yZXMoc2NvcmUsIGJlc3RTY29yZSkge1xyXG4gICAgICAgIHRoaXMuc2NvcmVTcHJpdGUgPSB1dGlscy5zY29yZVRvU3ByaXRlcyhzY29yZSwgdXRpbHMuc2NvcmVTaXplLlNNQUxMKTtcclxuICAgICAgICB0aGlzLnNjb3JlU3ByaXRlLnggPSB0aGlzLmdhbWVPdmVyQ29udGFpbmVyLndpZHRoIC8gMiAtIHRoaXMuc2NvcmVTcHJpdGUud2lkdGggLyAyICsgdGhpcy5lbGVtZW50c1hPZmZzZXQ7XHJcbiAgICAgICAgdGhpcy5zY29yZVNwcml0ZS55ID0gdGhpcy5zY29yZVlQb3NpdGlvbjtcclxuXHJcbiAgICAgICAgdGhpcy5iZXN0U2NvcmVTcHJpdGUgPSB1dGlscy5zY29yZVRvU3ByaXRlcyhiZXN0U2NvcmUsIHV0aWxzLnNjb3JlU2l6ZS5TTUFMTCk7XHJcbiAgICAgICAgdGhpcy5iZXN0U2NvcmVTcHJpdGUueCA9IHRoaXMuZ2FtZU92ZXJDb250YWluZXIud2lkdGggLyAyIC0gdGhpcy5iZXN0U2NvcmVTcHJpdGUud2lkdGggLyAyICsgdGhpcy5lbGVtZW50c1hPZmZzZXQ7XHJcbiAgICAgICAgdGhpcy5iZXN0U2NvcmVTcHJpdGUueSA9IHRoaXMuYmVzdFNjb3JlWVBvc2l0aW9uO1xyXG5cclxuICAgICAgICB0aGlzLmdhbWVPdmVyQ29udGFpbmVyLmFkZENoaWxkKHRoaXMuc2NvcmVTcHJpdGUpO1xyXG4gICAgICAgIHRoaXMuZ2FtZU92ZXJDb250YWluZXIuYWRkQ2hpbGQodGhpcy5iZXN0U2NvcmVTcHJpdGUpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9jbGVhclNjb3JlcygpIHtcclxuICAgICAgICB0aGlzLmdhbWVPdmVyQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuc2NvcmVTcHJpdGUpO1xyXG4gICAgICAgIHRoaXMuZ2FtZU92ZXJDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5iZXN0U2NvcmVTcHJpdGUpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfZ2V0Q29udGFpbmVyWVBvc2l0aW9uKCkge1xyXG4gICAgICAgIGxldCBjZWlsaW5nSGVpZ2h0ID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5jZWlsaW5nKS5oZWlnaHQ7XHJcbiAgICAgICAgbGV0IGdhbWVPdmVyU2NyZWVuSGVpZ2h0ID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5HQU1FX09WRVIpLmhlaWdodDtcclxuICAgICAgICByZXR1cm4gKGNlaWxpbmdIZWlnaHQgKyBzZXR0aW5ncy5wbGF5YWJsZUFyZWFBYm92ZVdhdGVyICsgc2V0dGluZ3MucGxheWFibGVBcmVhQmVsb3dXYXRlcikgLyAyIC0gZ2FtZU92ZXJTY3JlZW5IZWlnaHQgLyAyO1xyXG4gICAgfVxyXG5cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZ2FtZU92ZXJTY3JlZW47XHJcbiIsImxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MnKTtcclxubGV0IHV0aWxzID0gcmVxdWlyZSgnLi91dGlscy5qcycpO1xyXG5cclxubGV0IGF1ZGlvUGxheWVyID0gcmVxdWlyZSgnLi9hdWRpb1BsYXllcicpO1xyXG5cclxuY29uc3QgcGlwZUZhY2luZyA9IHtcclxuICAgICdVUCc6IDEsXHJcbiAgICAnRE9XTic6IC0xLFxyXG59O1xyXG5cclxubGV0IGxldmVsID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY29udGFpbmVyIHRoYXQgd2lsbCBjb250YWluIGV2ZXJ5dGhpbmcgdGhhdCBuZWVkcyB0byBiZSBtb3ZlZCB0b3dhcmRzIHRoZSBwbGF5ZXJcclxuICAgICAqL1xyXG4gICAgY29udGFpbmVyOiB1bmRlZmluZWQsXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjb250YWluZXIgdGhhdCB3aWxsIGNvbnRhaW4gYWxsIGZsb29yIHRpbGVzXHJcbiAgICAgKi9cclxuICAgIGZsb29yU3ByaXRlOiB1bmRlZmluZWQsXHJcblxyXG4gICAgY2VpbGluZ1Nwcml0ZTogdW5kZWZpbmVkLFxyXG5cclxuICAgIHBpcGVzQ29udGFpbmVyOiB1bmRlZmluZWQsXHJcbiAgICBwaXBlczogW10sXHJcblxyXG4gICAgcGlwZVRleHR1cmU6IHVuZGVmaW5lZCxcclxuICAgIHBpcGVUb3BUZXh0dXJlOiB1bmRlZmluZWQsXHJcbiAgICBwaXBlQm90dG9tVGV4dHVyZTogdW5kZWZpbmVkLFxyXG5cclxuICAgIGZpcnN0UGlwZUZhY2luZzogcGlwZUZhY2luZy5VUCxcclxuXHJcbiAgICBuZXh0UGlwZUZhY2luZzogMCxcclxuICAgIHBsYWNlZFBpcGVzQ291bnQ6IDAsXHJcblxyXG4gICAgcGxheWVySW5zaWRlUGlwZTogZmFsc2UsXHJcblxyXG4gICAgcGlwZUdhcFNpemU6IDEwMCxcclxuXHJcbiAgICBwaXBlRGlzdGFuY2U6IDQwMCxcclxuICAgIGZpcnN0UGlwZURpc3RhbmNlOiA4MDAsXHJcblxyXG4gICAgc2NvcmU6IDAsXHJcbiAgICBiZXN0U2NvcmU6IDAsXHJcbiAgICBzY29yZUNvbnRhaW5lcjogdW5kZWZpbmVkLFxyXG5cclxuICAgIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5fY3JlYXRlQ2VpbGluZygpKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9jcmVhdGVGbG9vcigpKTtcclxuXHJcbiAgICAgICAgLy8gUGlwZXMgc3R1ZmZcclxuICAgICAgICB0aGlzLm5leHRQaXBlRmFjaW5nID0gdGhpcy5maXJzdFBpcGVGYWNpbmc7XHJcbiAgICAgICAgdGhpcy5waXBlVGV4dHVyZSA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMucGlwZSk7XHJcbiAgICAgICAgdGhpcy5waXBlVG9wVGV4dHVyZSA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMucGlwZVVwKTtcclxuICAgICAgICB0aGlzLnBpcGVCb3R0b21UZXh0dXJlID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5waXBlRG93bik7XHJcblxyXG4gICAgICAgIHRoaXMucGlwZXNDb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5faW5pdGlhbFBpcGVzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMucGlwZXNDb250YWluZXIpO1xyXG5cclxuICAgICAgICAvLyBTY29yZVxyXG4gICAgICAgIHRoaXMuc2NvcmVDb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuICAgICAgICB0aGlzLnNjb3JlQ29udGFpbmVyLmFkZENoaWxkKHV0aWxzLnNjb3JlVG9TcHJpdGVzKHRoaXMuc2NvcmUsIHV0aWxzLnNjb3JlU2l6ZS5CSUcpKTtcclxuXHJcbiAgICAgICAgLy8gVG9kbzogTWFrZSB2YXJzXHJcbiAgICAgICAgdGhpcy5zY29yZUNvbnRhaW5lci54ID0gMTA7XHJcbiAgICAgICAgdGhpcy5zY29yZUNvbnRhaW5lci55ID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5jZWlsaW5nKS5oZWlnaHQgKyAxMDtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5zY29yZUNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcclxuICAgIH0sXHJcblxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5zY29yZSA9IDA7XHJcbiAgICAgICAgdGhpcy5zY29yZUNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLnNjb3JlQ29udGFpbmVyLmNoaWxkcmVuWzBdKTtcclxuICAgICAgICB0aGlzLnNjb3JlQ29udGFpbmVyLmFkZENoaWxkKHV0aWxzLnNjb3JlVG9TcHJpdGVzKHRoaXMuc2NvcmUsIHV0aWxzLnNjb3JlU2l6ZS5CSUcpKTtcclxuXHJcbiAgICAgICAgdGhpcy5waXBlc0NvbnRhaW5lci54ID0gMDtcclxuICAgICAgICB0aGlzLnBpcGVzQ29udGFpbmVyLmNoaWxkcmVuLnNwbGljZSgwKTtcclxuICAgICAgICB0aGlzLnBpcGVzID0gW107XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJJbnNpZGVQaXBlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5uZXh0UGlwZUZhY2luZyA9IHRoaXMuZmlyc3RQaXBlRmFjaW5nO1xyXG4gICAgICAgIHRoaXMucGxhY2VkUGlwZXNDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbFBpcGVzKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGxvb3AoKSB7XHJcbiAgICAgICAgdGhpcy5jZWlsaW5nU3ByaXRlLnRpbGVQb3NpdGlvbi54ICs9IC1zZXR0aW5ncy5mb3J3YXJkU3BlZWQ7XHJcbiAgICAgICAgdGhpcy5mbG9vclNwcml0ZS50aWxlUG9zaXRpb24ueCArPSAtc2V0dGluZ3MuZm9yd2FyZFNwZWVkO1xyXG5cclxuICAgICAgICAvLyBQaXBlcyBzdHVmZlxyXG4gICAgICAgIHRoaXMucGlwZXNDb250YWluZXIueCArPSAtc2V0dGluZ3MuZm9yd2FyZFNwZWVkO1xyXG5cclxuICAgICAgICAvLyBSZW1vdmUgcGlwZXMgd2hlbiB0aGV5J3JlIG9mZiBzY3JlZW5cclxuICAgICAgICBpZiAodGhpcy5waXBlcy5sZW5ndGggPiAwKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5waXBlc0NvbnRhaW5lci54IDwgLXRoaXMucGlwZXNbMF0ueCAtIHRoaXMucGlwZVRleHR1cmUud2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGlwZXNDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5waXBlc1swXSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBpcGVzLnNoaWZ0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGxhY2VOZXdQaXBlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgeSBwb3NpdGlvbiBvZiB0aGUgd2F0ZXJcclxuICAgICAqL1xyXG4gICAgZ2V0V2F0ZXJMZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gc2V0dGluZ3MucGxheWFibGVBcmVhQWJvdmVXYXRlcjtcclxuICAgIH0sXHJcblxyXG4gICAgcGlwZUNvbGxpc2lvbihiaXJkKSB7XHJcblxyXG4gICAgICAgIC8vIFdlIHdpbGwgY2hlY2sgaWYgdGhlIGJpcmQgaXMgY29sbGlkaW5nIHdpdGggdGhlIGZpcnN0IHBpcGVcclxuICAgICAgICAvLyBUaGUgYmlyZCBjYW4ndCBwb3NzaWJseSBoaXQgYW55IG90aGVyIHBpcGVzXHJcblxyXG4gICAgICAgIC8vIFdlIG9ubHkgbmVlZCB0byBjb2xsaWRlIHdpdGggdGhlIGxlZnQgc2lkZSBvZiB0aGUgcGlwZXMgYW5kIHRoZSB0b3AvYm90dG9tIHBpZWNlc1xyXG4gICAgICAgIC8vIFdlIGtub3cgaG93IGZhciB0aGUgcGlwZSBjb250YWluZXIgaGFzIG1vdmVkIHRvIHRoZSByaWdodCwgd2UgY2FuIHVzZSB0aGlzIHRvIGdldCB0aGUgbGVmdCBzaWRlXHJcblxyXG4gICAgICAgIC8vIEJlY2F1c2Ugb2Ygc3F1YXJlIGNvbGxpc2lvbiBpdCBjYW4gZmVlbCB1bmZhaXIgd2hlbiBoaXR0aW5nIHRoZSBzaWRlcyBvZiB0aGUgcGlwZXMgd2hpbGUgYXQgYW4gYW5nbGVcclxuICAgICAgICAvLyBXaGljaCBvZnRlbiBoYXBwZW5zIHdoZW4gZGl2aW5nIHRocm91Z2ggdGhlIGdhcC4gVG8gbWFrZSB0aGluZ3MgYSBiaXQgZmFpcmVyLCBhZGRlZCBhIHNtYWxsIG1hcmdpbjtcclxuICAgICAgICBsZXQgY29sbGlzaW9uTWFyZ2luID0gMjtcclxuXHJcbiAgICAgICAgbGV0IGxlZnQgPSB0aGlzLnBpcGVzQ29udGFpbmVyLnggKyB0aGlzLnBpcGVzWzBdLnggKyBjb2xsaXNpb25NYXJnaW47XHJcbiAgICAgICAgbGV0IHJpZ2h0ID0gbGVmdCArIHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMucGlwZSkud2lkdGggLSBjb2xsaXNpb25NYXJnaW47XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVGhlIGJpcmQgaXMgaW4gdGhlIGxlZnQvcmlnaHQgYm91bmRhcmllcyBvZiB0aGUgZmlyc3QgcGlwZVxyXG4gICAgICAgIGlmIChiaXJkLmdldFJpZ2h0KCkgPiBsZWZ0ICYmIGJpcmQuZ2V0TGVmdCgpIDwgcmlnaHQpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucGxheWVySW5zaWRlUGlwZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAvLyBUaGUgYmlyZCBpcyBhYm92ZSB0aGUgZ2FwIVxyXG4gICAgICAgICAgICBpZiAoYmlyZC5nZXRUb3AoKSA8IHRoaXMucGlwZXNbMF0uZ2FwLnRvcCB8fCBiaXJkLmdldEJvdHRvbSgpID4gdGhpcy5waXBlc1swXS5nYXAuYm90dG9tKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wbGF5ZXJJbnNpZGVQaXBlKSB7XHJcbiAgICAgICAgICAgIC8vIFBsYXllciBoYXMgcGFzc2VkIHRoZSBwaXBlXHJcbiAgICAgICAgICAgIHRoaXMuX2luY3JlYXNlU2NvcmUoKTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJJbnNpZGVQaXBlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIF9jcmVhdGVDZWlsaW5nKCkge1xyXG4gICAgICAgIGxldCBjZWlsaW5nVGV4dHVyZSA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuY2VpbGluZyk7XHJcblxyXG4gICAgICAgIHRoaXMuY2VpbGluZ1Nwcml0ZSA9IG5ldyBQSVhJLmV4dHJhcy5UaWxpbmdTcHJpdGUoY2VpbGluZ1RleHR1cmUsIHNldHRpbmdzLmdhbWVXaWR0aCwgY2VpbGluZ1RleHR1cmUuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2VpbGluZ1Nwcml0ZTtcclxuICAgIH0sXHJcblxyXG4gICAgX2NyZWF0ZUZsb29yKCkge1xyXG4gICAgICAgIGxldCBmbG9vclRleHR1cmUgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLmZsb29yKTtcclxuXHJcbiAgICAgICAgdGhpcy5mbG9vclNwcml0ZSA9IG5ldyBQSVhJLmV4dHJhcy5UaWxpbmdTcHJpdGUoZmxvb3JUZXh0dXJlLCBzZXR0aW5ncy5nYW1lV2lkdGgsIGZsb29yVGV4dHVyZS5oZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuZmxvb3JTcHJpdGUueSA9IHNldHRpbmdzLnBsYXlhYmxlQXJlYUFib3ZlV2F0ZXIgKyBzZXR0aW5ncy5wbGF5YWJsZUFyZWFCZWxvd1dhdGVyICsgdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5jZWlsaW5nKS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmZsb29yU3ByaXRlO1xyXG4gICAgfSxcclxuXHJcbiAgICBfaW5pdGlhbFBpcGVzKCkge1xyXG4gICAgICAgIGxldCBzdGFydGluZ1BpcGVzQ291bnQgPSBNYXRoLmNlaWwoc2V0dGluZ3MuZ2FtZVdpZHRoIC8gdGhpcy5waXBlRGlzdGFuY2UpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXJ0aW5nUGlwZXNDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBwaXBlID0gdGhpcy5fY3JlYXRlUGlwZSh0aGlzLl9nZXRSYW5kb21QaXBlSGVpZ2h0KCksIHRoaXMubmV4dFBpcGVGYWNpbmcpO1xyXG4gICAgICAgICAgICBwaXBlLnggPSB0aGlzLmZpcnN0UGlwZURpc3RhbmNlICsgdGhpcy5waXBlRGlzdGFuY2UgKiBpO1xyXG4gICAgICAgICAgICB0aGlzLnBpcGVzQ29udGFpbmVyLmFkZENoaWxkKHBpcGUpO1xyXG4gICAgICAgICAgICB0aGlzLnBpcGVzLnB1c2gocGlwZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm5leHRQaXBlRmFjaW5nICo9IC0xO1xyXG4gICAgICAgICAgICB0aGlzLnBsYWNlZFBpcGVzQ291bnQrKztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9wbGFjZU5ld1BpcGUoKSB7XHJcbiAgICAgICAgLy8gV2UgbmVlZCB0b3RhbCBwaXBlIGFtb3VudCwgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIG9mIG5ldyBvbmVcclxuICAgICAgICBsZXQgcGlwZSA9IHRoaXMuX2NyZWF0ZVBpcGUodGhpcy5fZ2V0UmFuZG9tUGlwZUhlaWdodCgpLCB0aGlzLm5leHRQaXBlRmFjaW5nKTtcclxuICAgICAgICBwaXBlLnggPSB0aGlzLnBsYWNlZFBpcGVzQ291bnQgKiB0aGlzLnBpcGVEaXN0YW5jZSArIHRoaXMuZmlyc3RQaXBlRGlzdGFuY2U7XHJcbiAgICAgICAgdGhpcy5waXBlc0NvbnRhaW5lci5hZGRDaGlsZChwaXBlKTtcclxuICAgICAgICB0aGlzLnBpcGVzLnB1c2gocGlwZSk7XHJcblxyXG4gICAgICAgIHRoaXMubmV4dFBpcGVGYWNpbmcgKj0gLTE7XHJcbiAgICAgICAgdGhpcy5wbGFjZWRQaXBlc0NvdW50Kys7XHJcbiAgICB9LFxyXG5cclxuICAgIF9jcmVhdGVQaXBlKGhlaWdodCwgZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xyXG5cclxuICAgICAgICBsZXQgdG90YWxQbGF5SGVpZ2h0ID0gc2V0dGluZ3MucGxheWFibGVBcmVhQWJvdmVXYXRlciArIHNldHRpbmdzLnBsYXlhYmxlQXJlYUJlbG93V2F0ZXI7XHJcblxyXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09IHBpcGVGYWNpbmcuVVApIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX2NyZWF0ZVVwRmFjaW5nUGlwZShoZWlnaHQpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gcGlwZUZhY2luZy5ET1dOKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9jcmVhdGVEb3duRmFjaW5nUGlwZShoZWlnaHQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgc3BhY2UgZm9yIHBpcGUgaW4gb3Bwb3NpdGUgZGlyZWN0aW9uIHRvIGNvbXBsZXRlIHRoZSBnYXBcclxuICAgICAgICBpZiAoaGVpZ2h0ICsgdGhpcy5waXBlR2FwU2l6ZSA8IHRvdGFsUGxheUhlaWdodCkge1xyXG4gICAgICAgICAgICAvLyBXZSBjYW4gZml0IGFub3RoZXIgcGlwZSBvcHBvc2l0ZSB0byBpdFxyXG4gICAgICAgICAgICBsZXQgb3Bwb3NpdGVQaXBlSGVpZ2h0ID0gdG90YWxQbGF5SGVpZ2h0IC0gaGVpZ2h0IC0gdGhpcy5waXBlR2FwU2l6ZTtcclxuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gcGlwZUZhY2luZy5VUClcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9jcmVhdGVEb3duRmFjaW5nUGlwZShvcHBvc2l0ZVBpcGVIZWlnaHQpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09IHBpcGVGYWNpbmcuRE9XTilcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9jcmVhdGVVcEZhY2luZ1BpcGUob3Bwb3NpdGVQaXBlSGVpZ2h0KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTdG9yZSB0aGUgaW5mb3JtYXRpb24gb2YgdGhlIGdhcCBwb3NpdGlvbiBpbiB0aGUgY29udGFpbmVyIG9iamVjdCBmb3IgZWFzaWVyIGNvbGxpc2lvbiBjaGVja3NcclxuICAgICAgICBsZXQgdG9wID0gKGRpcmVjdGlvbiA9PT0gcGlwZUZhY2luZy5VUCA/IHRvdGFsUGxheUhlaWdodCAtIGhlaWdodCAtIHRoaXMucGlwZUdhcFNpemUgOiBoZWlnaHQpICsgdGhpcy5jZWlsaW5nU3ByaXRlLmhlaWdodDtcclxuICAgICAgICBsZXQgYm90dG9tID0gKGRpcmVjdGlvbiA9PT0gcGlwZUZhY2luZy5VUCA/IHRvdGFsUGxheUhlaWdodCAtIGhlaWdodCA6IGhlaWdodCArIHRoaXMucGlwZUdhcFNpemUpICsgdGhpcy5jZWlsaW5nU3ByaXRlLmhlaWdodDtcclxuICAgICAgICBjb250YWluZXIuZ2FwID0geyB0b3AsIGJvdHRvbSB9XHJcblxyXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIF9jcmVhdGVVcEZhY2luZ1BpcGUoaGVpZ2h0KSB7XHJcbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xyXG5cclxuICAgICAgICBsZXQgcGlwZVRvcCA9IG5ldyBQSVhJLlNwcml0ZSh0aGlzLnBpcGVUb3BUZXh0dXJlKTtcclxuICAgICAgICBjb250YWluZXIuYWRkQ2hpbGQocGlwZVRvcCk7XHJcblxyXG4gICAgICAgIGxldCBwaXBlUGFydEhlaWdodCA9IGhlaWdodCAtIHRoaXMucGlwZVRvcFRleHR1cmUuaGVpZ2h0O1xyXG5cclxuICAgICAgICBsZXQgcGlwZSA9IG5ldyBQSVhJLmV4dHJhcy5UaWxpbmdTcHJpdGUodGhpcy5waXBlVGV4dHVyZSwgdGhpcy5waXBlVGV4dHVyZS53aWR0aCwgcGlwZVBhcnRIZWlnaHQpO1xyXG4gICAgICAgIHBpcGUueSA9IHRoaXMucGlwZVRvcFRleHR1cmUuaGVpZ2h0O1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDaGlsZChwaXBlKTtcclxuXHJcbiAgICAgICAgLy8gUGxhY2UgcGlwZSBvbiB0aGUgYm90dG9tXHJcbiAgICAgICAgY29udGFpbmVyLnkgPSBzZXR0aW5ncy5wbGF5YWJsZUFyZWFBYm92ZVdhdGVyICsgc2V0dGluZ3MucGxheWFibGVBcmVhQmVsb3dXYXRlciAtIGhlaWdodCArIHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuY2VpbGluZykuaGVpZ2h0O1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gICAgfSxcclxuXHJcbiAgICBfY3JlYXRlRG93bkZhY2luZ1BpcGUoaGVpZ2h0KSB7XHJcbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xyXG5cclxuICAgICAgICBsZXQgcGlwZVBhcnRIZWlnaHQgPSBoZWlnaHQgLSB0aGlzLnBpcGVCb3R0b21UZXh0dXJlLmhlaWdodDtcclxuXHJcbiAgICAgICAgbGV0IHBpcGUgPSBuZXcgUElYSS5leHRyYXMuVGlsaW5nU3ByaXRlKHRoaXMucGlwZVRleHR1cmUsIHRoaXMucGlwZVRleHR1cmUud2lkdGgsIHBpcGVQYXJ0SGVpZ2h0KTtcclxuICAgICAgICBjb250YWluZXIuYWRkQ2hpbGQocGlwZSk7XHJcblxyXG4gICAgICAgIGxldCBwaXBlQm90dG9tID0gbmV3IFBJWEkuU3ByaXRlKHRoaXMucGlwZUJvdHRvbVRleHR1cmUpO1xyXG4gICAgICAgIHBpcGVCb3R0b20ueSA9IHBpcGVQYXJ0SGVpZ2h0O1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDaGlsZChwaXBlQm90dG9tKTtcclxuXHJcbiAgICAgICAgLy8gV2UgY2FuIHBsYWNlIGl0IGFnYWluc3QgdGhlIGNlaWxpbmdcclxuICAgICAgICBjb250YWluZXIueSA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuY2VpbGluZykuaGVpZ2h0O1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gICAgfSxcclxuXHJcbiAgICBfaW5jcmVhc2VTY29yZSgpIHtcclxuICAgICAgICBhdWRpb1BsYXllci5wbGF5KGF1ZGlvUGxheWVyLmF1ZGlvRnJhZ21lbnRzLlBPSU5UKTtcclxuICAgICAgICB0aGlzLnNjb3JlKys7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNjb3JlID4gdGhpcy5iZXN0U2NvcmUpIHRoaXMuYmVzdFNjb3JlID0gdGhpcy5zY29yZTtcclxuXHJcbiAgICAgICAgLy8gQmVjYXVzZSB3ZSBwdXQgYWxsIGRpZ2l0cyBpbnNpZGUgb25lIGNvbnRhaW5lciwgd2Ugb25seSBoYXZlIHRvIHJlbW92ZSBvbiBjaGlsZFxyXG4gICAgICAgIHRoaXMuc2NvcmVDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5zY29yZUNvbnRhaW5lci5jaGlsZHJlblswXSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2NvcmVDb250YWluZXIuYWRkQ2hpbGQodXRpbHMuc2NvcmVUb1Nwcml0ZXModGhpcy5zY29yZSwgdXRpbHMuc2NvcmVTaXplLkJJRykpO1xyXG4gICB9LFxyXG5cclxuICAgIF9nZXRSYW5kb21QaXBlSGVpZ2h0KCkge1xyXG4gICAgICAgIC8vIFRvZG86IEdyYWIgZnJvbSBzZXR0aW5ncyBzb21ld2hlcmVcclxuICAgICAgICBsZXQgbWluSGVpZ2h0ID0gMjgwO1xyXG4gICAgICAgIGxldCBtYXhIZWlnaHQgPSAzOTA7XHJcblxyXG4gICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heEhlaWdodCAtIG1pbkhlaWdodCkgKyBtaW5IZWlnaHQ7XHJcbiAgICB9LFxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBsZXZlbDtcclxuIiwiY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBsb2NhdGlvbiBvZiB0aGUgYXNzZXRzIGpzb25cclxuICAgICAqL1xyXG4gICAgYXNzZXRGaWxlOiBcImFzc2V0cy9hc3NldHMuanNvblwiLFxyXG5cclxuICAgIHNvdW5kc1BhdGg6IFwiYXNzZXRzL3NvdW5kcy9cIixcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhcmVhIHRoYXQgaXMgYXZhaWxhYmxlIGFib3ZlIHRoZSB3YXRlclxyXG4gICAgICovXHJcbiAgICBwbGF5YWJsZUFyZWFBYm92ZVdhdGVyOiAyNjAsXHJcblxyXG4gICAgcGxheWFibGVBcmVhQmVsb3dXYXRlcjogMjYwLFxyXG5cclxuICAgIGdhbWVXaWR0aDogMCxcclxuXHJcbiAgICBnYW1lT3ZlclNjcmVlblBvc2l0aW9uOiB7IHg6IDAsIHk6IDAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzcGVlZCBhdCB3aGljaCBvYmplY3RzIG1vdmUgdG93YXJkcyB0aGUgcGxheWVyXHJcbiAgICAgKi9cclxuICAgIGZvcndhcmRTcGVlZDogNSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzcGVlZCBhdCB3aGljaCB0aGUgYmFja2dyb3VuZCBtb3Zlc1xyXG4gICAgICovXHJcbiAgICBiYWNrZ3JvdW5kU3BlZWQ6IDIsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYW1vdW50IG9mIGdyYXZpdHkgYWRkZWQgdG8gdGhlIHZlbG9jaXR5IG9mIHRoZSBwbGF5ZXIgd2hpbGUgYWJvdmUgdGhlIHdhdGVyXHJcbiAgICAgKi9cclxuICAgIGdyYXZpdHk6IDAuMyxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhbW91bnQgb2YgdXB3YXJkIGZvcmNlIGFkZGVkIHRvIHRoZSB2ZWxvY2l0eSBvZiB0aGUgcGxheWVyIHdoaWxlIGJlbG93IHRoZSB3YXRlclxyXG4gICAgICovXHJcbiAgICB3YXRlclB1c2hGb3JjZTogMC4zLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGFtb3VudCBvZiB1cHdhcmQgdmVsb2NpdHkgaXMgYWRkZWQgdG8gdGhlIHBsYXllciBvbiAnZmxhcHBpbmcnLlxyXG4gICAgICovXHJcbiAgICBiaXJkRmxhcFZlbG9jaXR5OiA0LjUsXHJcblxyXG4gICAgYmlyZEFuaW1hdGlvblNwZWVkOiAwLjIsXHJcblxyXG4gICAgYmlyZFN0YXJ0UG9zaXRpb246IHtcclxuICAgICAgICB4OiAxMDAsXHJcbiAgICAgICAgeTogMTUwLFxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIElmIHZlcnRpY2FsIHZlbG9jaXR5IG9mIHRoZSBwbGF5ZXIgc2hvdWxkIGJlIHJlc2V0IGJlZm9yZSBhcHBseWluZyB0aGUgZmxhcCB2ZWxvY2l0eVxyXG4gICAgICovXHJcbiAgICBzaG91bGRCaXJkRmxhcFJlc2V0VmVsb2NpdHk6IHRydWUsXHJcblxyXG4gICAgY2VpbGluZ1Nwcml0ZUhlaWdodDogMCxcclxuXHJcbiAgICB0ZXh0dXJlczoge1xyXG4gICAgICAgICdiYWNrZ3JvdW5kJzogJ3NreS5wbmcnLFxyXG4gICAgICAgICdmbG9vcic6ICdsYW5kLnBuZycsXHJcbiAgICAgICAgJ2NlaWxpbmcnOiAnY2VpbGluZy5wbmcnLFxyXG4gICAgICAgICdwaXBlJzogJ3BpcGUucG5nJyxcclxuICAgICAgICAncGlwZVVwJzogJ3BpcGUtdXAucG5nJyxcclxuICAgICAgICAncGlwZURvd24nOiAncGlwZS1kb3duLnBuZycsXHJcbiAgICAgICAgJ1dBVEVSJzogJ3dhdGVyLnBuZycsXHJcbiAgICAgICAgJ0dBTUVfT1ZFUic6ICdzY29yZWJvYXJkLnBuZycsXHJcbiAgICAgICAgJ1JFU1RBUlQnOiAncmVwbGF5LnBuZycsXHJcbiAgICAgICAgJ0JJR18wJzogJ2ZvbnRfYmlnXzAucG5nJyxcclxuICAgICAgICAnQklHXzEnOiAnZm9udF9iaWdfMS5wbmcnLFxyXG4gICAgICAgICdCSUdfMic6ICdmb250X2JpZ18yLnBuZycsXHJcbiAgICAgICAgJ0JJR18zJzogJ2ZvbnRfYmlnXzMucG5nJyxcclxuICAgICAgICAnQklHXzQnOiAnZm9udF9iaWdfNC5wbmcnLFxyXG4gICAgICAgICdCSUdfNSc6ICdmb250X2JpZ181LnBuZycsXHJcbiAgICAgICAgJ0JJR182JzogJ2ZvbnRfYmlnXzYucG5nJyxcclxuICAgICAgICAnQklHXzcnOiAnZm9udF9iaWdfNy5wbmcnLFxyXG4gICAgICAgICdCSUdfOCc6ICdmb250X2JpZ184LnBuZycsXHJcbiAgICAgICAgJ0JJR185JzogJ2ZvbnRfYmlnXzkucG5nJyxcclxuICAgICAgICAnU01BTExfMCc6ICdmb250X3NtYWxsXzAucG5nJyxcclxuICAgICAgICAnU01BTExfMSc6ICdmb250X3NtYWxsXzEucG5nJyxcclxuICAgICAgICAnU01BTExfMic6ICdmb250X3NtYWxsXzIucG5nJyxcclxuICAgICAgICAnU01BTExfMyc6ICdmb250X3NtYWxsXzMucG5nJyxcclxuICAgICAgICAnU01BTExfNCc6ICdmb250X3NtYWxsXzQucG5nJyxcclxuICAgICAgICAnU01BTExfNSc6ICdmb250X3NtYWxsXzUucG5nJyxcclxuICAgICAgICAnU01BTExfNic6ICdmb250X3NtYWxsXzYucG5nJyxcclxuICAgICAgICAnU01BTExfNyc6ICdmb250X3NtYWxsXzcucG5nJyxcclxuICAgICAgICAnU01BTExfOCc6ICdmb250X3NtYWxsXzgucG5nJyxcclxuICAgICAgICAnU01BTExfOSc6ICdmb250X3NtYWxsXzkucG5nJyxcclxuICAgIH0sXHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICB0aGlzLmdhbWVXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgfVxyXG59O1xyXG5cclxuc2V0dGluZ3MuaW5pdCgpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBzZXR0aW5ncztcclxuIiwibGV0IHNldHRpbmdzID0gcmVxdWlyZSgnLi9zZXR0aW5ncycpO1xyXG5cclxubGV0IHNldHVwID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdXAgdGhlIHJlbmRlcmVyXHJcbiAgICAgKiBAcmV0dXJucyB7UElYSS5XZWJHTFJlbmRlcmVyfFBJWEkuQ2FudmFzUmVuZGVyZXJ9XHJcbiAgICAgKi9cclxuICAgIHJlbmRlcmVyKCkge1xyXG4gICAgICAgIGxldCByZW5kZXJlciA9IFBJWEkuYXV0b0RldGVjdFJlbmRlcmVyKHNldHRpbmdzLmdhbWVXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcclxuICAgICAgICByZW5kZXJlci52aWV3LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgIHJlbmRlcmVyLnZpZXcuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICByZW5kZXJlci5iYWNrZ3JvdW5kQ29sb3IgPSAweDRlYzBjYTtcclxuICAgICAgICByZW5kZXJlci5hdXRvUmVzaXplID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyZW5kZXJlci52aWV3KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlbmRlcmVyO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgdGhlIGFzc2V0c1xyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIGFjdGlvbiB0byBwZXJmb3JtIGFmdGVyIGFzc2V0cyBoYXZlIGJlZW4gbG9hZGVkXHJcbiAgICAgKi9cclxuICAgIGxvYWRBc3NldHMoY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgRXJyb3IoJ0NhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG5cclxuICAgICAgICBQSVhJLmxvYWRlci5hZGQoXCJhc3NldHMvYXNzZXRzLmpzb25cIikubG9hZChjYWxsYmFjayk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHNldHVwO1xyXG4iLCJsZXQgc2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldHRpbmdzJyk7XHJcblxyXG5sZXQgdXRpbHMgPSB7XHJcblxyXG4gICAgc2NvcmVTaXplOiB7XHJcbiAgICAgICAgJ1NNQUxMJzogMCxcclxuICAgICAgICAnQklHJzogMVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIHRleHR1cmUgZnJvbSB0aGUgcGl4aSBsb2FkZXIgYnkgbmFtZVxyXG4gICAgICogQHBhcmFtIG5hbWUgdGV4dHVyZSBuYW1lLCB3aXRoIGV4dGVuc2lvblxyXG4gICAgICogQHJldHVybnMgeyp8UElYSS5UZXh0dXJlfEZyYW1lT2JqZWN0fVxyXG4gICAgICovXHJcbiAgICBnZXRUZXh0dXJlKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gUElYSS5sb2FkZXIucmVzb3VyY2VzW3NldHRpbmdzLmFzc2V0RmlsZV0udGV4dHVyZXNbbmFtZV1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaWxsIGEgZ2l2ZW4gcGl4aSBjb250YWluZXIgYW5kIGZpbGwgaXQgd2l0aCB2ZXJ0aWNhbGx5IGFsaWduZWQgdGlsZXMgZml0dGluZyB3aG9sZSB3aW5kb3cgd2lkdGhcclxuICAgICAqIEBwYXJhbSBjb250YWluZXJcclxuICAgICAqIEBwYXJhbSB0ZXh0dXJlXHJcbiAgICAgKi9cclxuICAgIGZpbGxDb250YWluZXJXaXRoV2luZG93V2lkdGhUaWxlcyhjb250YWluZXIsIHRleHR1cmUpIHtcclxuICAgICAgICBsZXQgcmVxdWlyZWRUaWxlcyA9IHRoaXMuX2dldFJlcXVpcmVkV2lkdGhUaWxlcyh0ZXh0dXJlLndpZHRoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXF1aXJlZFRpbGVzOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHRpbGUgPSBuZXcgUElYSS5TcHJpdGUodGV4dHVyZSk7XHJcbiAgICAgICAgICAgIHRpbGUueCA9IHRpbGUud2lkdGggKiBpO1xyXG4gICAgICAgICAgICBjb250YWluZXIuYWRkQ2hpbGQodGlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzY29yZVRvU3ByaXRlcyhzY29yZSwgc2l6ZSkge1xyXG4gICAgICAgIGxldCBzdHJpbmdTY29yZSA9IHNjb3JlLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgIGxldCB0ZXh0dXJlUHJlZml4ID0gc2l6ZSA9PT0gdGhpcy5zY29yZVNpemUuQklHID8gJ0JJR18nIDogJ1NNQUxMXyc7XHJcbiAgICAgICAgbGV0IGxldHRlclNwYWNpbmcgPSBzaXplID09PSB0aGlzLnNjb3JlU2l6ZS5CSUcgPyAyNSA6IDEwO1xyXG5cclxuXHJcbiAgICAgICAgbGV0IGRpZ2l0c0NvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gc3RyaW5nU2NvcmUubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGRpZ2l0ID0gbmV3IFBJWEkuU3ByaXRlKHRoaXMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlc1t0ZXh0dXJlUHJlZml4ICsgc3RyaW5nU2NvcmUuY2hhckF0KGkpXSkpO1xyXG4gICAgICAgICAgICBkaWdpdC54ID0gaSAqIGxldHRlclNwYWNpbmc7XHJcbiAgICAgICAgICAgIGRpZ2l0c0NvbnRhaW5lci5hZGRDaGlsZChkaWdpdClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkaWdpdHNDb250YWluZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIF9nZXRSZXF1aXJlZFdpZHRoVGlsZXModGlsZVdpZHRoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChzZXR0aW5ncy5nYW1lV2lkdGggLyB0aWxlV2lkdGgpICsgMTtcclxuICAgIH1cclxuXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHV0aWxzO1xyXG4iXX0="}