{"version":3,"sources":["e:/Code/flappy-fish/node_modules/browser-pack/_prelude.js","js/main.js","e:/Code/flappy-fish/js/Pipe.js","e:/Code/flappy-fish/js/audioPlayer.js","e:/Code/flappy-fish/js/background.js","e:/Code/flappy-fish/js/bird.js","e:/Code/flappy-fish/js/game.js","e:/Code/flappy-fish/js/gameOverScreen.js","e:/Code/flappy-fish/js/level.js","e:/Code/flappy-fish/js/settings.js","e:/Code/flappy-fish/js/setup.js","e:/Code/flappy-fish/js/utils.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","let game = require('./game');\r\n\r\n(function() {\r\n    game.start();\r\n})();\r\n\r\n","let settings = require('./settings');\r\nlet utils = require('./utils');\r\n\r\nclass Pipe {\r\n    constructor(height, facing) {\r\n        this.height = height;\r\n        this.facing = facing;\r\n\r\n        this.pipeTexture = utils.getTexture(settings.textures.PIPE);\r\n        this.pipeTopTexture = utils.getTexture(settings.textures.PIPE_UP);\r\n        this.pipeBottomTexture = utils.getTexture(settings.textures.PIPE_DOWN);\r\n\r\n        this._container = new PIXI.Container();\r\n\r\n        let totalPlayHeight = settings.playableAreaAboveWater + settings.playableAreaBelowWater;\r\n\r\n        if (facing === Pipe.UP) {\r\n            this._container.addChild(this._createUpFacingPipe(height));\r\n        } else if (facing === Pipe.DOWN) {\r\n            this._container.addChild(this._createDownFacingPipe(height));\r\n        }\r\n\r\n        // Check if we have space for pipe in opposite direction to complete the gap\r\n        if (height + settings.pipeGapSize < totalPlayHeight) {\r\n            // We can fit another pipe opposite to it\r\n            let oppositePipeHeight = totalPlayHeight - height - settings.pipeGapSize;\r\n            if (facing === Pipe.UP)\r\n                this._container.addChild(this._createDownFacingPipe(oppositePipeHeight));\r\n\r\n            if (facing === Pipe.DOWN)\r\n                this._container.addChild(this._createUpFacingPipe(oppositePipeHeight));\r\n        }\r\n\r\n        let ceilingSpriteHeight = utils.getTexture(settings.textures.CEILING).height;\r\n\r\n        // Store the information of the gap position in the container object for easier collision checks\r\n        let top = (facing === Pipe.UP ? totalPlayHeight - height - settings.pipeGapSize : height) + ceilingSpriteHeight;\r\n        let bottom = (facing === Pipe.UP ? totalPlayHeight - height : height + settings.pipeGapSize) + ceilingSpriteHeight;\r\n        this.container.gap = { top, bottom }\r\n    }\r\n\r\n    _createUpFacingPipe(height) {\r\n        let container = new PIXI.Container();\r\n\r\n        let pipeTop = new PIXI.Sprite(this.pipeTopTexture);\r\n        container.addChild(pipeTop);\r\n\r\n        let pipePartHeight = height - this.pipeTopTexture.height;\r\n\r\n        let pipe = new PIXI.extras.TilingSprite(this.pipeTexture, this.pipeTexture.width, pipePartHeight);\r\n        pipe.y = this.pipeTopTexture.height;\r\n        container.addChild(pipe);\r\n\r\n        // Place pipe on the bottom\r\n        container.y = settings.playableAreaAboveWater + settings.playableAreaBelowWater - height + utils.getTexture(settings.textures.CEILING).height;\r\n\r\n        return container;\r\n    }\r\n\r\n    _createDownFacingPipe(height) {\r\n        let container = new PIXI.Container();\r\n\r\n        let pipePartHeight = height - this.pipeBottomTexture.height;\r\n\r\n        let pipe = new PIXI.extras.TilingSprite(this.pipeTexture, this.pipeTexture.width, pipePartHeight);\r\n        container.addChild(pipe);\r\n\r\n        let pipeBottom = new PIXI.Sprite(this.pipeBottomTexture);\r\n        pipeBottom.y = pipePartHeight;\r\n        container.addChild(pipeBottom);\r\n\r\n        // We can place it against the ceiling\r\n        container.y = utils.getTexture(settings.textures.CEILING).height;\r\n\r\n        return container;\r\n    }\r\n\r\n    get container() {\r\n        return this._container;\r\n    }\r\n\r\n    set container(container) {\r\n        this._container = container;\r\n    }\r\n\r\n    static get textureWidth() {\r\n        return utils.getTexture(settings.textures.PIPE).width;\r\n    }\r\n\r\n    static get UP() {\r\n        return 1;\r\n    }\r\n\r\n    static get DOWN() {\r\n        return -1;\r\n    }\r\n}\r\n\r\nmodule.exports = Pipe;\r\n","let settings = require('./settings');\r\n\r\nlet audioPlayer = {\r\n\r\n    audioFragments: {\r\n        'FLAP': 'sfx_wing.ogg',\r\n        'HIT': 'sfx_hit.ogg',\r\n        'DIE': 'sfx_die.ogg',\r\n        'POINT': 'sfx_point.ogg',\r\n        'SWIM': 'sfx_blub.ogg',\r\n        'ENTER_WATER': 'sfx_water-enter.ogg',\r\n        'EXIT_WATER': 'sfx_water-exit.ogg',\r\n    },\r\n\r\n    _audio: [],\r\n\r\n    init() {\r\n        // Todo: Maybe we need to wait with starting the game until these have been loaded\r\n        for (let key in this.audioFragments) {\r\n            this._audio[this.audioFragments[key]] = new Audio(settings.soundsPath + this.audioFragments[key]);\r\n        }\r\n    },\r\n\r\n    play(audioFragment, callback) {\r\n        if (this._audio[audioFragment].currentTime > 0) {\r\n            this._audio[audioFragment].currentTime = 0;\r\n        }\r\n\r\n        this._audio[audioFragment].play();\r\n\r\n        if (typeof callback === 'function')\r\n            setTimeout(callback, this._audio[audioFragment].duration * 1000);\r\n    }\r\n};\r\n\r\naudioPlayer.init();\r\n\r\n\r\nmodule.exports = audioPlayer;\r\n","let settings = require('./settings.js');\r\nlet utils = require('./utils.js');\r\n\r\nvar background = {\r\n    /**\r\n     * The container that will contain all background tiles lined up\r\n     */\r\n    backgroundSprite: undefined,\r\n\r\n    /**\r\n     * Initialize the background\r\n     * @returns {PIXI.Sprite}\r\n     */\r\n    initialize() {\r\n        let skyTileTexture = utils.getTexture(settings.textures.BACKGROUND);\r\n        this.backgroundSprite = new PIXI.extras.TilingSprite(skyTileTexture, settings.gameWidth, skyTileTexture.height);\r\n        this.backgroundSprite.y = this._getBackgroundSpriteYPosition(skyTileTexture.height);\r\n\r\n        return this.backgroundSprite;\r\n    },\r\n\r\n    /**\r\n     * Update loop of the background\r\n     */\r\n    loop() {\r\n        this.backgroundSprite.tilePosition.x += -settings.backgroundSpeed;\r\n    },\r\n\r\n    /**\r\n     * Get the y position for the background sprite\r\n     * @returns {Number}\r\n     * @private\r\n     */\r\n    _getBackgroundSpriteYPosition(height) {\r\n        return settings.playableAreaAboveWater - height + utils.getTexture(settings.textures.CEILING).height;\r\n    }\r\n};\r\n\r\nmodule.exports = background;\r\n","let settings = require('./settings');\r\nlet utils = require('./utils');\r\n\r\nlet audioPlayer = require('./audioPlayer');\r\n\r\nlet bird = {\r\n    sprite: undefined,\r\n\r\n    /**\r\n     * The velocity of the bird\r\n     */\r\n    velocity: 0,\r\n\r\n    /**\r\n     * Bool if the bird is below the water\r\n     */\r\n    isBelowWater: false,\r\n\r\n    /**\r\n     * The amount of frames the animation has\r\n     */\r\n    animationFrames: 4,\r\n\r\n    birdTextureNamePrefix: 'bird_',\r\n    birdTextureNameSuffix: '.png',\r\n\r\n    initialize() {\r\n        this.sprite = this._setupBirdSprite();\r\n        return this.sprite;\r\n    },\r\n\r\n    loop() {\r\n        if (this.isBelowWater) {\r\n            this.velocity -= settings.waterPushForce;\r\n        } else {\r\n            this.velocity += settings.gravity;\r\n        }\r\n\r\n        this.sprite.y += this.velocity;\r\n        this.sprite.rotation = Math.atan2(this.velocity, settings.forwardSpeed);\r\n    },\r\n\r\n    /**\r\n     * Flap behaviour, is different based on being below or above water\r\n     */\r\n    flap() {\r\n        // Setting to easily test different flap behaviour\r\n        if (settings.shouldBirdFlapResetVelocity) {\r\n            this.velocity = 0;\r\n        }\r\n\r\n        if (this.isBelowWater) {\r\n            this._swim();\r\n        } else {\r\n            this._flap();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Reset the position and velocity of the bird\r\n     */\r\n    reset() {\r\n        this.sprite.x = settings.birdStartPosition.x;\r\n        this.sprite.y = settings.birdStartPosition.y;\r\n        this.velocity = 0;\r\n    },\r\n\r\n    /**\r\n     * Simple helper function to get the top position of the bird\r\n     * @returns {number}\r\n     */\r\n    getTop() {\r\n        return this.sprite.y - this.sprite.height / 2;\r\n    },\r\n\r\n    /**\r\n     * Simple helper function to get the bottom position of the bird\r\n     * @returns {number}\r\n     */\r\n    getBottom() {\r\n        return this.sprite.y + this.sprite.height / 2;\r\n    },\r\n\r\n    /**\r\n     * Simple helper function to get the right position of the bird\r\n     * @returns {number}\r\n     */\r\n    getRight() {\r\n        return this.sprite.x + this.sprite.width / 2;\r\n    },\r\n\r\n    /**\r\n     * Simple helper function to get the left position of the bird\r\n     * @returns {number}\r\n     */\r\n    getLeft() {\r\n        return this.sprite.x - this.sprite.width / 2;\r\n    },\r\n\r\n    /**\r\n     * When the bird enters the water\r\n     */\r\n    enterWater() {\r\n        if (this.isBelowWater) return;\r\n        this.isBelowWater = true;\r\n\r\n        audioPlayer.play(audioPlayer.audioFragments.ENTER_WATER);\r\n    },\r\n\r\n    /**\r\n     * When the bird leaves the water\r\n     */\r\n    leaveWater() {\r\n        if (!this.isBelowWater) return;\r\n        this.isBelowWater = false;\r\n\r\n        audioPlayer.play(audioPlayer.audioFragments.EXIT_WATER);\r\n    },\r\n\r\n    /**\r\n     * Setup the bird sprite with its animations\r\n     * @returns {AnimatedSprite|*}\r\n     * @private\r\n     */\r\n    _setupBirdSprite() {\r\n        let spriteFrames = [];\r\n        for (let i = 0; i < this.animationFrames; i++) {\r\n            spriteFrames.push(utils.getTexture(this.birdTextureNamePrefix + i +  this.birdTextureNameSuffix));\r\n        }\r\n\r\n        let sprite = new PIXI.extras.AnimatedSprite(spriteFrames);\r\n\r\n        sprite.animationSpeed = settings.birdAnimationSpeed;\r\n        sprite.play();\r\n\r\n        sprite.anchor.x = 0.5;\r\n        sprite.anchor.y = 0.5;\r\n\r\n        sprite.x = settings.birdStartPosition.x;\r\n        sprite.y = settings.birdStartPosition.y;\r\n\r\n        return sprite;\r\n    },\r\n\r\n    /**\r\n     * The above water flap behaviour\r\n     * @private\r\n     */\r\n    _flap() {\r\n        audioPlayer.play(audioPlayer.audioFragments.FLAP);\r\n\r\n        this.velocity -= settings.birdFlapVelocity;\r\n    },\r\n\r\n    /**\r\n     * The below water flap (aka swim) behaviour\r\n     * @private\r\n     */\r\n    _swim() {\r\n        audioPlayer.play(audioPlayer.audioFragments.SWIM);\r\n\r\n        this.velocity += settings.birdFlapVelocity;\r\n    }\r\n};\r\n\r\nmodule.exports = bird;\r\n","let setup = require('./setup');\r\n\r\nlet gameOverScreen = require('./gameOverScreen');\r\nlet audioPlayer = require('./audioPlayer');\r\nlet settings = require('./settings');\r\nlet utils = require('./utils');\r\n\r\nlet background = require('./background');\r\nlet level = require('./level');\r\nlet bird = require('./bird');\r\n\r\nlet game = {\r\n    renderer: undefined,\r\n    stage: undefined,\r\n\r\n    /**\r\n     * Whether the game (loop) has stopped or not\r\n     */\r\n    hasStopped: false,\r\n\r\n    /**\r\n     * Start the game\r\n     */\r\n    start() {\r\n        this.renderer = setup.renderer();\r\n        setup.loadAssets(this.initialize.bind(this));\r\n    },\r\n\r\n    /**\r\n     * Initialize all required parts of the game\r\n     */\r\n    initialize() {\r\n        this.stage = new PIXI.Container();\r\n\r\n        this.stage.addChild(background.initialize());\r\n        this.stage.addChild(level.initialize());\r\n        this.stage.addChild(bird.initialize());\r\n\r\n        this.stage.addChild(this._getWaterSprite());\r\n\r\n        let onRestartClick = this._clickRestart.bind(this);\r\n        this.stage.addChild(gameOverScreen.initialize(onRestartClick));\r\n\r\n        this.renderer.render(this.stage);\r\n\r\n        this._setEvents();\r\n\r\n        this.loop();\r\n    },\r\n\r\n    /**\r\n     * The game loop\r\n     */\r\n    loop() {\r\n        requestAnimationFrame(this.loop.bind(this));\r\n\r\n        // This causes the game loop to freeze. Is used when the players hits something and a menu is shown to _restart\r\n        if (this.hasStopped) return;\r\n\r\n        background.loop();\r\n        level.loop();\r\n        bird.loop();\r\n\r\n        this._handleCollision();\r\n\r\n        this.renderer.render(this.stage);\r\n    },\r\n\r\n    /**\r\n     * Trigger game over happening\r\n     * @private\r\n     */\r\n    _gameOver() {\r\n        this._stop();\r\n        this._playDieAudio();\r\n\r\n        // Show game over screen\r\n        gameOverScreen.updateScores(level.score, level.bestScore);\r\n        gameOverScreen.show();\r\n    },\r\n\r\n    /**\r\n     * Function to be called when _restart is clicked from the game over screen\r\n     * @private\r\n     */\r\n    _clickRestart() {\r\n        this._restart();\r\n        gameOverScreen.hide();\r\n    },\r\n\r\n    /**\r\n     * Stop the game\r\n     * @private\r\n     */\r\n    _stop() {\r\n        this.hasStopped = true;\r\n    },\r\n\r\n    /**\r\n     * Continue the game after stopping\r\n     * @private\r\n     */\r\n    _restart() {\r\n        level.reset();\r\n        bird.reset();\r\n\r\n        this.hasStopped = false;\r\n    },\r\n\r\n    /**\r\n     * Handle collision between the bird and 'obstacles'\r\n     * @private\r\n     */\r\n    _handleCollision() {\r\n        // Check if the bird is below or underneath the water\r\n        if (bird.getTop() < level.getWaterLevel() && bird.isBelowWater) {\r\n            bird.leaveWater();\r\n        } else if (bird.getTop() >= level.getWaterLevel() && !bird.isBelowWater) {\r\n            bird.enterWater();\r\n        }\r\n\r\n        // Ceiling collision\r\n        if (bird.getTop() <= level.ceilingSprite.y + level.ceilingSprite.height) {\r\n            this._gameOver();\r\n        }\r\n\r\n        // Floor collision\r\n        if (bird.getBottom() >= level.ceilingSprite.y + level.ceilingSprite.height + settings.playableAreaAboveWater + settings.playableAreaBelowWater) {\r\n            this._gameOver();\r\n        }\r\n\r\n        if (level.pipeCollision(bird)) {\r\n            this._gameOver();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Play the audio for when the player dies\r\n     * @private\r\n     */\r\n    _playDieAudio() {\r\n        audioPlayer.play(audioPlayer.audioFragments.HIT,\r\n            audioPlayer.play.bind(audioPlayer, audioPlayer.audioFragments.DIE)\r\n        );\r\n    },\r\n\r\n    /**\r\n     * Set the required events for interacting with the game\r\n     * @private\r\n     */\r\n    _setEvents() {\r\n        window.addEventListener(\"keydown\", (e) => {\r\n            \r\n            if (e.keyCode != 32) return; // Not spacebar\r\n            if (this.hasStopped) {\r\n                this._clickRestart();\r\n                return;\r\n            }\r\n            bird.flap();\r\n        }, false);\r\n\r\n        if (\"ontouchstart\" in window) {\r\n            window.addEventListener(\"touchstart\", () => {\r\n                if (this.hasStopped) return;\r\n                bird.flap();\r\n            });\r\n        } else {\r\n            window.addEventListener(\"mousedown\", () => {\r\n                if (this.hasStopped) return;\r\n                bird.flap();\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Create and get the tiled sprite for the water\r\n     * @returns {TilingSprite|PIXI.TilingSprite|{enumerable, get}|*}\r\n     * @private\r\n     */\r\n    _getWaterSprite() {\r\n        let waterTexture = utils.getTexture(settings.textures.WATER);\r\n        let waterSprite = new PIXI.extras.TilingSprite(waterTexture, settings.gameWidth, settings.playableAreaBelowWater);\r\n        waterSprite.y = utils.getTexture(settings.textures.CEILING).height + settings.playableAreaAboveWater;\r\n\r\n        return waterSprite;\r\n    }\r\n};\r\n\r\nmodule.exports = game;\r\n","let settings = require('./settings');\r\nlet utils = require('./utils');\r\n\r\nlet gameOverScreen = {\r\n\r\n    /**\r\n     * The callback when the _restart button is clicked\r\n     */\r\n    onClickRestart: undefined,\r\n\r\n    /**\r\n     * The container that will hold the game over container\r\n     */\r\n    container: undefined,\r\n\r\n    /**\r\n     * The container that will hold the the scores and the game over sprite\r\n     */\r\n    gameOverContainer: undefined,\r\n\r\n    scoreYPosition: 93,\r\n    bestScoreYPosition: 135,\r\n    restartButtonYPosition: 190,\r\n    gameOverContainerXPosition: 150,\r\n\r\n    /**\r\n     * Because the score box is not perfectly centered we add some offset\r\n     */\r\n    elementsXOffset: 2,\r\n\r\n    /**\r\n     * Create the game over screen, should only be called once\r\n     */\r\n    initialize(callback) {\r\n        this._setRestartCallback(callback);\r\n\r\n        this.container = new PIXI.Container();\r\n\r\n        this.container.y = this._getContainerYPosition();\r\n        this.container.x = this.gameOverContainerXPosition;\r\n\r\n        this.gameOverContainer = new PIXI.Sprite(utils.getTexture(settings.textures.GAME_OVER));\r\n\r\n        this._renderScores(0, 0);\r\n\r\n        let restartButton = new PIXI.Sprite(utils.getTexture(settings.textures.RESTART));\r\n        restartButton.x = this.gameOverContainer.width / 2 - restartButton.width / 2 + this.elementsXOffset;\r\n        restartButton.y = this.restartButtonYPosition;\r\n        restartButton.interactive = true;\r\n        restartButton.buttonMode = true;\r\n        restartButton.defaultCursor = 'pointer';\r\n\r\n        restartButton.addListener(\"click\", this.onClickRestart);\r\n\r\n        if (\"ontouchstart\" in window) {\r\n            restartButton.addListener(\"touchstart\", this.onClickRestart);\r\n        }\r\n\r\n        this.gameOverContainer.addChild(restartButton);\r\n\r\n        this.container.addChild(this.gameOverContainer);\r\n\r\n        this.hide();\r\n\r\n        return this.container;\r\n    },\r\n\r\n    /**\r\n     * Update the game over screen with the new scores\r\n     */\r\n    updateScores(score, bestScore) {\r\n        this._clearScores();\r\n        this._renderScores(score, bestScore);\r\n    },\r\n\r\n    /**\r\n     * Hide the game over screen\r\n     */\r\n    hide() {\r\n        this.gameOverContainer.visible = false;\r\n    },\r\n\r\n    /**\r\n     * Show the game over screen\r\n     */\r\n    show() {\r\n        this.gameOverContainer.visible = true;\r\n    },\r\n\r\n    /**\r\n     * Set the callback for when the _restart button has been pressed\r\n     * @param callback\r\n     * @private\r\n     */\r\n    _setRestartCallback(callback) {\r\n        if (typeof callback !== 'function') throw new Error('Supplied callback is not a function');\r\n\r\n        this.onClickRestart = callback;\r\n    },\r\n\r\n    /**\r\n     * @param score\r\n     * @param bestScore\r\n     * @private\r\n     */\r\n    _renderScores(score, bestScore) {\r\n        this.scoreSprite = utils.scoreToSprites(score, utils.scoreSize.SMALL);\r\n        this.scoreSprite.x = this.gameOverContainer.width / 2 - this.scoreSprite.width / 2 + this.elementsXOffset;\r\n        this.scoreSprite.y = this.scoreYPosition;\r\n\r\n        this.bestScoreSprite = utils.scoreToSprites(bestScore, utils.scoreSize.SMALL);\r\n        this.bestScoreSprite.x = this.gameOverContainer.width / 2 - this.bestScoreSprite.width / 2 + this.elementsXOffset;\r\n        this.bestScoreSprite.y = this.bestScoreYPosition;\r\n\r\n        this.gameOverContainer.addChild(this.scoreSprite);\r\n        this.gameOverContainer.addChild(this.bestScoreSprite);\r\n    },\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _clearScores() {\r\n        this.gameOverContainer.removeChild(this.scoreSprite);\r\n        this.gameOverContainer.removeChild(this.bestScoreSprite);\r\n    },\r\n\r\n    /**\r\n     * @returns {number}\r\n     * @private\r\n     */\r\n    _getContainerYPosition() {\r\n        let ceilingHeight = utils.getTexture(settings.textures.CEILING).height;\r\n        let gameOverScreenHeight = utils.getTexture(settings.textures.GAME_OVER).height;\r\n        return (ceilingHeight + settings.playableAreaAboveWater + settings.playableAreaBelowWater) / 2 - gameOverScreenHeight / 2;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = gameOverScreen;\r\n","let settings = require('./settings');\r\nlet utils = require('./utils.js');\r\n\r\nlet audioPlayer = require('./audioPlayer');\r\n\r\nlet Pipe = require('./Pipe');\r\n\r\nlet level = {\r\n    /**\r\n     * The container that will contain everything that needs to be moved towards the player\r\n     */\r\n    container: undefined,\r\n\r\n    /**\r\n     * Tiled floor sprite\r\n     */\r\n    floorSprite: undefined,\r\n\r\n    /**\r\n     * Tiled ceiling sprite\r\n     */\r\n    ceilingSprite: undefined,\r\n\r\n    /**\r\n     * Container that will contain all pipes\r\n     */\r\n    pipesContainer: undefined,\r\n\r\n    firstPipeFacing: Pipe.UP,\r\n\r\n    nextPipeFacing: 0,\r\n    placedPipesCount: 0,\r\n\r\n    playerInsidePipe: false,\r\n\r\n    score: 0,\r\n    bestScore: 0,\r\n    scoreContainer: undefined,\r\n\r\n    initialize() {\r\n        this.container = new PIXI.Container();\r\n\r\n        this.container.addChild(this._createCeiling());\r\n        this.container.addChild(this._createFloor());\r\n\r\n        this.container.addChild(this._createInitialPipes());\r\n\r\n        this.container.addChild(this._createScoreContainer());\r\n\r\n        return this.container;\r\n    },\r\n\r\n    loop() {\r\n        this.ceilingSprite.tilePosition.x += -settings.forwardSpeed;\r\n        this.floorSprite.tilePosition.x += -settings.forwardSpeed;\r\n\r\n        // Pipes stuff\r\n        this.pipesContainer.x += -settings.forwardSpeed;\r\n\r\n        // Remove pipes when they're off screen\r\n        if (this.pipesContainer.children.length > 0) {\r\n\r\n            if (this.pipesContainer.x < -this.pipesContainer.children[0].x - Pipe.textureWidth) {\r\n                this.pipesContainer.removeChild(this.pipesContainer.children[0]);\r\n                this._placeNewPipe(this.placedPipesCount);\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Reset the state of the level\r\n     */\r\n    reset() {\r\n        this.score = 0;\r\n        this.scoreContainer.removeChild(this.scoreContainer.children[0]);\r\n        this.scoreContainer.addChild(utils.scoreToSprites(this.score, utils.scoreSize.BIG));\r\n\r\n        this.pipesContainer.x = 0;\r\n        this.pipesContainer.children.splice(0);\r\n        this.playerInsidePipe = false;\r\n        this.nextPipeFacing = this.firstPipeFacing;\r\n        this.placedPipesCount = 0;\r\n        this.container.addChild(this._createInitialPipes());\r\n    },\r\n\r\n    /**\r\n     * Get the y position of the water\r\n     */\r\n    getWaterLevel() {\r\n        return settings.playableAreaAboveWater;\r\n    },\r\n\r\n    pipeCollision(bird) {\r\n        // Because of square collision it can feel unfair when hitting the sides of the pipes while at an angle\r\n        // Which often happens when diving through the gap. To make things a bit fairer, added a small margin;\r\n        let collisionMargin = 2;\r\n\r\n        let left = this.pipesContainer.x + this.pipesContainer.children[0].x + collisionMargin;\r\n        let right = left + utils.getTexture(settings.textures.PIPE).width - collisionMargin;\r\n        \r\n        // The bird is in the left/right boundaries of the first pipe\r\n        if (bird.getRight() > left && bird.getLeft() < right) {\r\n            this.playerInsidePipe = true;\r\n\r\n            // The bird is above the gap!\r\n            if (bird.getTop() < this.pipesContainer.children[0].gap.top || bird.getBottom() > this.pipesContainer.children[0].gap.bottom) {\r\n                return true;\r\n            }\r\n        } else if (this.playerInsidePipe) {\r\n            // Player has passed the pipe\r\n            this._increaseScore();\r\n            this.playerInsidePipe = false;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Create the tiled ceiling sprite\r\n     * @returns {PIXI.extras.TilingSprite}\r\n     * @private\r\n     */\r\n    _createCeiling() {\r\n        let ceilingTexture = utils.getTexture(settings.textures.CEILING);\r\n\r\n        this.ceilingSprite = new PIXI.extras.TilingSprite(ceilingTexture, settings.gameWidth, ceilingTexture.height);\r\n\r\n        return this.ceilingSprite;\r\n    },\r\n\r\n    /**\r\n     * Create the tiled floor sprite\r\n     * @returns {PIXI.extras.TilingSprite}\r\n     * @private\r\n     */\r\n    _createFloor() {\r\n        let floorTexture = utils.getTexture(settings.textures.FLOOR);\r\n\r\n        this.floorSprite = new PIXI.extras.TilingSprite(floorTexture, settings.gameWidth, floorTexture.height);\r\n        this.floorSprite.y = settings.playableAreaAboveWater + settings.playableAreaBelowWater + utils.getTexture(settings.textures.CEILING).height;\r\n\r\n        return this.floorSprite;\r\n    },\r\n\r\n    /**\r\n     * @returns {PIXI.Container}\r\n     * @private\r\n     */\r\n    _createInitialPipes() {\r\n        this.nextPipeFacing = this.firstPipeFacing;\r\n        this.pipesContainer = new PIXI.Container();\r\n\r\n        let startingPipesCount = Math.ceil(settings.gameWidth / settings.pipeDistance);\r\n\r\n        for (let i = 0; i < startingPipesCount; i++) {\r\n            this._placeNewPipe(i);\r\n        }\r\n\r\n        return this.pipesContainer;\r\n    },\r\n\r\n    /**\r\n     * @returns {PIXI.Container}\r\n     * @private\r\n     */\r\n    _createScoreContainer() {\r\n        this.scoreContainer = new PIXI.Container();\r\n        this.scoreContainer.addChild(utils.scoreToSprites(this.score, utils.scoreSize.BIG));\r\n\r\n        this.scoreContainer.x = settings.scorePosition.x;\r\n        this.scoreContainer.y = utils.getTexture(settings.textures.CEILING).height + settings.scorePosition.y;\r\n\r\n        return this.scoreContainer;\r\n    },\r\n\r\n    /**\r\n     * Create a new pipe, the position depends on the number\r\n     * @param number\r\n     * @private\r\n     */\r\n    _placeNewPipe(number) {\r\n        // We need total pipe amount, to calculate position of new one\r\n        let pipe = this._createPipe(this._getRandomPipeHeight(), this.nextPipeFacing);\r\n        pipe.container.x = settings.firstPipeDistance + settings.pipeDistance * number;\r\n        this.pipesContainer.addChild(pipe.container);\r\n\r\n        this.nextPipeFacing *= -1;\r\n        this.placedPipesCount++;\r\n    },\r\n\r\n    _createPipe(height, direction) {\r\n        return new Pipe(height, direction);\r\n    },\r\n\r\n    _increaseScore() {\r\n        audioPlayer.play(audioPlayer.audioFragments.POINT);\r\n        this.score++;\r\n\r\n        if (this.score > this.bestScore) this.bestScore = this.score;\r\n\r\n        // Because we put all digits inside one container, we only have to remove on child\r\n        this.scoreContainer.removeChild(this.scoreContainer.children[0]);\r\n\r\n        this.scoreContainer.addChild(utils.scoreToSprites(this.score, utils.scoreSize.BIG));\r\n   },\r\n\r\n    /**\r\n     * Get a random height for the pipe\r\n     * @returns {number}\r\n     * @private\r\n     */\r\n    _getRandomPipeHeight() {\r\n        return Math.random() * (settings.maxPipeHeight - settings.minPipeHeight) + settings.minPipeHeight;\r\n    },\r\n};\r\n\r\nmodule.exports = level;\r\n","const settings = {\r\n    /**\r\n     * The location of the assets json\r\n     */\r\n    assetFile: \"assets/assets.json\",\r\n\r\n    soundsPath: \"assets/sounds/\",\r\n\r\n    /**\r\n     * The area that is available above the water\r\n     */\r\n    playableAreaAboveWater: 260,\r\n\r\n    /**\r\n     * The area that is available below the water\r\n     */\r\n    playableAreaBelowWater: 260,\r\n\r\n    /**\r\n     * The width of the game, filled during init currently\r\n     */\r\n    gameWidth: 0,\r\n\r\n    /**\r\n     * The speed at which objects move towards the player\r\n     */\r\n    forwardSpeed: 5,\r\n\r\n    /**\r\n     * The speed at which the background moves\r\n     */\r\n    backgroundSpeed: 2,\r\n\r\n    /**\r\n     * The amount of gravity added to the velocity of the player while above the water\r\n     */\r\n    gravity: 0.3,\r\n\r\n    /**\r\n     * The amount of upward force added to the velocity of the player while below the water\r\n     */\r\n    waterPushForce: 0.3,\r\n\r\n    /**\r\n     * The amount of upward velocity is added to the player on 'flapping'.\r\n     */\r\n    birdFlapVelocity: 4.5,\r\n\r\n    /**\r\n     * The speed of the bird animation\r\n     */\r\n    birdAnimationSpeed: 0.2,\r\n\r\n    /**\r\n     * Starting position of the bird\r\n     */\r\n    birdStartPosition: {\r\n        x: 100,\r\n        y: 150,\r\n    },\r\n\r\n    /**\r\n     * The vertical gaps in the pipes for the player to fly through\r\n     */\r\n    pipeGapSize: 100,\r\n\r\n    /**\r\n     * The distance to the first pipe\r\n     */\r\n    firstPipeDistance: 800,\r\n\r\n    /**\r\n     * The distance between each pipe\r\n     */\r\n    pipeDistance: 400,\r\n\r\n    /**\r\n     * The min height of a pipe (handle with care)\r\n     */\r\n    minPipeHeight: 280,\r\n\r\n    /**\r\n     * The max height of a pipe (handle with care)\r\n     */\r\n    maxPipeHeight: 390,\r\n\r\n    /**\r\n     * The position of the score\r\n     */\r\n    scorePosition: {\r\n        x: 10,\r\n        y: 10 // Offset from the 'ceiling'\r\n    },\r\n\r\n    /**\r\n     * If vertical velocity of the player should be reset before applying the flap velocity\r\n     */\r\n    shouldBirdFlapResetVelocity: true,\r\n\r\n    textures: {\r\n        'BACKGROUND': 'sky.png',\r\n        'FLOOR': 'land.png',\r\n        'CEILING': 'ceiling.png',\r\n        'PIPE': 'pipe.png',\r\n        'PIPE_UP': 'pipe-up.png',\r\n        'PIPE_DOWN': 'pipe-down.png',\r\n        'WATER': 'water.png',\r\n        'GAME_OVER': 'scoreboard.png',\r\n        'RESTART': 'replay.png',\r\n        'BIG_0': 'font_big_0.png',\r\n        'BIG_1': 'font_big_1.png',\r\n        'BIG_2': 'font_big_2.png',\r\n        'BIG_3': 'font_big_3.png',\r\n        'BIG_4': 'font_big_4.png',\r\n        'BIG_5': 'font_big_5.png',\r\n        'BIG_6': 'font_big_6.png',\r\n        'BIG_7': 'font_big_7.png',\r\n        'BIG_8': 'font_big_8.png',\r\n        'BIG_9': 'font_big_9.png',\r\n        'SMALL_0': 'font_small_0.png',\r\n        'SMALL_1': 'font_small_1.png',\r\n        'SMALL_2': 'font_small_2.png',\r\n        'SMALL_3': 'font_small_3.png',\r\n        'SMALL_4': 'font_small_4.png',\r\n        'SMALL_5': 'font_small_5.png',\r\n        'SMALL_6': 'font_small_6.png',\r\n        'SMALL_7': 'font_small_7.png',\r\n        'SMALL_8': 'font_small_8.png',\r\n        'SMALL_9': 'font_small_9.png',\r\n    },\r\n\r\n    init() {\r\n        this.gameWidth = window.innerWidth;\r\n    }\r\n};\r\n\r\nsettings.init();\r\n\r\nmodule.exports = settings;\r\n","let settings = require('./settings');\r\n\r\nlet setup = {\r\n    /**\r\n     * Set up the renderer\r\n     * @returns {PIXI.WebGLRenderer|PIXI.CanvasRenderer}\r\n     */\r\n    renderer() {\r\n        let renderer = PIXI.autoDetectRenderer(settings.gameWidth, window.innerHeight);\r\n        renderer.view.style.position = \"absolute\";\r\n        renderer.view.style.display = \"block\";\r\n        renderer.backgroundColor = 0x4ec0ca;\r\n        renderer.autoResize = true;\r\n\r\n        document.body.appendChild(renderer.view);\r\n\r\n        return renderer;\r\n    },\r\n\r\n    /**\r\n     * Load the assets\r\n     * @param callback action to perform after assets have been loaded\r\n     */\r\n    loadAssets(callback) {\r\n        if (typeof callback !== 'function') throw new Error('Callback must be a function');\r\n\r\n        PIXI.loader.add(settings.assetFile).load(callback);\r\n    }\r\n};\r\n\r\nmodule.exports = setup;\r\n","let settings = require('./settings');\r\n\r\nlet utils = {\r\n\r\n    scoreSize: {\r\n        'SMALL': 0,\r\n        'BIG': 1\r\n    },\r\n\r\n    /**\r\n     * Get a texture from the pixi loader by name\r\n     * @param name texture name, with extension\r\n     * @returns {*|PIXI.Texture|FrameObject}\r\n     */\r\n    getTexture(name) {\r\n        return PIXI.loader.resources[settings.assetFile].textures[name]\r\n    },\r\n\r\n    /**\r\n     * Generate score sprites based on passed score\r\n     * @param score\r\n     * @param size\r\n     * @returns {Container|*}\r\n     */\r\n    scoreToSprites(score, size) {\r\n        let stringScore = score.toString();\r\n\r\n        let texturePrefix = size === this.scoreSize.BIG ? 'BIG_' : 'SMALL_';\r\n        let letterSpacing = size === this.scoreSize.BIG ? 25 : 10;\r\n\r\n        let digitsContainer = new PIXI.Container();\r\n\r\n        for (let i = 0, len = stringScore.length; i < len; i++) {\r\n            let digit = new PIXI.Sprite(this.getTexture(settings.textures[texturePrefix + stringScore.charAt(i)]));\r\n            digit.x = i * letterSpacing;\r\n            digitsContainer.addChild(digit)\r\n        }\r\n\r\n        return digitsContainer;\r\n    }\r\n};\r\n\r\nmodule.exports = utils;\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImU6L0NvZGUvZmxhcHB5LWZpc2gvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsImpzXFxtYWluLmpzIiwiZTpcXENvZGVcXGZsYXBweS1maXNoXFxqc1xcUGlwZS5qcyIsImU6XFxDb2RlXFxmbGFwcHktZmlzaFxcanNcXGF1ZGlvUGxheWVyLmpzIiwiZTpcXENvZGVcXGZsYXBweS1maXNoXFxqc1xcYmFja2dyb3VuZC5qcyIsImU6XFxDb2RlXFxmbGFwcHktZmlzaFxcanNcXGJpcmQuanMiLCJlOlxcQ29kZVxcZmxhcHB5LWZpc2hcXGpzXFxnYW1lLmpzIiwiZTpcXENvZGVcXGZsYXBweS1maXNoXFxqc1xcZ2FtZU92ZXJTY3JlZW4uanMiLCJlOlxcQ29kZVxcZmxhcHB5LWZpc2hcXGpzXFxsZXZlbC5qcyIsImU6XFxDb2RlXFxmbGFwcHktZmlzaFxcanNcXHNldHRpbmdzLmpzIiwiZTpcXENvZGVcXGZsYXBweS1maXNoXFxqc1xcc2V0dXAuanMiLCJlOlxcQ29kZVxcZmxhcHB5LWZpc2hcXGpzXFx1dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBSSxPQUFPLFFBQVEsUUFBUixDQUFYOztBQUVBLENBQUMsWUFBVztBQUNSLFNBQUssS0FBTDtBQUNILENBRkQ7Ozs7Ozs7OztBQ0ZBLElBQUksV0FBVyxRQUFRLFlBQVIsQ0FBZjtBQUNBLElBQUksUUFBUSxRQUFRLFNBQVIsQ0FBWjs7SUFFTSxJO0FBQ0Ysa0JBQVksTUFBWixFQUFvQixNQUFwQixFQUE0QjtBQUFBOztBQUN4QixhQUFLLE1BQUwsR0FBYyxNQUFkO0FBQ0EsYUFBSyxNQUFMLEdBQWMsTUFBZDs7QUFFQSxhQUFLLFdBQUwsR0FBbUIsTUFBTSxVQUFOLENBQWlCLFNBQVMsUUFBVCxDQUFrQixJQUFuQyxDQUFuQjtBQUNBLGFBQUssY0FBTCxHQUFzQixNQUFNLFVBQU4sQ0FBaUIsU0FBUyxRQUFULENBQWtCLE9BQW5DLENBQXRCO0FBQ0EsYUFBSyxpQkFBTCxHQUF5QixNQUFNLFVBQU4sQ0FBaUIsU0FBUyxRQUFULENBQWtCLFNBQW5DLENBQXpCOztBQUVBLGFBQUssVUFBTCxHQUFrQixJQUFJLEtBQUssU0FBVCxFQUFsQjs7QUFFQSxZQUFJLGtCQUFrQixTQUFTLHNCQUFULEdBQWtDLFNBQVMsc0JBQWpFOztBQUVBLFlBQUksV0FBVyxLQUFLLEVBQXBCLEVBQXdCO0FBQ3BCLGlCQUFLLFVBQUwsQ0FBZ0IsUUFBaEIsQ0FBeUIsS0FBSyxtQkFBTCxDQUF5QixNQUF6QixDQUF6QjtBQUNILFNBRkQsTUFFTyxJQUFJLFdBQVcsS0FBSyxJQUFwQixFQUEwQjtBQUM3QixpQkFBSyxVQUFMLENBQWdCLFFBQWhCLENBQXlCLEtBQUsscUJBQUwsQ0FBMkIsTUFBM0IsQ0FBekI7QUFDSDs7QUFFRDtBQUNBLFlBQUksU0FBUyxTQUFTLFdBQWxCLEdBQWdDLGVBQXBDLEVBQXFEO0FBQ2pEO0FBQ0EsZ0JBQUkscUJBQXFCLGtCQUFrQixNQUFsQixHQUEyQixTQUFTLFdBQTdEO0FBQ0EsZ0JBQUksV0FBVyxLQUFLLEVBQXBCLEVBQ0ksS0FBSyxVQUFMLENBQWdCLFFBQWhCLENBQXlCLEtBQUsscUJBQUwsQ0FBMkIsa0JBQTNCLENBQXpCOztBQUVKLGdCQUFJLFdBQVcsS0FBSyxJQUFwQixFQUNJLEtBQUssVUFBTCxDQUFnQixRQUFoQixDQUF5QixLQUFLLG1CQUFMLENBQXlCLGtCQUF6QixDQUF6QjtBQUNQOztBQUVELFlBQUksc0JBQXNCLE1BQU0sVUFBTixDQUFpQixTQUFTLFFBQVQsQ0FBa0IsT0FBbkMsRUFBNEMsTUFBdEU7O0FBRUE7QUFDQSxZQUFJLE1BQU0sQ0FBQyxXQUFXLEtBQUssRUFBaEIsR0FBcUIsa0JBQWtCLE1BQWxCLEdBQTJCLFNBQVMsV0FBekQsR0FBdUUsTUFBeEUsSUFBa0YsbUJBQTVGO0FBQ0EsWUFBSSxTQUFTLENBQUMsV0FBVyxLQUFLLEVBQWhCLEdBQXFCLGtCQUFrQixNQUF2QyxHQUFnRCxTQUFTLFNBQVMsV0FBbkUsSUFBa0YsbUJBQS9GO0FBQ0EsYUFBSyxTQUFMLENBQWUsR0FBZixHQUFxQixFQUFFLFFBQUYsRUFBTyxjQUFQLEVBQXJCO0FBQ0g7Ozs7NENBRW1CLE0sRUFBUTtBQUN4QixnQkFBSSxZQUFZLElBQUksS0FBSyxTQUFULEVBQWhCOztBQUVBLGdCQUFJLFVBQVUsSUFBSSxLQUFLLE1BQVQsQ0FBZ0IsS0FBSyxjQUFyQixDQUFkO0FBQ0Esc0JBQVUsUUFBVixDQUFtQixPQUFuQjs7QUFFQSxnQkFBSSxpQkFBaUIsU0FBUyxLQUFLLGNBQUwsQ0FBb0IsTUFBbEQ7O0FBRUEsZ0JBQUksT0FBTyxJQUFJLEtBQUssTUFBTCxDQUFZLFlBQWhCLENBQTZCLEtBQUssV0FBbEMsRUFBK0MsS0FBSyxXQUFMLENBQWlCLEtBQWhFLEVBQXVFLGNBQXZFLENBQVg7QUFDQSxpQkFBSyxDQUFMLEdBQVMsS0FBSyxjQUFMLENBQW9CLE1BQTdCO0FBQ0Esc0JBQVUsUUFBVixDQUFtQixJQUFuQjs7QUFFQTtBQUNBLHNCQUFVLENBQVYsR0FBYyxTQUFTLHNCQUFULEdBQWtDLFNBQVMsc0JBQTNDLEdBQW9FLE1BQXBFLEdBQTZFLE1BQU0sVUFBTixDQUFpQixTQUFTLFFBQVQsQ0FBa0IsT0FBbkMsRUFBNEMsTUFBdkk7O0FBRUEsbUJBQU8sU0FBUDtBQUNIOzs7OENBRXFCLE0sRUFBUTtBQUMxQixnQkFBSSxZQUFZLElBQUksS0FBSyxTQUFULEVBQWhCOztBQUVBLGdCQUFJLGlCQUFpQixTQUFTLEtBQUssaUJBQUwsQ0FBdUIsTUFBckQ7O0FBRUEsZ0JBQUksT0FBTyxJQUFJLEtBQUssTUFBTCxDQUFZLFlBQWhCLENBQTZCLEtBQUssV0FBbEMsRUFBK0MsS0FBSyxXQUFMLENBQWlCLEtBQWhFLEVBQXVFLGNBQXZFLENBQVg7QUFDQSxzQkFBVSxRQUFWLENBQW1CLElBQW5COztBQUVBLGdCQUFJLGFBQWEsSUFBSSxLQUFLLE1BQVQsQ0FBZ0IsS0FBSyxpQkFBckIsQ0FBakI7QUFDQSx1QkFBVyxDQUFYLEdBQWUsY0FBZjtBQUNBLHNCQUFVLFFBQVYsQ0FBbUIsVUFBbkI7O0FBRUE7QUFDQSxzQkFBVSxDQUFWLEdBQWMsTUFBTSxVQUFOLENBQWlCLFNBQVMsUUFBVCxDQUFrQixPQUFuQyxFQUE0QyxNQUExRDs7QUFFQSxtQkFBTyxTQUFQO0FBQ0g7Ozs0QkFFZTtBQUNaLG1CQUFPLEtBQUssVUFBWjtBQUNILFM7MEJBRWEsUyxFQUFXO0FBQ3JCLGlCQUFLLFVBQUwsR0FBa0IsU0FBbEI7QUFDSDs7OzRCQUV5QjtBQUN0QixtQkFBTyxNQUFNLFVBQU4sQ0FBaUIsU0FBUyxRQUFULENBQWtCLElBQW5DLEVBQXlDLEtBQWhEO0FBQ0g7Ozs0QkFFZTtBQUNaLG1CQUFPLENBQVA7QUFDSDs7OzRCQUVpQjtBQUNkLG1CQUFPLENBQUMsQ0FBUjtBQUNIOzs7Ozs7QUFHTCxPQUFPLE9BQVAsR0FBaUIsSUFBakI7Ozs7O0FDbEdBLElBQUksV0FBVyxRQUFRLFlBQVIsQ0FBZjs7QUFFQSxJQUFJLGNBQWM7O0FBRWQsb0JBQWdCO0FBQ1osZ0JBQVEsY0FESTtBQUVaLGVBQU8sYUFGSztBQUdaLGVBQU8sYUFISztBQUlaLGlCQUFTLGVBSkc7QUFLWixnQkFBUSxjQUxJO0FBTVosdUJBQWUscUJBTkg7QUFPWixzQkFBYztBQVBGLEtBRkY7O0FBWWQsWUFBUSxFQVpNOztBQWNkLFFBZGMsa0JBY1A7QUFDSDtBQUNBLGFBQUssSUFBSSxHQUFULElBQWdCLEtBQUssY0FBckIsRUFBcUM7QUFDakMsaUJBQUssTUFBTCxDQUFZLEtBQUssY0FBTCxDQUFvQixHQUFwQixDQUFaLElBQXdDLElBQUksS0FBSixDQUFVLFNBQVMsVUFBVCxHQUFzQixLQUFLLGNBQUwsQ0FBb0IsR0FBcEIsQ0FBaEMsQ0FBeEM7QUFDSDtBQUNKLEtBbkJhO0FBcUJkLFFBckJjLGdCQXFCVCxhQXJCUyxFQXFCTSxRQXJCTixFQXFCZ0I7QUFDMUIsWUFBSSxLQUFLLE1BQUwsQ0FBWSxhQUFaLEVBQTJCLFdBQTNCLEdBQXlDLENBQTdDLEVBQWdEO0FBQzVDLGlCQUFLLE1BQUwsQ0FBWSxhQUFaLEVBQTJCLFdBQTNCLEdBQXlDLENBQXpDO0FBQ0g7O0FBRUQsYUFBSyxNQUFMLENBQVksYUFBWixFQUEyQixJQUEzQjs7QUFFQSxZQUFJLE9BQU8sUUFBUCxLQUFvQixVQUF4QixFQUNJLFdBQVcsUUFBWCxFQUFxQixLQUFLLE1BQUwsQ0FBWSxhQUFaLEVBQTJCLFFBQTNCLEdBQXNDLElBQTNEO0FBQ1A7QUE5QmEsQ0FBbEI7O0FBaUNBLFlBQVksSUFBWjs7QUFHQSxPQUFPLE9BQVAsR0FBaUIsV0FBakI7Ozs7O0FDdENBLElBQUksV0FBVyxRQUFRLGVBQVIsQ0FBZjtBQUNBLElBQUksUUFBUSxRQUFRLFlBQVIsQ0FBWjs7QUFFQSxJQUFJLGFBQWE7QUFDYjs7O0FBR0Esc0JBQWtCLFNBSkw7O0FBTWI7Ozs7QUFJQSxjQVZhLHdCQVVBO0FBQ1QsWUFBSSxpQkFBaUIsTUFBTSxVQUFOLENBQWlCLFNBQVMsUUFBVCxDQUFrQixVQUFuQyxDQUFyQjtBQUNBLGFBQUssZ0JBQUwsR0FBd0IsSUFBSSxLQUFLLE1BQUwsQ0FBWSxZQUFoQixDQUE2QixjQUE3QixFQUE2QyxTQUFTLFNBQXRELEVBQWlFLGVBQWUsTUFBaEYsQ0FBeEI7QUFDQSxhQUFLLGdCQUFMLENBQXNCLENBQXRCLEdBQTBCLEtBQUssNkJBQUwsQ0FBbUMsZUFBZSxNQUFsRCxDQUExQjs7QUFFQSxlQUFPLEtBQUssZ0JBQVo7QUFDSCxLQWhCWTs7O0FBa0JiOzs7QUFHQSxRQXJCYSxrQkFxQk47QUFDSCxhQUFLLGdCQUFMLENBQXNCLFlBQXRCLENBQW1DLENBQW5DLElBQXdDLENBQUMsU0FBUyxlQUFsRDtBQUNILEtBdkJZOzs7QUF5QmI7Ozs7O0FBS0EsaUNBOUJhLHlDQThCaUIsTUE5QmpCLEVBOEJ5QjtBQUNsQyxlQUFPLFNBQVMsc0JBQVQsR0FBa0MsTUFBbEMsR0FBMkMsTUFBTSxVQUFOLENBQWlCLFNBQVMsUUFBVCxDQUFrQixPQUFuQyxFQUE0QyxNQUE5RjtBQUNIO0FBaENZLENBQWpCOztBQW1DQSxPQUFPLE9BQVAsR0FBaUIsVUFBakI7Ozs7O0FDdENBLElBQUksV0FBVyxRQUFRLFlBQVIsQ0FBZjtBQUNBLElBQUksUUFBUSxRQUFRLFNBQVIsQ0FBWjs7QUFFQSxJQUFJLGNBQWMsUUFBUSxlQUFSLENBQWxCOztBQUVBLElBQUksT0FBTztBQUNQLFlBQVEsU0FERDs7QUFHUDs7O0FBR0EsY0FBVSxDQU5IOztBQVFQOzs7QUFHQSxrQkFBYyxLQVhQOztBQWFQOzs7QUFHQSxxQkFBaUIsQ0FoQlY7O0FBa0JQLDJCQUF1QixPQWxCaEI7QUFtQlAsMkJBQXVCLE1BbkJoQjs7QUFxQlAsY0FyQk8sd0JBcUJNO0FBQ1QsYUFBSyxNQUFMLEdBQWMsS0FBSyxnQkFBTCxFQUFkO0FBQ0EsZUFBTyxLQUFLLE1BQVo7QUFDSCxLQXhCTTtBQTBCUCxRQTFCTyxrQkEwQkE7QUFDSCxZQUFJLEtBQUssWUFBVCxFQUF1QjtBQUNuQixpQkFBSyxRQUFMLElBQWlCLFNBQVMsY0FBMUI7QUFDSCxTQUZELE1BRU87QUFDSCxpQkFBSyxRQUFMLElBQWlCLFNBQVMsT0FBMUI7QUFDSDs7QUFFRCxhQUFLLE1BQUwsQ0FBWSxDQUFaLElBQWlCLEtBQUssUUFBdEI7QUFDQSxhQUFLLE1BQUwsQ0FBWSxRQUFaLEdBQXVCLEtBQUssS0FBTCxDQUFXLEtBQUssUUFBaEIsRUFBMEIsU0FBUyxZQUFuQyxDQUF2QjtBQUNILEtBbkNNOzs7QUFxQ1A7OztBQUdBLFFBeENPLGtCQXdDQTtBQUNIO0FBQ0EsWUFBSSxTQUFTLDJCQUFiLEVBQTBDO0FBQ3RDLGlCQUFLLFFBQUwsR0FBZ0IsQ0FBaEI7QUFDSDs7QUFFRCxZQUFJLEtBQUssWUFBVCxFQUF1QjtBQUNuQixpQkFBSyxLQUFMO0FBQ0gsU0FGRCxNQUVPO0FBQ0gsaUJBQUssS0FBTDtBQUNIO0FBQ0osS0FuRE07OztBQXFEUDs7O0FBR0EsU0F4RE8sbUJBd0RDO0FBQ0osYUFBSyxNQUFMLENBQVksQ0FBWixHQUFnQixTQUFTLGlCQUFULENBQTJCLENBQTNDO0FBQ0EsYUFBSyxNQUFMLENBQVksQ0FBWixHQUFnQixTQUFTLGlCQUFULENBQTJCLENBQTNDO0FBQ0EsYUFBSyxRQUFMLEdBQWdCLENBQWhCO0FBQ0gsS0E1RE07OztBQThEUDs7OztBQUlBLFVBbEVPLG9CQWtFRTtBQUNMLGVBQU8sS0FBSyxNQUFMLENBQVksQ0FBWixHQUFnQixLQUFLLE1BQUwsQ0FBWSxNQUFaLEdBQXFCLENBQTVDO0FBQ0gsS0FwRU07OztBQXNFUDs7OztBQUlBLGFBMUVPLHVCQTBFSztBQUNSLGVBQU8sS0FBSyxNQUFMLENBQVksQ0FBWixHQUFnQixLQUFLLE1BQUwsQ0FBWSxNQUFaLEdBQXFCLENBQTVDO0FBQ0gsS0E1RU07OztBQThFUDs7OztBQUlBLFlBbEZPLHNCQWtGSTtBQUNQLGVBQU8sS0FBSyxNQUFMLENBQVksQ0FBWixHQUFnQixLQUFLLE1BQUwsQ0FBWSxLQUFaLEdBQW9CLENBQTNDO0FBQ0gsS0FwRk07OztBQXNGUDs7OztBQUlBLFdBMUZPLHFCQTBGRztBQUNOLGVBQU8sS0FBSyxNQUFMLENBQVksQ0FBWixHQUFnQixLQUFLLE1BQUwsQ0FBWSxLQUFaLEdBQW9CLENBQTNDO0FBQ0gsS0E1Rk07OztBQThGUDs7O0FBR0EsY0FqR08sd0JBaUdNO0FBQ1QsWUFBSSxLQUFLLFlBQVQsRUFBdUI7QUFDdkIsYUFBSyxZQUFMLEdBQW9CLElBQXBCOztBQUVBLG9CQUFZLElBQVosQ0FBaUIsWUFBWSxjQUFaLENBQTJCLFdBQTVDO0FBQ0gsS0F0R007OztBQXdHUDs7O0FBR0EsY0EzR08sd0JBMkdNO0FBQ1QsWUFBSSxDQUFDLEtBQUssWUFBVixFQUF3QjtBQUN4QixhQUFLLFlBQUwsR0FBb0IsS0FBcEI7O0FBRUEsb0JBQVksSUFBWixDQUFpQixZQUFZLGNBQVosQ0FBMkIsVUFBNUM7QUFDSCxLQWhITTs7O0FBa0hQOzs7OztBQUtBLG9CQXZITyw4QkF1SFk7QUFDZixZQUFJLGVBQWUsRUFBbkI7QUFDQSxhQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksS0FBSyxlQUF6QixFQUEwQyxHQUExQyxFQUErQztBQUMzQyx5QkFBYSxJQUFiLENBQWtCLE1BQU0sVUFBTixDQUFpQixLQUFLLHFCQUFMLEdBQTZCLENBQTdCLEdBQWtDLEtBQUsscUJBQXhELENBQWxCO0FBQ0g7O0FBRUQsWUFBSSxTQUFTLElBQUksS0FBSyxNQUFMLENBQVksY0FBaEIsQ0FBK0IsWUFBL0IsQ0FBYjs7QUFFQSxlQUFPLGNBQVAsR0FBd0IsU0FBUyxrQkFBakM7QUFDQSxlQUFPLElBQVA7O0FBRUEsZUFBTyxNQUFQLENBQWMsQ0FBZCxHQUFrQixHQUFsQjtBQUNBLGVBQU8sTUFBUCxDQUFjLENBQWQsR0FBa0IsR0FBbEI7O0FBRUEsZUFBTyxDQUFQLEdBQVcsU0FBUyxpQkFBVCxDQUEyQixDQUF0QztBQUNBLGVBQU8sQ0FBUCxHQUFXLFNBQVMsaUJBQVQsQ0FBMkIsQ0FBdEM7O0FBRUEsZUFBTyxNQUFQO0FBQ0gsS0F6SU07OztBQTJJUDs7OztBQUlBLFNBL0lPLG1CQStJQztBQUNKLG9CQUFZLElBQVosQ0FBaUIsWUFBWSxjQUFaLENBQTJCLElBQTVDOztBQUVBLGFBQUssUUFBTCxJQUFpQixTQUFTLGdCQUExQjtBQUNILEtBbkpNOzs7QUFxSlA7Ozs7QUFJQSxTQXpKTyxtQkF5SkM7QUFDSixvQkFBWSxJQUFaLENBQWlCLFlBQVksY0FBWixDQUEyQixJQUE1Qzs7QUFFQSxhQUFLLFFBQUwsSUFBaUIsU0FBUyxnQkFBMUI7QUFDSDtBQTdKTSxDQUFYOztBQWdLQSxPQUFPLE9BQVAsR0FBaUIsSUFBakI7Ozs7O0FDcktBLElBQUksUUFBUSxRQUFRLFNBQVIsQ0FBWjs7QUFFQSxJQUFJLGlCQUFpQixRQUFRLGtCQUFSLENBQXJCO0FBQ0EsSUFBSSxjQUFjLFFBQVEsZUFBUixDQUFsQjtBQUNBLElBQUksV0FBVyxRQUFRLFlBQVIsQ0FBZjtBQUNBLElBQUksUUFBUSxRQUFRLFNBQVIsQ0FBWjs7QUFFQSxJQUFJLGFBQWEsUUFBUSxjQUFSLENBQWpCO0FBQ0EsSUFBSSxRQUFRLFFBQVEsU0FBUixDQUFaO0FBQ0EsSUFBSSxPQUFPLFFBQVEsUUFBUixDQUFYOztBQUVBLElBQUksT0FBTztBQUNQLGNBQVUsU0FESDtBQUVQLFdBQU8sU0FGQTs7QUFJUDs7O0FBR0EsZ0JBQVksS0FQTDs7QUFTUDs7O0FBR0EsU0FaTyxtQkFZQztBQUNKLGFBQUssUUFBTCxHQUFnQixNQUFNLFFBQU4sRUFBaEI7QUFDQSxjQUFNLFVBQU4sQ0FBaUIsS0FBSyxVQUFMLENBQWdCLElBQWhCLENBQXFCLElBQXJCLENBQWpCO0FBQ0gsS0FmTTs7O0FBaUJQOzs7QUFHQSxjQXBCTyx3QkFvQk07QUFDVCxhQUFLLEtBQUwsR0FBYSxJQUFJLEtBQUssU0FBVCxFQUFiOztBQUVBLGFBQUssS0FBTCxDQUFXLFFBQVgsQ0FBb0IsV0FBVyxVQUFYLEVBQXBCO0FBQ0EsYUFBSyxLQUFMLENBQVcsUUFBWCxDQUFvQixNQUFNLFVBQU4sRUFBcEI7QUFDQSxhQUFLLEtBQUwsQ0FBVyxRQUFYLENBQW9CLEtBQUssVUFBTCxFQUFwQjs7QUFFQSxhQUFLLEtBQUwsQ0FBVyxRQUFYLENBQW9CLEtBQUssZUFBTCxFQUFwQjs7QUFFQSxZQUFJLGlCQUFpQixLQUFLLGFBQUwsQ0FBbUIsSUFBbkIsQ0FBd0IsSUFBeEIsQ0FBckI7QUFDQSxhQUFLLEtBQUwsQ0FBVyxRQUFYLENBQW9CLGVBQWUsVUFBZixDQUEwQixjQUExQixDQUFwQjs7QUFFQSxhQUFLLFFBQUwsQ0FBYyxNQUFkLENBQXFCLEtBQUssS0FBMUI7O0FBRUEsYUFBSyxVQUFMOztBQUVBLGFBQUssSUFBTDtBQUNILEtBckNNOzs7QUF1Q1A7OztBQUdBLFFBMUNPLGtCQTBDQTtBQUNILDhCQUFzQixLQUFLLElBQUwsQ0FBVSxJQUFWLENBQWUsSUFBZixDQUF0Qjs7QUFFQTtBQUNBLFlBQUksS0FBSyxVQUFULEVBQXFCOztBQUVyQixtQkFBVyxJQUFYO0FBQ0EsY0FBTSxJQUFOO0FBQ0EsYUFBSyxJQUFMOztBQUVBLGFBQUssZ0JBQUw7O0FBRUEsYUFBSyxRQUFMLENBQWMsTUFBZCxDQUFxQixLQUFLLEtBQTFCO0FBQ0gsS0F2RE07OztBQXlEUDs7OztBQUlBLGFBN0RPLHVCQTZESztBQUNSLGFBQUssS0FBTDtBQUNBLGFBQUssYUFBTDs7QUFFQTtBQUNBLHVCQUFlLFlBQWYsQ0FBNEIsTUFBTSxLQUFsQyxFQUF5QyxNQUFNLFNBQS9DO0FBQ0EsdUJBQWUsSUFBZjtBQUNILEtBcEVNOzs7QUFzRVA7Ozs7QUFJQSxpQkExRU8sMkJBMEVTO0FBQ1osYUFBSyxRQUFMO0FBQ0EsdUJBQWUsSUFBZjtBQUNILEtBN0VNOzs7QUErRVA7Ozs7QUFJQSxTQW5GTyxtQkFtRkM7QUFDSixhQUFLLFVBQUwsR0FBa0IsSUFBbEI7QUFDSCxLQXJGTTs7O0FBdUZQOzs7O0FBSUEsWUEzRk8sc0JBMkZJO0FBQ1AsY0FBTSxLQUFOO0FBQ0EsYUFBSyxLQUFMOztBQUVBLGFBQUssVUFBTCxHQUFrQixLQUFsQjtBQUNILEtBaEdNOzs7QUFrR1A7Ozs7QUFJQSxvQkF0R08sOEJBc0dZO0FBQ2Y7QUFDQSxZQUFJLEtBQUssTUFBTCxLQUFnQixNQUFNLGFBQU4sRUFBaEIsSUFBeUMsS0FBSyxZQUFsRCxFQUFnRTtBQUM1RCxpQkFBSyxVQUFMO0FBQ0gsU0FGRCxNQUVPLElBQUksS0FBSyxNQUFMLE1BQWlCLE1BQU0sYUFBTixFQUFqQixJQUEwQyxDQUFDLEtBQUssWUFBcEQsRUFBa0U7QUFDckUsaUJBQUssVUFBTDtBQUNIOztBQUVEO0FBQ0EsWUFBSSxLQUFLLE1BQUwsTUFBaUIsTUFBTSxhQUFOLENBQW9CLENBQXBCLEdBQXdCLE1BQU0sYUFBTixDQUFvQixNQUFqRSxFQUF5RTtBQUNyRSxpQkFBSyxTQUFMO0FBQ0g7O0FBRUQ7QUFDQSxZQUFJLEtBQUssU0FBTCxNQUFvQixNQUFNLGFBQU4sQ0FBb0IsQ0FBcEIsR0FBd0IsTUFBTSxhQUFOLENBQW9CLE1BQTVDLEdBQXFELFNBQVMsc0JBQTlELEdBQXVGLFNBQVMsc0JBQXhILEVBQWdKO0FBQzVJLGlCQUFLLFNBQUw7QUFDSDs7QUFFRCxZQUFJLE1BQU0sYUFBTixDQUFvQixJQUFwQixDQUFKLEVBQStCO0FBQzNCLGlCQUFLLFNBQUw7QUFDSDtBQUNKLEtBM0hNOzs7QUE2SFA7Ozs7QUFJQSxpQkFqSU8sMkJBaUlTO0FBQ1osb0JBQVksSUFBWixDQUFpQixZQUFZLGNBQVosQ0FBMkIsR0FBNUMsRUFDSSxZQUFZLElBQVosQ0FBaUIsSUFBakIsQ0FBc0IsV0FBdEIsRUFBbUMsWUFBWSxjQUFaLENBQTJCLEdBQTlELENBREo7QUFHSCxLQXJJTTs7O0FBdUlQOzs7O0FBSUEsY0EzSU8sd0JBMklNO0FBQUE7O0FBQ1QsZUFBTyxnQkFBUCxDQUF3QixTQUF4QixFQUFtQyxVQUFDLENBQUQsRUFBTzs7QUFFdEMsZ0JBQUksRUFBRSxPQUFGLElBQWEsRUFBakIsRUFBcUIsT0FGaUIsQ0FFVDtBQUM3QixnQkFBSSxNQUFLLFVBQVQsRUFBcUI7QUFDakIsc0JBQUssYUFBTDtBQUNBO0FBQ0g7QUFDRCxpQkFBSyxJQUFMO0FBQ0gsU0FSRCxFQVFHLEtBUkg7O0FBVUEsWUFBSSxrQkFBa0IsTUFBdEIsRUFBOEI7QUFDMUIsbUJBQU8sZ0JBQVAsQ0FBd0IsWUFBeEIsRUFBc0MsWUFBTTtBQUN4QyxvQkFBSSxNQUFLLFVBQVQsRUFBcUI7QUFDckIscUJBQUssSUFBTDtBQUNILGFBSEQ7QUFJSCxTQUxELE1BS087QUFDSCxtQkFBTyxnQkFBUCxDQUF3QixXQUF4QixFQUFxQyxZQUFNO0FBQ3ZDLG9CQUFJLE1BQUssVUFBVCxFQUFxQjtBQUNyQixxQkFBSyxJQUFMO0FBQ0gsYUFIRDtBQUlIO0FBQ0osS0FqS007OztBQW1LUDs7Ozs7QUFLQSxtQkF4S08sNkJBd0tXO0FBQ2QsWUFBSSxlQUFlLE1BQU0sVUFBTixDQUFpQixTQUFTLFFBQVQsQ0FBa0IsS0FBbkMsQ0FBbkI7QUFDQSxZQUFJLGNBQWMsSUFBSSxLQUFLLE1BQUwsQ0FBWSxZQUFoQixDQUE2QixZQUE3QixFQUEyQyxTQUFTLFNBQXBELEVBQStELFNBQVMsc0JBQXhFLENBQWxCO0FBQ0Esb0JBQVksQ0FBWixHQUFnQixNQUFNLFVBQU4sQ0FBaUIsU0FBUyxRQUFULENBQWtCLE9BQW5DLEVBQTRDLE1BQTVDLEdBQXFELFNBQVMsc0JBQTlFOztBQUVBLGVBQU8sV0FBUDtBQUNIO0FBOUtNLENBQVg7O0FBaUxBLE9BQU8sT0FBUCxHQUFpQixJQUFqQjs7Ozs7QUM1TEEsSUFBSSxXQUFXLFFBQVEsWUFBUixDQUFmO0FBQ0EsSUFBSSxRQUFRLFFBQVEsU0FBUixDQUFaOztBQUVBLElBQUksaUJBQWlCOztBQUVqQjs7O0FBR0Esb0JBQWdCLFNBTEM7O0FBT2pCOzs7QUFHQSxlQUFXLFNBVk07O0FBWWpCOzs7QUFHQSx1QkFBbUIsU0FmRjs7QUFpQmpCLG9CQUFnQixFQWpCQztBQWtCakIsd0JBQW9CLEdBbEJIO0FBbUJqQiw0QkFBd0IsR0FuQlA7QUFvQmpCLGdDQUE0QixHQXBCWDs7QUFzQmpCOzs7QUFHQSxxQkFBaUIsQ0F6QkE7O0FBMkJqQjs7O0FBR0EsY0E5QmlCLHNCQThCTixRQTlCTSxFQThCSTtBQUNqQixhQUFLLG1CQUFMLENBQXlCLFFBQXpCOztBQUVBLGFBQUssU0FBTCxHQUFpQixJQUFJLEtBQUssU0FBVCxFQUFqQjs7QUFFQSxhQUFLLFNBQUwsQ0FBZSxDQUFmLEdBQW1CLEtBQUssc0JBQUwsRUFBbkI7QUFDQSxhQUFLLFNBQUwsQ0FBZSxDQUFmLEdBQW1CLEtBQUssMEJBQXhCOztBQUVBLGFBQUssaUJBQUwsR0FBeUIsSUFBSSxLQUFLLE1BQVQsQ0FBZ0IsTUFBTSxVQUFOLENBQWlCLFNBQVMsUUFBVCxDQUFrQixTQUFuQyxDQUFoQixDQUF6Qjs7QUFFQSxhQUFLLGFBQUwsQ0FBbUIsQ0FBbkIsRUFBc0IsQ0FBdEI7O0FBRUEsWUFBSSxnQkFBZ0IsSUFBSSxLQUFLLE1BQVQsQ0FBZ0IsTUFBTSxVQUFOLENBQWlCLFNBQVMsUUFBVCxDQUFrQixPQUFuQyxDQUFoQixDQUFwQjtBQUNBLHNCQUFjLENBQWQsR0FBa0IsS0FBSyxpQkFBTCxDQUF1QixLQUF2QixHQUErQixDQUEvQixHQUFtQyxjQUFjLEtBQWQsR0FBc0IsQ0FBekQsR0FBNkQsS0FBSyxlQUFwRjtBQUNBLHNCQUFjLENBQWQsR0FBa0IsS0FBSyxzQkFBdkI7QUFDQSxzQkFBYyxXQUFkLEdBQTRCLElBQTVCO0FBQ0Esc0JBQWMsVUFBZCxHQUEyQixJQUEzQjtBQUNBLHNCQUFjLGFBQWQsR0FBOEIsU0FBOUI7O0FBRUEsc0JBQWMsV0FBZCxDQUEwQixPQUExQixFQUFtQyxLQUFLLGNBQXhDOztBQUVBLFlBQUksa0JBQWtCLE1BQXRCLEVBQThCO0FBQzFCLDBCQUFjLFdBQWQsQ0FBMEIsWUFBMUIsRUFBd0MsS0FBSyxjQUE3QztBQUNIOztBQUVELGFBQUssaUJBQUwsQ0FBdUIsUUFBdkIsQ0FBZ0MsYUFBaEM7O0FBRUEsYUFBSyxTQUFMLENBQWUsUUFBZixDQUF3QixLQUFLLGlCQUE3Qjs7QUFFQSxhQUFLLElBQUw7O0FBRUEsZUFBTyxLQUFLLFNBQVo7QUFDSCxLQTlEZ0I7OztBQWdFakI7OztBQUdBLGdCQW5FaUIsd0JBbUVKLEtBbkVJLEVBbUVHLFNBbkVILEVBbUVjO0FBQzNCLGFBQUssWUFBTDtBQUNBLGFBQUssYUFBTCxDQUFtQixLQUFuQixFQUEwQixTQUExQjtBQUNILEtBdEVnQjs7O0FBd0VqQjs7O0FBR0EsUUEzRWlCLGtCQTJFVjtBQUNILGFBQUssaUJBQUwsQ0FBdUIsT0FBdkIsR0FBaUMsS0FBakM7QUFDSCxLQTdFZ0I7OztBQStFakI7OztBQUdBLFFBbEZpQixrQkFrRlY7QUFDSCxhQUFLLGlCQUFMLENBQXVCLE9BQXZCLEdBQWlDLElBQWpDO0FBQ0gsS0FwRmdCOzs7QUFzRmpCOzs7OztBQUtBLHVCQTNGaUIsK0JBMkZHLFFBM0ZILEVBMkZhO0FBQzFCLFlBQUksT0FBTyxRQUFQLEtBQW9CLFVBQXhCLEVBQW9DLE1BQU0sSUFBSSxLQUFKLENBQVUscUNBQVYsQ0FBTjs7QUFFcEMsYUFBSyxjQUFMLEdBQXNCLFFBQXRCO0FBQ0gsS0EvRmdCOzs7QUFpR2pCOzs7OztBQUtBLGlCQXRHaUIseUJBc0dILEtBdEdHLEVBc0dJLFNBdEdKLEVBc0dlO0FBQzVCLGFBQUssV0FBTCxHQUFtQixNQUFNLGNBQU4sQ0FBcUIsS0FBckIsRUFBNEIsTUFBTSxTQUFOLENBQWdCLEtBQTVDLENBQW5CO0FBQ0EsYUFBSyxXQUFMLENBQWlCLENBQWpCLEdBQXFCLEtBQUssaUJBQUwsQ0FBdUIsS0FBdkIsR0FBK0IsQ0FBL0IsR0FBbUMsS0FBSyxXQUFMLENBQWlCLEtBQWpCLEdBQXlCLENBQTVELEdBQWdFLEtBQUssZUFBMUY7QUFDQSxhQUFLLFdBQUwsQ0FBaUIsQ0FBakIsR0FBcUIsS0FBSyxjQUExQjs7QUFFQSxhQUFLLGVBQUwsR0FBdUIsTUFBTSxjQUFOLENBQXFCLFNBQXJCLEVBQWdDLE1BQU0sU0FBTixDQUFnQixLQUFoRCxDQUF2QjtBQUNBLGFBQUssZUFBTCxDQUFxQixDQUFyQixHQUF5QixLQUFLLGlCQUFMLENBQXVCLEtBQXZCLEdBQStCLENBQS9CLEdBQW1DLEtBQUssZUFBTCxDQUFxQixLQUFyQixHQUE2QixDQUFoRSxHQUFvRSxLQUFLLGVBQWxHO0FBQ0EsYUFBSyxlQUFMLENBQXFCLENBQXJCLEdBQXlCLEtBQUssa0JBQTlCOztBQUVBLGFBQUssaUJBQUwsQ0FBdUIsUUFBdkIsQ0FBZ0MsS0FBSyxXQUFyQztBQUNBLGFBQUssaUJBQUwsQ0FBdUIsUUFBdkIsQ0FBZ0MsS0FBSyxlQUFyQztBQUNILEtBakhnQjs7O0FBbUhqQjs7O0FBR0EsZ0JBdEhpQiwwQkFzSEY7QUFDWCxhQUFLLGlCQUFMLENBQXVCLFdBQXZCLENBQW1DLEtBQUssV0FBeEM7QUFDQSxhQUFLLGlCQUFMLENBQXVCLFdBQXZCLENBQW1DLEtBQUssZUFBeEM7QUFDSCxLQXpIZ0I7OztBQTJIakI7Ozs7QUFJQSwwQkEvSGlCLG9DQStIUTtBQUNyQixZQUFJLGdCQUFnQixNQUFNLFVBQU4sQ0FBaUIsU0FBUyxRQUFULENBQWtCLE9BQW5DLEVBQTRDLE1BQWhFO0FBQ0EsWUFBSSx1QkFBdUIsTUFBTSxVQUFOLENBQWlCLFNBQVMsUUFBVCxDQUFrQixTQUFuQyxFQUE4QyxNQUF6RTtBQUNBLGVBQU8sQ0FBQyxnQkFBZ0IsU0FBUyxzQkFBekIsR0FBa0QsU0FBUyxzQkFBNUQsSUFBc0YsQ0FBdEYsR0FBMEYsdUJBQXVCLENBQXhIO0FBQ0g7QUFuSWdCLENBQXJCOztBQXVJQSxPQUFPLE9BQVAsR0FBaUIsY0FBakI7Ozs7O0FDMUlBLElBQUksV0FBVyxRQUFRLFlBQVIsQ0FBZjtBQUNBLElBQUksUUFBUSxRQUFRLFlBQVIsQ0FBWjs7QUFFQSxJQUFJLGNBQWMsUUFBUSxlQUFSLENBQWxCOztBQUVBLElBQUksT0FBTyxRQUFRLFFBQVIsQ0FBWDs7QUFFQSxJQUFJLFFBQVE7QUFDUjs7O0FBR0EsZUFBVyxTQUpIOztBQU1SOzs7QUFHQSxpQkFBYSxTQVRMOztBQVdSOzs7QUFHQSxtQkFBZSxTQWRQOztBQWdCUjs7O0FBR0Esb0JBQWdCLFNBbkJSOztBQXFCUixxQkFBaUIsS0FBSyxFQXJCZDs7QUF1QlIsb0JBQWdCLENBdkJSO0FBd0JSLHNCQUFrQixDQXhCVjs7QUEwQlIsc0JBQWtCLEtBMUJWOztBQTRCUixXQUFPLENBNUJDO0FBNkJSLGVBQVcsQ0E3Qkg7QUE4QlIsb0JBQWdCLFNBOUJSOztBQWdDUixjQWhDUSx3QkFnQ0s7QUFDVCxhQUFLLFNBQUwsR0FBaUIsSUFBSSxLQUFLLFNBQVQsRUFBakI7O0FBRUEsYUFBSyxTQUFMLENBQWUsUUFBZixDQUF3QixLQUFLLGNBQUwsRUFBeEI7QUFDQSxhQUFLLFNBQUwsQ0FBZSxRQUFmLENBQXdCLEtBQUssWUFBTCxFQUF4Qjs7QUFFQSxhQUFLLFNBQUwsQ0FBZSxRQUFmLENBQXdCLEtBQUssbUJBQUwsRUFBeEI7O0FBRUEsYUFBSyxTQUFMLENBQWUsUUFBZixDQUF3QixLQUFLLHFCQUFMLEVBQXhCOztBQUVBLGVBQU8sS0FBSyxTQUFaO0FBQ0gsS0EzQ087QUE2Q1IsUUE3Q1Esa0JBNkNEO0FBQ0gsYUFBSyxhQUFMLENBQW1CLFlBQW5CLENBQWdDLENBQWhDLElBQXFDLENBQUMsU0FBUyxZQUEvQztBQUNBLGFBQUssV0FBTCxDQUFpQixZQUFqQixDQUE4QixDQUE5QixJQUFtQyxDQUFDLFNBQVMsWUFBN0M7O0FBRUE7QUFDQSxhQUFLLGNBQUwsQ0FBb0IsQ0FBcEIsSUFBeUIsQ0FBQyxTQUFTLFlBQW5DOztBQUVBO0FBQ0EsWUFBSSxLQUFLLGNBQUwsQ0FBb0IsUUFBcEIsQ0FBNkIsTUFBN0IsR0FBc0MsQ0FBMUMsRUFBNkM7O0FBRXpDLGdCQUFJLEtBQUssY0FBTCxDQUFvQixDQUFwQixHQUF3QixDQUFDLEtBQUssY0FBTCxDQUFvQixRQUFwQixDQUE2QixDQUE3QixFQUFnQyxDQUFqQyxHQUFxQyxLQUFLLFlBQXRFLEVBQW9GO0FBQ2hGLHFCQUFLLGNBQUwsQ0FBb0IsV0FBcEIsQ0FBZ0MsS0FBSyxjQUFMLENBQW9CLFFBQXBCLENBQTZCLENBQTdCLENBQWhDO0FBQ0EscUJBQUssYUFBTCxDQUFtQixLQUFLLGdCQUF4QjtBQUNIO0FBRUo7QUFDSixLQTdETzs7O0FBK0RSOzs7QUFHQSxTQWxFUSxtQkFrRUE7QUFDSixhQUFLLEtBQUwsR0FBYSxDQUFiO0FBQ0EsYUFBSyxjQUFMLENBQW9CLFdBQXBCLENBQWdDLEtBQUssY0FBTCxDQUFvQixRQUFwQixDQUE2QixDQUE3QixDQUFoQztBQUNBLGFBQUssY0FBTCxDQUFvQixRQUFwQixDQUE2QixNQUFNLGNBQU4sQ0FBcUIsS0FBSyxLQUExQixFQUFpQyxNQUFNLFNBQU4sQ0FBZ0IsR0FBakQsQ0FBN0I7O0FBRUEsYUFBSyxjQUFMLENBQW9CLENBQXBCLEdBQXdCLENBQXhCO0FBQ0EsYUFBSyxjQUFMLENBQW9CLFFBQXBCLENBQTZCLE1BQTdCLENBQW9DLENBQXBDO0FBQ0EsYUFBSyxnQkFBTCxHQUF3QixLQUF4QjtBQUNBLGFBQUssY0FBTCxHQUFzQixLQUFLLGVBQTNCO0FBQ0EsYUFBSyxnQkFBTCxHQUF3QixDQUF4QjtBQUNBLGFBQUssU0FBTCxDQUFlLFFBQWYsQ0FBd0IsS0FBSyxtQkFBTCxFQUF4QjtBQUNILEtBN0VPOzs7QUErRVI7OztBQUdBLGlCQWxGUSwyQkFrRlE7QUFDWixlQUFPLFNBQVMsc0JBQWhCO0FBQ0gsS0FwRk87QUFzRlIsaUJBdEZRLHlCQXNGTSxJQXRGTixFQXNGWTtBQUNoQjtBQUNBO0FBQ0EsWUFBSSxrQkFBa0IsQ0FBdEI7O0FBRUEsWUFBSSxPQUFPLEtBQUssY0FBTCxDQUFvQixDQUFwQixHQUF3QixLQUFLLGNBQUwsQ0FBb0IsUUFBcEIsQ0FBNkIsQ0FBN0IsRUFBZ0MsQ0FBeEQsR0FBNEQsZUFBdkU7QUFDQSxZQUFJLFFBQVEsT0FBTyxNQUFNLFVBQU4sQ0FBaUIsU0FBUyxRQUFULENBQWtCLElBQW5DLEVBQXlDLEtBQWhELEdBQXdELGVBQXBFOztBQUVBO0FBQ0EsWUFBSSxLQUFLLFFBQUwsS0FBa0IsSUFBbEIsSUFBMEIsS0FBSyxPQUFMLEtBQWlCLEtBQS9DLEVBQXNEO0FBQ2xELGlCQUFLLGdCQUFMLEdBQXdCLElBQXhCOztBQUVBO0FBQ0EsZ0JBQUksS0FBSyxNQUFMLEtBQWdCLEtBQUssY0FBTCxDQUFvQixRQUFwQixDQUE2QixDQUE3QixFQUFnQyxHQUFoQyxDQUFvQyxHQUFwRCxJQUEyRCxLQUFLLFNBQUwsS0FBbUIsS0FBSyxjQUFMLENBQW9CLFFBQXBCLENBQTZCLENBQTdCLEVBQWdDLEdBQWhDLENBQW9DLE1BQXRILEVBQThIO0FBQzFILHVCQUFPLElBQVA7QUFDSDtBQUNKLFNBUEQsTUFPTyxJQUFJLEtBQUssZ0JBQVQsRUFBMkI7QUFDOUI7QUFDQSxpQkFBSyxjQUFMO0FBQ0EsaUJBQUssZ0JBQUwsR0FBd0IsS0FBeEI7QUFDSDs7QUFFRCxlQUFPLEtBQVA7QUFDSCxLQTdHTzs7O0FBK0dSOzs7OztBQUtBLGtCQXBIUSw0QkFvSFM7QUFDYixZQUFJLGlCQUFpQixNQUFNLFVBQU4sQ0FBaUIsU0FBUyxRQUFULENBQWtCLE9BQW5DLENBQXJCOztBQUVBLGFBQUssYUFBTCxHQUFxQixJQUFJLEtBQUssTUFBTCxDQUFZLFlBQWhCLENBQTZCLGNBQTdCLEVBQTZDLFNBQVMsU0FBdEQsRUFBaUUsZUFBZSxNQUFoRixDQUFyQjs7QUFFQSxlQUFPLEtBQUssYUFBWjtBQUNILEtBMUhPOzs7QUE0SFI7Ozs7O0FBS0EsZ0JBaklRLDBCQWlJTztBQUNYLFlBQUksZUFBZSxNQUFNLFVBQU4sQ0FBaUIsU0FBUyxRQUFULENBQWtCLEtBQW5DLENBQW5COztBQUVBLGFBQUssV0FBTCxHQUFtQixJQUFJLEtBQUssTUFBTCxDQUFZLFlBQWhCLENBQTZCLFlBQTdCLEVBQTJDLFNBQVMsU0FBcEQsRUFBK0QsYUFBYSxNQUE1RSxDQUFuQjtBQUNBLGFBQUssV0FBTCxDQUFpQixDQUFqQixHQUFxQixTQUFTLHNCQUFULEdBQWtDLFNBQVMsc0JBQTNDLEdBQW9FLE1BQU0sVUFBTixDQUFpQixTQUFTLFFBQVQsQ0FBa0IsT0FBbkMsRUFBNEMsTUFBckk7O0FBRUEsZUFBTyxLQUFLLFdBQVo7QUFDSCxLQXhJTzs7O0FBMElSOzs7O0FBSUEsdUJBOUlRLGlDQThJYztBQUNsQixhQUFLLGNBQUwsR0FBc0IsS0FBSyxlQUEzQjtBQUNBLGFBQUssY0FBTCxHQUFzQixJQUFJLEtBQUssU0FBVCxFQUF0Qjs7QUFFQSxZQUFJLHFCQUFxQixLQUFLLElBQUwsQ0FBVSxTQUFTLFNBQVQsR0FBcUIsU0FBUyxZQUF4QyxDQUF6Qjs7QUFFQSxhQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksa0JBQXBCLEVBQXdDLEdBQXhDLEVBQTZDO0FBQ3pDLGlCQUFLLGFBQUwsQ0FBbUIsQ0FBbkI7QUFDSDs7QUFFRCxlQUFPLEtBQUssY0FBWjtBQUNILEtBekpPOzs7QUEySlI7Ozs7QUFJQSx5QkEvSlEsbUNBK0pnQjtBQUNwQixhQUFLLGNBQUwsR0FBc0IsSUFBSSxLQUFLLFNBQVQsRUFBdEI7QUFDQSxhQUFLLGNBQUwsQ0FBb0IsUUFBcEIsQ0FBNkIsTUFBTSxjQUFOLENBQXFCLEtBQUssS0FBMUIsRUFBaUMsTUFBTSxTQUFOLENBQWdCLEdBQWpELENBQTdCOztBQUVBLGFBQUssY0FBTCxDQUFvQixDQUFwQixHQUF3QixTQUFTLGFBQVQsQ0FBdUIsQ0FBL0M7QUFDQSxhQUFLLGNBQUwsQ0FBb0IsQ0FBcEIsR0FBd0IsTUFBTSxVQUFOLENBQWlCLFNBQVMsUUFBVCxDQUFrQixPQUFuQyxFQUE0QyxNQUE1QyxHQUFxRCxTQUFTLGFBQVQsQ0FBdUIsQ0FBcEc7O0FBRUEsZUFBTyxLQUFLLGNBQVo7QUFDSCxLQXZLTzs7O0FBeUtSOzs7OztBQUtBLGlCQTlLUSx5QkE4S00sTUE5S04sRUE4S2M7QUFDbEI7QUFDQSxZQUFJLE9BQU8sS0FBSyxXQUFMLENBQWlCLEtBQUssb0JBQUwsRUFBakIsRUFBOEMsS0FBSyxjQUFuRCxDQUFYO0FBQ0EsYUFBSyxTQUFMLENBQWUsQ0FBZixHQUFtQixTQUFTLGlCQUFULEdBQTZCLFNBQVMsWUFBVCxHQUF3QixNQUF4RTtBQUNBLGFBQUssY0FBTCxDQUFvQixRQUFwQixDQUE2QixLQUFLLFNBQWxDOztBQUVBLGFBQUssY0FBTCxJQUF1QixDQUFDLENBQXhCO0FBQ0EsYUFBSyxnQkFBTDtBQUNILEtBdExPO0FBd0xSLGVBeExRLHVCQXdMSSxNQXhMSixFQXdMWSxTQXhMWixFQXdMdUI7QUFDM0IsZUFBTyxJQUFJLElBQUosQ0FBUyxNQUFULEVBQWlCLFNBQWpCLENBQVA7QUFDSCxLQTFMTztBQTRMUixrQkE1TFEsNEJBNExTO0FBQ2Isb0JBQVksSUFBWixDQUFpQixZQUFZLGNBQVosQ0FBMkIsS0FBNUM7QUFDQSxhQUFLLEtBQUw7O0FBRUEsWUFBSSxLQUFLLEtBQUwsR0FBYSxLQUFLLFNBQXRCLEVBQWlDLEtBQUssU0FBTCxHQUFpQixLQUFLLEtBQXRCOztBQUVqQztBQUNBLGFBQUssY0FBTCxDQUFvQixXQUFwQixDQUFnQyxLQUFLLGNBQUwsQ0FBb0IsUUFBcEIsQ0FBNkIsQ0FBN0IsQ0FBaEM7O0FBRUEsYUFBSyxjQUFMLENBQW9CLFFBQXBCLENBQTZCLE1BQU0sY0FBTixDQUFxQixLQUFLLEtBQTFCLEVBQWlDLE1BQU0sU0FBTixDQUFnQixHQUFqRCxDQUE3QjtBQUNKLEtBdE1ROzs7QUF3TVI7Ozs7O0FBS0Esd0JBN01RLGtDQTZNZTtBQUNuQixlQUFPLEtBQUssTUFBTCxNQUFpQixTQUFTLGFBQVQsR0FBeUIsU0FBUyxhQUFuRCxJQUFvRSxTQUFTLGFBQXBGO0FBQ0g7QUEvTU8sQ0FBWjs7QUFrTkEsT0FBTyxPQUFQLEdBQWlCLEtBQWpCOzs7OztBQ3pOQSxJQUFNLFdBQVc7QUFDYjs7O0FBR0EsZUFBVyxvQkFKRTs7QUFNYixnQkFBWSxnQkFOQzs7QUFRYjs7O0FBR0EsNEJBQXdCLEdBWFg7O0FBYWI7OztBQUdBLDRCQUF3QixHQWhCWDs7QUFrQmI7OztBQUdBLGVBQVcsQ0FyQkU7O0FBdUJiOzs7QUFHQSxrQkFBYyxDQTFCRDs7QUE0QmI7OztBQUdBLHFCQUFpQixDQS9CSjs7QUFpQ2I7OztBQUdBLGFBQVMsR0FwQ0k7O0FBc0NiOzs7QUFHQSxvQkFBZ0IsR0F6Q0g7O0FBMkNiOzs7QUFHQSxzQkFBa0IsR0E5Q0w7O0FBZ0RiOzs7QUFHQSx3QkFBb0IsR0FuRFA7O0FBcURiOzs7QUFHQSx1QkFBbUI7QUFDZixXQUFHLEdBRFk7QUFFZixXQUFHO0FBRlksS0F4RE47O0FBNkRiOzs7QUFHQSxpQkFBYSxHQWhFQTs7QUFrRWI7OztBQUdBLHVCQUFtQixHQXJFTjs7QUF1RWI7OztBQUdBLGtCQUFjLEdBMUVEOztBQTRFYjs7O0FBR0EsbUJBQWUsR0EvRUY7O0FBaUZiOzs7QUFHQSxtQkFBZSxHQXBGRjs7QUFzRmI7OztBQUdBLG1CQUFlO0FBQ1gsV0FBRyxFQURRO0FBRVgsV0FBRyxFQUZRLENBRUw7QUFGSyxLQXpGRjs7QUE4RmI7OztBQUdBLGlDQUE2QixJQWpHaEI7O0FBbUdiLGNBQVU7QUFDTixzQkFBYyxTQURSO0FBRU4saUJBQVMsVUFGSDtBQUdOLG1CQUFXLGFBSEw7QUFJTixnQkFBUSxVQUpGO0FBS04sbUJBQVcsYUFMTDtBQU1OLHFCQUFhLGVBTlA7QUFPTixpQkFBUyxXQVBIO0FBUU4scUJBQWEsZ0JBUlA7QUFTTixtQkFBVyxZQVRMO0FBVU4saUJBQVMsZ0JBVkg7QUFXTixpQkFBUyxnQkFYSDtBQVlOLGlCQUFTLGdCQVpIO0FBYU4saUJBQVMsZ0JBYkg7QUFjTixpQkFBUyxnQkFkSDtBQWVOLGlCQUFTLGdCQWZIO0FBZ0JOLGlCQUFTLGdCQWhCSDtBQWlCTixpQkFBUyxnQkFqQkg7QUFrQk4saUJBQVMsZ0JBbEJIO0FBbUJOLGlCQUFTLGdCQW5CSDtBQW9CTixtQkFBVyxrQkFwQkw7QUFxQk4sbUJBQVcsa0JBckJMO0FBc0JOLG1CQUFXLGtCQXRCTDtBQXVCTixtQkFBVyxrQkF2Qkw7QUF3Qk4sbUJBQVcsa0JBeEJMO0FBeUJOLG1CQUFXLGtCQXpCTDtBQTBCTixtQkFBVyxrQkExQkw7QUEyQk4sbUJBQVcsa0JBM0JMO0FBNEJOLG1CQUFXLGtCQTVCTDtBQTZCTixtQkFBVztBQTdCTCxLQW5HRzs7QUFtSWIsUUFuSWEsa0JBbUlOO0FBQ0gsYUFBSyxTQUFMLEdBQWlCLE9BQU8sVUFBeEI7QUFDSDtBQXJJWSxDQUFqQjs7QUF3SUEsU0FBUyxJQUFUOztBQUVBLE9BQU8sT0FBUCxHQUFpQixRQUFqQjs7Ozs7QUMxSUEsSUFBSSxXQUFXLFFBQVEsWUFBUixDQUFmOztBQUVBLElBQUksUUFBUTtBQUNSOzs7O0FBSUEsWUFMUSxzQkFLRztBQUNQLFlBQUksV0FBVyxLQUFLLGtCQUFMLENBQXdCLFNBQVMsU0FBakMsRUFBNEMsT0FBTyxXQUFuRCxDQUFmO0FBQ0EsaUJBQVMsSUFBVCxDQUFjLEtBQWQsQ0FBb0IsUUFBcEIsR0FBK0IsVUFBL0I7QUFDQSxpQkFBUyxJQUFULENBQWMsS0FBZCxDQUFvQixPQUFwQixHQUE4QixPQUE5QjtBQUNBLGlCQUFTLGVBQVQsR0FBMkIsUUFBM0I7QUFDQSxpQkFBUyxVQUFULEdBQXNCLElBQXRCOztBQUVBLGlCQUFTLElBQVQsQ0FBYyxXQUFkLENBQTBCLFNBQVMsSUFBbkM7O0FBRUEsZUFBTyxRQUFQO0FBQ0gsS0FmTzs7O0FBaUJSOzs7O0FBSUEsY0FyQlEsc0JBcUJHLFFBckJILEVBcUJhO0FBQ2pCLFlBQUksT0FBTyxRQUFQLEtBQW9CLFVBQXhCLEVBQW9DLE1BQU0sSUFBSSxLQUFKLENBQVUsNkJBQVYsQ0FBTjs7QUFFcEMsYUFBSyxNQUFMLENBQVksR0FBWixDQUFnQixTQUFTLFNBQXpCLEVBQW9DLElBQXBDLENBQXlDLFFBQXpDO0FBQ0g7QUF6Qk8sQ0FBWjs7QUE0QkEsT0FBTyxPQUFQLEdBQWlCLEtBQWpCOzs7OztBQzlCQSxJQUFJLFdBQVcsUUFBUSxZQUFSLENBQWY7O0FBRUEsSUFBSSxRQUFROztBQUVSLGVBQVc7QUFDUCxpQkFBUyxDQURGO0FBRVAsZUFBTztBQUZBLEtBRkg7O0FBT1I7Ozs7O0FBS0EsY0FaUSxzQkFZRyxJQVpILEVBWVM7QUFDYixlQUFPLEtBQUssTUFBTCxDQUFZLFNBQVosQ0FBc0IsU0FBUyxTQUEvQixFQUEwQyxRQUExQyxDQUFtRCxJQUFuRCxDQUFQO0FBQ0gsS0FkTzs7O0FBZ0JSOzs7Ozs7QUFNQSxrQkF0QlEsMEJBc0JPLEtBdEJQLEVBc0JjLElBdEJkLEVBc0JvQjtBQUN4QixZQUFJLGNBQWMsTUFBTSxRQUFOLEVBQWxCOztBQUVBLFlBQUksZ0JBQWdCLFNBQVMsS0FBSyxTQUFMLENBQWUsR0FBeEIsR0FBOEIsTUFBOUIsR0FBdUMsUUFBM0Q7QUFDQSxZQUFJLGdCQUFnQixTQUFTLEtBQUssU0FBTCxDQUFlLEdBQXhCLEdBQThCLEVBQTlCLEdBQW1DLEVBQXZEOztBQUVBLFlBQUksa0JBQWtCLElBQUksS0FBSyxTQUFULEVBQXRCOztBQUVBLGFBQUssSUFBSSxJQUFJLENBQVIsRUFBVyxNQUFNLFlBQVksTUFBbEMsRUFBMEMsSUFBSSxHQUE5QyxFQUFtRCxHQUFuRCxFQUF3RDtBQUNwRCxnQkFBSSxRQUFRLElBQUksS0FBSyxNQUFULENBQWdCLEtBQUssVUFBTCxDQUFnQixTQUFTLFFBQVQsQ0FBa0IsZ0JBQWdCLFlBQVksTUFBWixDQUFtQixDQUFuQixDQUFsQyxDQUFoQixDQUFoQixDQUFaO0FBQ0Esa0JBQU0sQ0FBTixHQUFVLElBQUksYUFBZDtBQUNBLDRCQUFnQixRQUFoQixDQUF5QixLQUF6QjtBQUNIOztBQUVELGVBQU8sZUFBUDtBQUNIO0FBckNPLENBQVo7O0FBd0NBLE9BQU8sT0FBUCxHQUFpQixLQUFqQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJsZXQgZ2FtZSA9IHJlcXVpcmUoJy4vZ2FtZScpO1xyXG5cclxuKGZ1bmN0aW9uKCkge1xyXG4gICAgZ2FtZS5zdGFydCgpO1xyXG59KSgpO1xyXG5cclxuIiwibGV0IHNldHRpbmdzID0gcmVxdWlyZSgnLi9zZXR0aW5ncycpO1xyXG5sZXQgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcblxyXG5jbGFzcyBQaXBlIHtcclxuICAgIGNvbnN0cnVjdG9yKGhlaWdodCwgZmFjaW5nKSB7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5mYWNpbmcgPSBmYWNpbmc7XHJcblxyXG4gICAgICAgIHRoaXMucGlwZVRleHR1cmUgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLlBJUEUpO1xyXG4gICAgICAgIHRoaXMucGlwZVRvcFRleHR1cmUgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLlBJUEVfVVApO1xyXG4gICAgICAgIHRoaXMucGlwZUJvdHRvbVRleHR1cmUgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLlBJUEVfRE9XTik7XHJcblxyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xyXG5cclxuICAgICAgICBsZXQgdG90YWxQbGF5SGVpZ2h0ID0gc2V0dGluZ3MucGxheWFibGVBcmVhQWJvdmVXYXRlciArIHNldHRpbmdzLnBsYXlhYmxlQXJlYUJlbG93V2F0ZXI7XHJcblxyXG4gICAgICAgIGlmIChmYWNpbmcgPT09IFBpcGUuVVApIHtcclxuICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX2NyZWF0ZVVwRmFjaW5nUGlwZShoZWlnaHQpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGZhY2luZyA9PT0gUGlwZS5ET1dOKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9jcmVhdGVEb3duRmFjaW5nUGlwZShoZWlnaHQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgc3BhY2UgZm9yIHBpcGUgaW4gb3Bwb3NpdGUgZGlyZWN0aW9uIHRvIGNvbXBsZXRlIHRoZSBnYXBcclxuICAgICAgICBpZiAoaGVpZ2h0ICsgc2V0dGluZ3MucGlwZUdhcFNpemUgPCB0b3RhbFBsYXlIZWlnaHQpIHtcclxuICAgICAgICAgICAgLy8gV2UgY2FuIGZpdCBhbm90aGVyIHBpcGUgb3Bwb3NpdGUgdG8gaXRcclxuICAgICAgICAgICAgbGV0IG9wcG9zaXRlUGlwZUhlaWdodCA9IHRvdGFsUGxheUhlaWdodCAtIGhlaWdodCAtIHNldHRpbmdzLnBpcGVHYXBTaXplO1xyXG4gICAgICAgICAgICBpZiAoZmFjaW5nID09PSBQaXBlLlVQKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX2NyZWF0ZURvd25GYWNpbmdQaXBlKG9wcG9zaXRlUGlwZUhlaWdodCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZhY2luZyA9PT0gUGlwZS5ET1dOKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX2NyZWF0ZVVwRmFjaW5nUGlwZShvcHBvc2l0ZVBpcGVIZWlnaHQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBjZWlsaW5nU3ByaXRlSGVpZ2h0ID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5DRUlMSU5HKS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIC8vIFN0b3JlIHRoZSBpbmZvcm1hdGlvbiBvZiB0aGUgZ2FwIHBvc2l0aW9uIGluIHRoZSBjb250YWluZXIgb2JqZWN0IGZvciBlYXNpZXIgY29sbGlzaW9uIGNoZWNrc1xyXG4gICAgICAgIGxldCB0b3AgPSAoZmFjaW5nID09PSBQaXBlLlVQID8gdG90YWxQbGF5SGVpZ2h0IC0gaGVpZ2h0IC0gc2V0dGluZ3MucGlwZUdhcFNpemUgOiBoZWlnaHQpICsgY2VpbGluZ1Nwcml0ZUhlaWdodDtcclxuICAgICAgICBsZXQgYm90dG9tID0gKGZhY2luZyA9PT0gUGlwZS5VUCA/IHRvdGFsUGxheUhlaWdodCAtIGhlaWdodCA6IGhlaWdodCArIHNldHRpbmdzLnBpcGVHYXBTaXplKSArIGNlaWxpbmdTcHJpdGVIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuZ2FwID0geyB0b3AsIGJvdHRvbSB9XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZVVwRmFjaW5nUGlwZShoZWlnaHQpIHtcclxuICAgICAgICBsZXQgY29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIGxldCBwaXBlVG9wID0gbmV3IFBJWEkuU3ByaXRlKHRoaXMucGlwZVRvcFRleHR1cmUpO1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDaGlsZChwaXBlVG9wKTtcclxuXHJcbiAgICAgICAgbGV0IHBpcGVQYXJ0SGVpZ2h0ID0gaGVpZ2h0IC0gdGhpcy5waXBlVG9wVGV4dHVyZS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGxldCBwaXBlID0gbmV3IFBJWEkuZXh0cmFzLlRpbGluZ1Nwcml0ZSh0aGlzLnBpcGVUZXh0dXJlLCB0aGlzLnBpcGVUZXh0dXJlLndpZHRoLCBwaXBlUGFydEhlaWdodCk7XHJcbiAgICAgICAgcGlwZS55ID0gdGhpcy5waXBlVG9wVGV4dHVyZS5oZWlnaHQ7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZENoaWxkKHBpcGUpO1xyXG5cclxuICAgICAgICAvLyBQbGFjZSBwaXBlIG9uIHRoZSBib3R0b21cclxuICAgICAgICBjb250YWluZXIueSA9IHNldHRpbmdzLnBsYXlhYmxlQXJlYUFib3ZlV2F0ZXIgKyBzZXR0aW5ncy5wbGF5YWJsZUFyZWFCZWxvd1dhdGVyIC0gaGVpZ2h0ICsgdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5DRUlMSU5HKS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZURvd25GYWNpbmdQaXBlKGhlaWdodCkge1xyXG4gICAgICAgIGxldCBjb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuXHJcbiAgICAgICAgbGV0IHBpcGVQYXJ0SGVpZ2h0ID0gaGVpZ2h0IC0gdGhpcy5waXBlQm90dG9tVGV4dHVyZS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGxldCBwaXBlID0gbmV3IFBJWEkuZXh0cmFzLlRpbGluZ1Nwcml0ZSh0aGlzLnBpcGVUZXh0dXJlLCB0aGlzLnBpcGVUZXh0dXJlLndpZHRoLCBwaXBlUGFydEhlaWdodCk7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZENoaWxkKHBpcGUpO1xyXG5cclxuICAgICAgICBsZXQgcGlwZUJvdHRvbSA9IG5ldyBQSVhJLlNwcml0ZSh0aGlzLnBpcGVCb3R0b21UZXh0dXJlKTtcclxuICAgICAgICBwaXBlQm90dG9tLnkgPSBwaXBlUGFydEhlaWdodDtcclxuICAgICAgICBjb250YWluZXIuYWRkQ2hpbGQocGlwZUJvdHRvbSk7XHJcblxyXG4gICAgICAgIC8vIFdlIGNhbiBwbGFjZSBpdCBhZ2FpbnN0IHRoZSBjZWlsaW5nXHJcbiAgICAgICAgY29udGFpbmVyLnkgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLkNFSUxJTkcpLmhlaWdodDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY29udGFpbmVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGNvbnRhaW5lcihjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldCB0ZXh0dXJlV2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuUElQRSkud2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldCBVUCgpIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IERPV04oKSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBpcGU7XHJcbiIsImxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MnKTtcclxuXHJcbmxldCBhdWRpb1BsYXllciA9IHtcclxuXHJcbiAgICBhdWRpb0ZyYWdtZW50czoge1xyXG4gICAgICAgICdGTEFQJzogJ3NmeF93aW5nLm9nZycsXHJcbiAgICAgICAgJ0hJVCc6ICdzZnhfaGl0Lm9nZycsXHJcbiAgICAgICAgJ0RJRSc6ICdzZnhfZGllLm9nZycsXHJcbiAgICAgICAgJ1BPSU5UJzogJ3NmeF9wb2ludC5vZ2cnLFxyXG4gICAgICAgICdTV0lNJzogJ3NmeF9ibHViLm9nZycsXHJcbiAgICAgICAgJ0VOVEVSX1dBVEVSJzogJ3NmeF93YXRlci1lbnRlci5vZ2cnLFxyXG4gICAgICAgICdFWElUX1dBVEVSJzogJ3NmeF93YXRlci1leGl0Lm9nZycsXHJcbiAgICB9LFxyXG5cclxuICAgIF9hdWRpbzogW10sXHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICAvLyBUb2RvOiBNYXliZSB3ZSBuZWVkIHRvIHdhaXQgd2l0aCBzdGFydGluZyB0aGUgZ2FtZSB1bnRpbCB0aGVzZSBoYXZlIGJlZW4gbG9hZGVkXHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMuYXVkaW9GcmFnbWVudHMpIHtcclxuICAgICAgICAgICAgdGhpcy5fYXVkaW9bdGhpcy5hdWRpb0ZyYWdtZW50c1trZXldXSA9IG5ldyBBdWRpbyhzZXR0aW5ncy5zb3VuZHNQYXRoICsgdGhpcy5hdWRpb0ZyYWdtZW50c1trZXldKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHBsYXkoYXVkaW9GcmFnbWVudCwgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAodGhpcy5fYXVkaW9bYXVkaW9GcmFnbWVudF0uY3VycmVudFRpbWUgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2F1ZGlvW2F1ZGlvRnJhZ21lbnRdLmN1cnJlbnRUaW1lID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2F1ZGlvW2F1ZGlvRnJhZ21lbnRdLnBsYXkoKTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgc2V0VGltZW91dChjYWxsYmFjaywgdGhpcy5fYXVkaW9bYXVkaW9GcmFnbWVudF0uZHVyYXRpb24gKiAxMDAwKTtcclxuICAgIH1cclxufTtcclxuXHJcbmF1ZGlvUGxheWVyLmluaXQoKTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGF1ZGlvUGxheWVyO1xyXG4iLCJsZXQgc2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldHRpbmdzLmpzJyk7XHJcbmxldCB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMuanMnKTtcclxuXHJcbnZhciBiYWNrZ3JvdW5kID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY29udGFpbmVyIHRoYXQgd2lsbCBjb250YWluIGFsbCBiYWNrZ3JvdW5kIHRpbGVzIGxpbmVkIHVwXHJcbiAgICAgKi9cclxuICAgIGJhY2tncm91bmRTcHJpdGU6IHVuZGVmaW5lZCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgdGhlIGJhY2tncm91bmRcclxuICAgICAqIEByZXR1cm5zIHtQSVhJLlNwcml0ZX1cclxuICAgICAqL1xyXG4gICAgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICBsZXQgc2t5VGlsZVRleHR1cmUgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLkJBQ0tHUk9VTkQpO1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZFNwcml0ZSA9IG5ldyBQSVhJLmV4dHJhcy5UaWxpbmdTcHJpdGUoc2t5VGlsZVRleHR1cmUsIHNldHRpbmdzLmdhbWVXaWR0aCwgc2t5VGlsZVRleHR1cmUuaGVpZ2h0KTtcclxuICAgICAgICB0aGlzLmJhY2tncm91bmRTcHJpdGUueSA9IHRoaXMuX2dldEJhY2tncm91bmRTcHJpdGVZUG9zaXRpb24oc2t5VGlsZVRleHR1cmUuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFja2dyb3VuZFNwcml0ZTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgbG9vcCBvZiB0aGUgYmFja2dyb3VuZFxyXG4gICAgICovXHJcbiAgICBsb29wKCkge1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZFNwcml0ZS50aWxlUG9zaXRpb24ueCArPSAtc2V0dGluZ3MuYmFja2dyb3VuZFNwZWVkO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgeSBwb3NpdGlvbiBmb3IgdGhlIGJhY2tncm91bmQgc3ByaXRlXHJcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2dldEJhY2tncm91bmRTcHJpdGVZUG9zaXRpb24oaGVpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIHNldHRpbmdzLnBsYXlhYmxlQXJlYUFib3ZlV2F0ZXIgLSBoZWlnaHQgKyB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLkNFSUxJTkcpLmhlaWdodDtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYmFja2dyb3VuZDtcclxuIiwibGV0IHNldHRpbmdzID0gcmVxdWlyZSgnLi9zZXR0aW5ncycpO1xyXG5sZXQgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcblxyXG5sZXQgYXVkaW9QbGF5ZXIgPSByZXF1aXJlKCcuL2F1ZGlvUGxheWVyJyk7XHJcblxyXG5sZXQgYmlyZCA9IHtcclxuICAgIHNwcml0ZTogdW5kZWZpbmVkLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHZlbG9jaXR5IG9mIHRoZSBiaXJkXHJcbiAgICAgKi9cclxuICAgIHZlbG9jaXR5OiAwLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQm9vbCBpZiB0aGUgYmlyZCBpcyBiZWxvdyB0aGUgd2F0ZXJcclxuICAgICAqL1xyXG4gICAgaXNCZWxvd1dhdGVyOiBmYWxzZSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhbW91bnQgb2YgZnJhbWVzIHRoZSBhbmltYXRpb24gaGFzXHJcbiAgICAgKi9cclxuICAgIGFuaW1hdGlvbkZyYW1lczogNCxcclxuXHJcbiAgICBiaXJkVGV4dHVyZU5hbWVQcmVmaXg6ICdiaXJkXycsXHJcbiAgICBiaXJkVGV4dHVyZU5hbWVTdWZmaXg6ICcucG5nJyxcclxuXHJcbiAgICBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIHRoaXMuc3ByaXRlID0gdGhpcy5fc2V0dXBCaXJkU3ByaXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlO1xyXG4gICAgfSxcclxuXHJcbiAgICBsb29wKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQmVsb3dXYXRlcikge1xyXG4gICAgICAgICAgICB0aGlzLnZlbG9jaXR5IC09IHNldHRpbmdzLndhdGVyUHVzaEZvcmNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudmVsb2NpdHkgKz0gc2V0dGluZ3MuZ3Jhdml0eTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3ByaXRlLnkgKz0gdGhpcy52ZWxvY2l0eTtcclxuICAgICAgICB0aGlzLnNwcml0ZS5yb3RhdGlvbiA9IE1hdGguYXRhbjIodGhpcy52ZWxvY2l0eSwgc2V0dGluZ3MuZm9yd2FyZFNwZWVkKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGbGFwIGJlaGF2aW91ciwgaXMgZGlmZmVyZW50IGJhc2VkIG9uIGJlaW5nIGJlbG93IG9yIGFib3ZlIHdhdGVyXHJcbiAgICAgKi9cclxuICAgIGZsYXAoKSB7XHJcbiAgICAgICAgLy8gU2V0dGluZyB0byBlYXNpbHkgdGVzdCBkaWZmZXJlbnQgZmxhcCBiZWhhdmlvdXJcclxuICAgICAgICBpZiAoc2V0dGluZ3Muc2hvdWxkQmlyZEZsYXBSZXNldFZlbG9jaXR5KSB7XHJcbiAgICAgICAgICAgIHRoaXMudmVsb2NpdHkgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNCZWxvd1dhdGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N3aW0oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9mbGFwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0IHRoZSBwb3NpdGlvbiBhbmQgdmVsb2NpdHkgb2YgdGhlIGJpcmRcclxuICAgICAqL1xyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5zcHJpdGUueCA9IHNldHRpbmdzLmJpcmRTdGFydFBvc2l0aW9uLng7XHJcbiAgICAgICAgdGhpcy5zcHJpdGUueSA9IHNldHRpbmdzLmJpcmRTdGFydFBvc2l0aW9uLnk7XHJcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IDA7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2ltcGxlIGhlbHBlciBmdW5jdGlvbiB0byBnZXQgdGhlIHRvcCBwb3NpdGlvbiBvZiB0aGUgYmlyZFxyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgZ2V0VG9wKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZS55IC0gdGhpcy5zcHJpdGUuaGVpZ2h0IC8gMjtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaW1wbGUgaGVscGVyIGZ1bmN0aW9uIHRvIGdldCB0aGUgYm90dG9tIHBvc2l0aW9uIG9mIHRoZSBiaXJkXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBnZXRCb3R0b20oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlLnkgKyB0aGlzLnNwcml0ZS5oZWlnaHQgLyAyO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNpbXBsZSBoZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSByaWdodCBwb3NpdGlvbiBvZiB0aGUgYmlyZFxyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgZ2V0UmlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlLnggKyB0aGlzLnNwcml0ZS53aWR0aCAvIDI7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2ltcGxlIGhlbHBlciBmdW5jdGlvbiB0byBnZXQgdGhlIGxlZnQgcG9zaXRpb24gb2YgdGhlIGJpcmRcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIGdldExlZnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlLnggLSB0aGlzLnNwcml0ZS53aWR0aCAvIDI7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hlbiB0aGUgYmlyZCBlbnRlcnMgdGhlIHdhdGVyXHJcbiAgICAgKi9cclxuICAgIGVudGVyV2F0ZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNCZWxvd1dhdGVyKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5pc0JlbG93V2F0ZXIgPSB0cnVlO1xyXG5cclxuICAgICAgICBhdWRpb1BsYXllci5wbGF5KGF1ZGlvUGxheWVyLmF1ZGlvRnJhZ21lbnRzLkVOVEVSX1dBVEVSKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGVuIHRoZSBiaXJkIGxlYXZlcyB0aGUgd2F0ZXJcclxuICAgICAqL1xyXG4gICAgbGVhdmVXYXRlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNCZWxvd1dhdGVyKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5pc0JlbG93V2F0ZXIgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgYXVkaW9QbGF5ZXIucGxheShhdWRpb1BsYXllci5hdWRpb0ZyYWdtZW50cy5FWElUX1dBVEVSKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXR1cCB0aGUgYmlyZCBzcHJpdGUgd2l0aCBpdHMgYW5pbWF0aW9uc1xyXG4gICAgICogQHJldHVybnMge0FuaW1hdGVkU3ByaXRlfCp9XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfc2V0dXBCaXJkU3ByaXRlKCkge1xyXG4gICAgICAgIGxldCBzcHJpdGVGcmFtZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYW5pbWF0aW9uRnJhbWVzOyBpKyspIHtcclxuICAgICAgICAgICAgc3ByaXRlRnJhbWVzLnB1c2godXRpbHMuZ2V0VGV4dHVyZSh0aGlzLmJpcmRUZXh0dXJlTmFtZVByZWZpeCArIGkgKyAgdGhpcy5iaXJkVGV4dHVyZU5hbWVTdWZmaXgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzcHJpdGUgPSBuZXcgUElYSS5leHRyYXMuQW5pbWF0ZWRTcHJpdGUoc3ByaXRlRnJhbWVzKTtcclxuXHJcbiAgICAgICAgc3ByaXRlLmFuaW1hdGlvblNwZWVkID0gc2V0dGluZ3MuYmlyZEFuaW1hdGlvblNwZWVkO1xyXG4gICAgICAgIHNwcml0ZS5wbGF5KCk7XHJcblxyXG4gICAgICAgIHNwcml0ZS5hbmNob3IueCA9IDAuNTtcclxuICAgICAgICBzcHJpdGUuYW5jaG9yLnkgPSAwLjU7XHJcblxyXG4gICAgICAgIHNwcml0ZS54ID0gc2V0dGluZ3MuYmlyZFN0YXJ0UG9zaXRpb24ueDtcclxuICAgICAgICBzcHJpdGUueSA9IHNldHRpbmdzLmJpcmRTdGFydFBvc2l0aW9uLnk7XHJcblxyXG4gICAgICAgIHJldHVybiBzcHJpdGU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGFib3ZlIHdhdGVyIGZsYXAgYmVoYXZpb3VyXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfZmxhcCgpIHtcclxuICAgICAgICBhdWRpb1BsYXllci5wbGF5KGF1ZGlvUGxheWVyLmF1ZGlvRnJhZ21lbnRzLkZMQVApO1xyXG5cclxuICAgICAgICB0aGlzLnZlbG9jaXR5IC09IHNldHRpbmdzLmJpcmRGbGFwVmVsb2NpdHk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGJlbG93IHdhdGVyIGZsYXAgKGFrYSBzd2ltKSBiZWhhdmlvdXJcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9zd2ltKCkge1xyXG4gICAgICAgIGF1ZGlvUGxheWVyLnBsYXkoYXVkaW9QbGF5ZXIuYXVkaW9GcmFnbWVudHMuU1dJTSk7XHJcblxyXG4gICAgICAgIHRoaXMudmVsb2NpdHkgKz0gc2V0dGluZ3MuYmlyZEZsYXBWZWxvY2l0eTtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYmlyZDtcclxuIiwibGV0IHNldHVwID0gcmVxdWlyZSgnLi9zZXR1cCcpO1xyXG5cclxubGV0IGdhbWVPdmVyU2NyZWVuID0gcmVxdWlyZSgnLi9nYW1lT3ZlclNjcmVlbicpO1xyXG5sZXQgYXVkaW9QbGF5ZXIgPSByZXF1aXJlKCcuL2F1ZGlvUGxheWVyJyk7XHJcbmxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MnKTtcclxubGV0IHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxubGV0IGJhY2tncm91bmQgPSByZXF1aXJlKCcuL2JhY2tncm91bmQnKTtcclxubGV0IGxldmVsID0gcmVxdWlyZSgnLi9sZXZlbCcpO1xyXG5sZXQgYmlyZCA9IHJlcXVpcmUoJy4vYmlyZCcpO1xyXG5cclxubGV0IGdhbWUgPSB7XHJcbiAgICByZW5kZXJlcjogdW5kZWZpbmVkLFxyXG4gICAgc3RhZ2U6IHVuZGVmaW5lZCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhlIGdhbWUgKGxvb3ApIGhhcyBzdG9wcGVkIG9yIG5vdFxyXG4gICAgICovXHJcbiAgICBoYXNTdG9wcGVkOiBmYWxzZSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0IHRoZSBnYW1lXHJcbiAgICAgKi9cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBzZXR1cC5yZW5kZXJlcigpO1xyXG4gICAgICAgIHNldHVwLmxvYWRBc3NldHModGhpcy5pbml0aWFsaXplLmJpbmQodGhpcykpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYWxsIHJlcXVpcmVkIHBhcnRzIG9mIHRoZSBnYW1lXHJcbiAgICAgKi9cclxuICAgIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgdGhpcy5zdGFnZSA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YWdlLmFkZENoaWxkKGJhY2tncm91bmQuaW5pdGlhbGl6ZSgpKTtcclxuICAgICAgICB0aGlzLnN0YWdlLmFkZENoaWxkKGxldmVsLmluaXRpYWxpemUoKSk7XHJcbiAgICAgICAgdGhpcy5zdGFnZS5hZGRDaGlsZChiaXJkLmluaXRpYWxpemUoKSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhZ2UuYWRkQ2hpbGQodGhpcy5fZ2V0V2F0ZXJTcHJpdGUoKSk7XHJcblxyXG4gICAgICAgIGxldCBvblJlc3RhcnRDbGljayA9IHRoaXMuX2NsaWNrUmVzdGFydC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc3RhZ2UuYWRkQ2hpbGQoZ2FtZU92ZXJTY3JlZW4uaW5pdGlhbGl6ZShvblJlc3RhcnRDbGljaykpO1xyXG5cclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnN0YWdlKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRzKCk7XHJcblxyXG4gICAgICAgIHRoaXMubG9vcCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBnYW1lIGxvb3BcclxuICAgICAqL1xyXG4gICAgbG9vcCgpIHtcclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5sb29wLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICAvLyBUaGlzIGNhdXNlcyB0aGUgZ2FtZSBsb29wIHRvIGZyZWV6ZS4gSXMgdXNlZCB3aGVuIHRoZSBwbGF5ZXJzIGhpdHMgc29tZXRoaW5nIGFuZCBhIG1lbnUgaXMgc2hvd24gdG8gX3Jlc3RhcnRcclxuICAgICAgICBpZiAodGhpcy5oYXNTdG9wcGVkKSByZXR1cm47XHJcblxyXG4gICAgICAgIGJhY2tncm91bmQubG9vcCgpO1xyXG4gICAgICAgIGxldmVsLmxvb3AoKTtcclxuICAgICAgICBiaXJkLmxvb3AoKTtcclxuXHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ29sbGlzaW9uKCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMuc3RhZ2UpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyaWdnZXIgZ2FtZSBvdmVyIGhhcHBlbmluZ1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2dhbWVPdmVyKCkge1xyXG4gICAgICAgIHRoaXMuX3N0b3AoKTtcclxuICAgICAgICB0aGlzLl9wbGF5RGllQXVkaW8oKTtcclxuXHJcbiAgICAgICAgLy8gU2hvdyBnYW1lIG92ZXIgc2NyZWVuXHJcbiAgICAgICAgZ2FtZU92ZXJTY3JlZW4udXBkYXRlU2NvcmVzKGxldmVsLnNjb3JlLCBsZXZlbC5iZXN0U2NvcmUpO1xyXG4gICAgICAgIGdhbWVPdmVyU2NyZWVuLnNob3coKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBfcmVzdGFydCBpcyBjbGlja2VkIGZyb20gdGhlIGdhbWUgb3ZlciBzY3JlZW5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9jbGlja1Jlc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVzdGFydCgpO1xyXG4gICAgICAgIGdhbWVPdmVyU2NyZWVuLmhpZGUoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wIHRoZSBnYW1lXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfc3RvcCgpIHtcclxuICAgICAgICB0aGlzLmhhc1N0b3BwZWQgPSB0cnVlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnRpbnVlIHRoZSBnYW1lIGFmdGVyIHN0b3BwaW5nXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfcmVzdGFydCgpIHtcclxuICAgICAgICBsZXZlbC5yZXNldCgpO1xyXG4gICAgICAgIGJpcmQucmVzZXQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5oYXNTdG9wcGVkID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIGNvbGxpc2lvbiBiZXR3ZWVuIHRoZSBiaXJkIGFuZCAnb2JzdGFjbGVzJ1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2hhbmRsZUNvbGxpc2lvbigpIHtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgYmlyZCBpcyBiZWxvdyBvciB1bmRlcm5lYXRoIHRoZSB3YXRlclxyXG4gICAgICAgIGlmIChiaXJkLmdldFRvcCgpIDwgbGV2ZWwuZ2V0V2F0ZXJMZXZlbCgpICYmIGJpcmQuaXNCZWxvd1dhdGVyKSB7XHJcbiAgICAgICAgICAgIGJpcmQubGVhdmVXYXRlcigpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYmlyZC5nZXRUb3AoKSA+PSBsZXZlbC5nZXRXYXRlckxldmVsKCkgJiYgIWJpcmQuaXNCZWxvd1dhdGVyKSB7XHJcbiAgICAgICAgICAgIGJpcmQuZW50ZXJXYXRlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2VpbGluZyBjb2xsaXNpb25cclxuICAgICAgICBpZiAoYmlyZC5nZXRUb3AoKSA8PSBsZXZlbC5jZWlsaW5nU3ByaXRlLnkgKyBsZXZlbC5jZWlsaW5nU3ByaXRlLmhlaWdodCkge1xyXG4gICAgICAgICAgICB0aGlzLl9nYW1lT3ZlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmxvb3IgY29sbGlzaW9uXHJcbiAgICAgICAgaWYgKGJpcmQuZ2V0Qm90dG9tKCkgPj0gbGV2ZWwuY2VpbGluZ1Nwcml0ZS55ICsgbGV2ZWwuY2VpbGluZ1Nwcml0ZS5oZWlnaHQgKyBzZXR0aW5ncy5wbGF5YWJsZUFyZWFBYm92ZVdhdGVyICsgc2V0dGluZ3MucGxheWFibGVBcmVhQmVsb3dXYXRlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9nYW1lT3ZlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGxldmVsLnBpcGVDb2xsaXNpb24oYmlyZCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fZ2FtZU92ZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGxheSB0aGUgYXVkaW8gZm9yIHdoZW4gdGhlIHBsYXllciBkaWVzXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfcGxheURpZUF1ZGlvKCkge1xyXG4gICAgICAgIGF1ZGlvUGxheWVyLnBsYXkoYXVkaW9QbGF5ZXIuYXVkaW9GcmFnbWVudHMuSElULFxyXG4gICAgICAgICAgICBhdWRpb1BsYXllci5wbGF5LmJpbmQoYXVkaW9QbGF5ZXIsIGF1ZGlvUGxheWVyLmF1ZGlvRnJhZ21lbnRzLkRJRSlcclxuICAgICAgICApO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgcmVxdWlyZWQgZXZlbnRzIGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBnYW1lXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfc2V0RXZlbnRzKCkge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSAhPSAzMikgcmV0dXJuOyAvLyBOb3Qgc3BhY2ViYXJcclxuICAgICAgICAgICAgaWYgKHRoaXMuaGFzU3RvcHBlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2xpY2tSZXN0YXJ0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYmlyZC5mbGFwKCk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICBpZiAoXCJvbnRvdWNoc3RhcnRcIiBpbiB3aW5kb3cpIHtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1N0b3BwZWQpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGJpcmQuZmxhcCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNTdG9wcGVkKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBiaXJkLmZsYXAoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhbmQgZ2V0IHRoZSB0aWxlZCBzcHJpdGUgZm9yIHRoZSB3YXRlclxyXG4gICAgICogQHJldHVybnMge1RpbGluZ1Nwcml0ZXxQSVhJLlRpbGluZ1Nwcml0ZXx7ZW51bWVyYWJsZSwgZ2V0fXwqfVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2dldFdhdGVyU3ByaXRlKCkge1xyXG4gICAgICAgIGxldCB3YXRlclRleHR1cmUgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLldBVEVSKTtcclxuICAgICAgICBsZXQgd2F0ZXJTcHJpdGUgPSBuZXcgUElYSS5leHRyYXMuVGlsaW5nU3ByaXRlKHdhdGVyVGV4dHVyZSwgc2V0dGluZ3MuZ2FtZVdpZHRoLCBzZXR0aW5ncy5wbGF5YWJsZUFyZWFCZWxvd1dhdGVyKTtcclxuICAgICAgICB3YXRlclNwcml0ZS55ID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5DRUlMSU5HKS5oZWlnaHQgKyBzZXR0aW5ncy5wbGF5YWJsZUFyZWFBYm92ZVdhdGVyO1xyXG5cclxuICAgICAgICByZXR1cm4gd2F0ZXJTcHJpdGU7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdhbWU7XHJcbiIsImxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MnKTtcclxubGV0IHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxubGV0IGdhbWVPdmVyU2NyZWVuID0ge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNhbGxiYWNrIHdoZW4gdGhlIF9yZXN0YXJ0IGJ1dHRvbiBpcyBjbGlja2VkXHJcbiAgICAgKi9cclxuICAgIG9uQ2xpY2tSZXN0YXJ0OiB1bmRlZmluZWQsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY29udGFpbmVyIHRoYXQgd2lsbCBob2xkIHRoZSBnYW1lIG92ZXIgY29udGFpbmVyXHJcbiAgICAgKi9cclxuICAgIGNvbnRhaW5lcjogdW5kZWZpbmVkLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNvbnRhaW5lciB0aGF0IHdpbGwgaG9sZCB0aGUgdGhlIHNjb3JlcyBhbmQgdGhlIGdhbWUgb3ZlciBzcHJpdGVcclxuICAgICAqL1xyXG4gICAgZ2FtZU92ZXJDb250YWluZXI6IHVuZGVmaW5lZCxcclxuXHJcbiAgICBzY29yZVlQb3NpdGlvbjogOTMsXHJcbiAgICBiZXN0U2NvcmVZUG9zaXRpb246IDEzNSxcclxuICAgIHJlc3RhcnRCdXR0b25ZUG9zaXRpb246IDE5MCxcclxuICAgIGdhbWVPdmVyQ29udGFpbmVyWFBvc2l0aW9uOiAxNTAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCZWNhdXNlIHRoZSBzY29yZSBib3ggaXMgbm90IHBlcmZlY3RseSBjZW50ZXJlZCB3ZSBhZGQgc29tZSBvZmZzZXRcclxuICAgICAqL1xyXG4gICAgZWxlbWVudHNYT2Zmc2V0OiAyLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIHRoZSBnYW1lIG92ZXIgc2NyZWVuLCBzaG91bGQgb25seSBiZSBjYWxsZWQgb25jZVxyXG4gICAgICovXHJcbiAgICBpbml0aWFsaXplKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0UmVzdGFydENhbGxiYWNrKGNhbGxiYWNrKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIueSA9IHRoaXMuX2dldENvbnRhaW5lcllQb3NpdGlvbigpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnggPSB0aGlzLmdhbWVPdmVyQ29udGFpbmVyWFBvc2l0aW9uO1xyXG5cclxuICAgICAgICB0aGlzLmdhbWVPdmVyQ29udGFpbmVyID0gbmV3IFBJWEkuU3ByaXRlKHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuR0FNRV9PVkVSKSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3JlbmRlclNjb3JlcygwLCAwKTtcclxuXHJcbiAgICAgICAgbGV0IHJlc3RhcnRCdXR0b24gPSBuZXcgUElYSS5TcHJpdGUodXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5SRVNUQVJUKSk7XHJcbiAgICAgICAgcmVzdGFydEJ1dHRvbi54ID0gdGhpcy5nYW1lT3ZlckNvbnRhaW5lci53aWR0aCAvIDIgLSByZXN0YXJ0QnV0dG9uLndpZHRoIC8gMiArIHRoaXMuZWxlbWVudHNYT2Zmc2V0O1xyXG4gICAgICAgIHJlc3RhcnRCdXR0b24ueSA9IHRoaXMucmVzdGFydEJ1dHRvbllQb3NpdGlvbjtcclxuICAgICAgICByZXN0YXJ0QnV0dG9uLmludGVyYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICByZXN0YXJ0QnV0dG9uLmJ1dHRvbk1vZGUgPSB0cnVlO1xyXG4gICAgICAgIHJlc3RhcnRCdXR0b24uZGVmYXVsdEN1cnNvciA9ICdwb2ludGVyJztcclxuXHJcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5hZGRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMub25DbGlja1Jlc3RhcnQpO1xyXG5cclxuICAgICAgICBpZiAoXCJvbnRvdWNoc3RhcnRcIiBpbiB3aW5kb3cpIHtcclxuICAgICAgICAgICAgcmVzdGFydEJ1dHRvbi5hZGRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5vbkNsaWNrUmVzdGFydCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmdhbWVPdmVyQ29udGFpbmVyLmFkZENoaWxkKHJlc3RhcnRCdXR0b24pO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLmdhbWVPdmVyQ29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgdGhpcy5oaWRlKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIGdhbWUgb3ZlciBzY3JlZW4gd2l0aCB0aGUgbmV3IHNjb3Jlc1xyXG4gICAgICovXHJcbiAgICB1cGRhdGVTY29yZXMoc2NvcmUsIGJlc3RTY29yZSkge1xyXG4gICAgICAgIHRoaXMuX2NsZWFyU2NvcmVzKCk7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyU2NvcmVzKHNjb3JlLCBiZXN0U2NvcmUpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEhpZGUgdGhlIGdhbWUgb3ZlciBzY3JlZW5cclxuICAgICAqL1xyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICB0aGlzLmdhbWVPdmVyQ29udGFpbmVyLnZpc2libGUgPSBmYWxzZTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG93IHRoZSBnYW1lIG92ZXIgc2NyZWVuXHJcbiAgICAgKi9cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lT3ZlckNvbnRhaW5lci52aXNpYmxlID0gdHJ1ZTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGNhbGxiYWNrIGZvciB3aGVuIHRoZSBfcmVzdGFydCBidXR0b24gaGFzIGJlZW4gcHJlc3NlZFxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfc2V0UmVzdGFydENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IEVycm9yKCdTdXBwbGllZCBjYWxsYmFjayBpcyBub3QgYSBmdW5jdGlvbicpO1xyXG5cclxuICAgICAgICB0aGlzLm9uQ2xpY2tSZXN0YXJ0ID0gY2FsbGJhY2s7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHNjb3JlXHJcbiAgICAgKiBAcGFyYW0gYmVzdFNjb3JlXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfcmVuZGVyU2NvcmVzKHNjb3JlLCBiZXN0U2NvcmUpIHtcclxuICAgICAgICB0aGlzLnNjb3JlU3ByaXRlID0gdXRpbHMuc2NvcmVUb1Nwcml0ZXMoc2NvcmUsIHV0aWxzLnNjb3JlU2l6ZS5TTUFMTCk7XHJcbiAgICAgICAgdGhpcy5zY29yZVNwcml0ZS54ID0gdGhpcy5nYW1lT3ZlckNvbnRhaW5lci53aWR0aCAvIDIgLSB0aGlzLnNjb3JlU3ByaXRlLndpZHRoIC8gMiArIHRoaXMuZWxlbWVudHNYT2Zmc2V0O1xyXG4gICAgICAgIHRoaXMuc2NvcmVTcHJpdGUueSA9IHRoaXMuc2NvcmVZUG9zaXRpb247XHJcblxyXG4gICAgICAgIHRoaXMuYmVzdFNjb3JlU3ByaXRlID0gdXRpbHMuc2NvcmVUb1Nwcml0ZXMoYmVzdFNjb3JlLCB1dGlscy5zY29yZVNpemUuU01BTEwpO1xyXG4gICAgICAgIHRoaXMuYmVzdFNjb3JlU3ByaXRlLnggPSB0aGlzLmdhbWVPdmVyQ29udGFpbmVyLndpZHRoIC8gMiAtIHRoaXMuYmVzdFNjb3JlU3ByaXRlLndpZHRoIC8gMiArIHRoaXMuZWxlbWVudHNYT2Zmc2V0O1xyXG4gICAgICAgIHRoaXMuYmVzdFNjb3JlU3ByaXRlLnkgPSB0aGlzLmJlc3RTY29yZVlQb3NpdGlvbjtcclxuXHJcbiAgICAgICAgdGhpcy5nYW1lT3ZlckNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLnNjb3JlU3ByaXRlKTtcclxuICAgICAgICB0aGlzLmdhbWVPdmVyQ29udGFpbmVyLmFkZENoaWxkKHRoaXMuYmVzdFNjb3JlU3ByaXRlKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfY2xlYXJTY29yZXMoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lT3ZlckNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLnNjb3JlU3ByaXRlKTtcclxuICAgICAgICB0aGlzLmdhbWVPdmVyQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuYmVzdFNjb3JlU3ByaXRlKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2dldENvbnRhaW5lcllQb3NpdGlvbigpIHtcclxuICAgICAgICBsZXQgY2VpbGluZ0hlaWdodCA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuQ0VJTElORykuaGVpZ2h0O1xyXG4gICAgICAgIGxldCBnYW1lT3ZlclNjcmVlbkhlaWdodCA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuR0FNRV9PVkVSKS5oZWlnaHQ7XHJcbiAgICAgICAgcmV0dXJuIChjZWlsaW5nSGVpZ2h0ICsgc2V0dGluZ3MucGxheWFibGVBcmVhQWJvdmVXYXRlciArIHNldHRpbmdzLnBsYXlhYmxlQXJlYUJlbG93V2F0ZXIpIC8gMiAtIGdhbWVPdmVyU2NyZWVuSGVpZ2h0IC8gMjtcclxuICAgIH1cclxuXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdhbWVPdmVyU2NyZWVuO1xyXG4iLCJsZXQgc2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldHRpbmdzJyk7XHJcbmxldCB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMuanMnKTtcclxuXHJcbmxldCBhdWRpb1BsYXllciA9IHJlcXVpcmUoJy4vYXVkaW9QbGF5ZXInKTtcclxuXHJcbmxldCBQaXBlID0gcmVxdWlyZSgnLi9QaXBlJyk7XHJcblxyXG5sZXQgbGV2ZWwgPSB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjb250YWluZXIgdGhhdCB3aWxsIGNvbnRhaW4gZXZlcnl0aGluZyB0aGF0IG5lZWRzIHRvIGJlIG1vdmVkIHRvd2FyZHMgdGhlIHBsYXllclxyXG4gICAgICovXHJcbiAgICBjb250YWluZXI6IHVuZGVmaW5lZCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRpbGVkIGZsb29yIHNwcml0ZVxyXG4gICAgICovXHJcbiAgICBmbG9vclNwcml0ZTogdW5kZWZpbmVkLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGlsZWQgY2VpbGluZyBzcHJpdGVcclxuICAgICAqL1xyXG4gICAgY2VpbGluZ1Nwcml0ZTogdW5kZWZpbmVkLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29udGFpbmVyIHRoYXQgd2lsbCBjb250YWluIGFsbCBwaXBlc1xyXG4gICAgICovXHJcbiAgICBwaXBlc0NvbnRhaW5lcjogdW5kZWZpbmVkLFxyXG5cclxuICAgIGZpcnN0UGlwZUZhY2luZzogUGlwZS5VUCxcclxuXHJcbiAgICBuZXh0UGlwZUZhY2luZzogMCxcclxuICAgIHBsYWNlZFBpcGVzQ291bnQ6IDAsXHJcblxyXG4gICAgcGxheWVySW5zaWRlUGlwZTogZmFsc2UsXHJcblxyXG4gICAgc2NvcmU6IDAsXHJcbiAgICBiZXN0U2NvcmU6IDAsXHJcbiAgICBzY29yZUNvbnRhaW5lcjogdW5kZWZpbmVkLFxyXG5cclxuICAgIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5fY3JlYXRlQ2VpbGluZygpKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9jcmVhdGVGbG9vcigpKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5fY3JlYXRlSW5pdGlhbFBpcGVzKCkpO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9jcmVhdGVTY29yZUNvbnRhaW5lcigpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xyXG4gICAgfSxcclxuXHJcbiAgICBsb29wKCkge1xyXG4gICAgICAgIHRoaXMuY2VpbGluZ1Nwcml0ZS50aWxlUG9zaXRpb24ueCArPSAtc2V0dGluZ3MuZm9yd2FyZFNwZWVkO1xyXG4gICAgICAgIHRoaXMuZmxvb3JTcHJpdGUudGlsZVBvc2l0aW9uLnggKz0gLXNldHRpbmdzLmZvcndhcmRTcGVlZDtcclxuXHJcbiAgICAgICAgLy8gUGlwZXMgc3R1ZmZcclxuICAgICAgICB0aGlzLnBpcGVzQ29udGFpbmVyLnggKz0gLXNldHRpbmdzLmZvcndhcmRTcGVlZDtcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIHBpcGVzIHdoZW4gdGhleSdyZSBvZmYgc2NyZWVuXHJcbiAgICAgICAgaWYgKHRoaXMucGlwZXNDb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGlwZXNDb250YWluZXIueCA8IC10aGlzLnBpcGVzQ29udGFpbmVyLmNoaWxkcmVuWzBdLnggLSBQaXBlLnRleHR1cmVXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5waXBlc0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLnBpcGVzQ29udGFpbmVyLmNoaWxkcmVuWzBdKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYWNlTmV3UGlwZSh0aGlzLnBsYWNlZFBpcGVzQ291bnQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldCB0aGUgc3RhdGUgb2YgdGhlIGxldmVsXHJcbiAgICAgKi9cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xyXG4gICAgICAgIHRoaXMuc2NvcmVDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5zY29yZUNvbnRhaW5lci5jaGlsZHJlblswXSk7XHJcbiAgICAgICAgdGhpcy5zY29yZUNvbnRhaW5lci5hZGRDaGlsZCh1dGlscy5zY29yZVRvU3ByaXRlcyh0aGlzLnNjb3JlLCB1dGlscy5zY29yZVNpemUuQklHKSk7XHJcblxyXG4gICAgICAgIHRoaXMucGlwZXNDb250YWluZXIueCA9IDA7XHJcbiAgICAgICAgdGhpcy5waXBlc0NvbnRhaW5lci5jaGlsZHJlbi5zcGxpY2UoMCk7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJJbnNpZGVQaXBlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5uZXh0UGlwZUZhY2luZyA9IHRoaXMuZmlyc3RQaXBlRmFjaW5nO1xyXG4gICAgICAgIHRoaXMucGxhY2VkUGlwZXNDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5fY3JlYXRlSW5pdGlhbFBpcGVzKCkpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgeSBwb3NpdGlvbiBvZiB0aGUgd2F0ZXJcclxuICAgICAqL1xyXG4gICAgZ2V0V2F0ZXJMZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gc2V0dGluZ3MucGxheWFibGVBcmVhQWJvdmVXYXRlcjtcclxuICAgIH0sXHJcblxyXG4gICAgcGlwZUNvbGxpc2lvbihiaXJkKSB7XHJcbiAgICAgICAgLy8gQmVjYXVzZSBvZiBzcXVhcmUgY29sbGlzaW9uIGl0IGNhbiBmZWVsIHVuZmFpciB3aGVuIGhpdHRpbmcgdGhlIHNpZGVzIG9mIHRoZSBwaXBlcyB3aGlsZSBhdCBhbiBhbmdsZVxyXG4gICAgICAgIC8vIFdoaWNoIG9mdGVuIGhhcHBlbnMgd2hlbiBkaXZpbmcgdGhyb3VnaCB0aGUgZ2FwLiBUbyBtYWtlIHRoaW5ncyBhIGJpdCBmYWlyZXIsIGFkZGVkIGEgc21hbGwgbWFyZ2luO1xyXG4gICAgICAgIGxldCBjb2xsaXNpb25NYXJnaW4gPSAyO1xyXG5cclxuICAgICAgICBsZXQgbGVmdCA9IHRoaXMucGlwZXNDb250YWluZXIueCArIHRoaXMucGlwZXNDb250YWluZXIuY2hpbGRyZW5bMF0ueCArIGNvbGxpc2lvbk1hcmdpbjtcclxuICAgICAgICBsZXQgcmlnaHQgPSBsZWZ0ICsgdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5QSVBFKS53aWR0aCAtIGNvbGxpc2lvbk1hcmdpbjtcclxuICAgICAgICBcclxuICAgICAgICAvLyBUaGUgYmlyZCBpcyBpbiB0aGUgbGVmdC9yaWdodCBib3VuZGFyaWVzIG9mIHRoZSBmaXJzdCBwaXBlXHJcbiAgICAgICAgaWYgKGJpcmQuZ2V0UmlnaHQoKSA+IGxlZnQgJiYgYmlyZC5nZXRMZWZ0KCkgPCByaWdodCkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllckluc2lkZVBpcGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgLy8gVGhlIGJpcmQgaXMgYWJvdmUgdGhlIGdhcCFcclxuICAgICAgICAgICAgaWYgKGJpcmQuZ2V0VG9wKCkgPCB0aGlzLnBpcGVzQ29udGFpbmVyLmNoaWxkcmVuWzBdLmdhcC50b3AgfHwgYmlyZC5nZXRCb3R0b20oKSA+IHRoaXMucGlwZXNDb250YWluZXIuY2hpbGRyZW5bMF0uZ2FwLmJvdHRvbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGxheWVySW5zaWRlUGlwZSkge1xyXG4gICAgICAgICAgICAvLyBQbGF5ZXIgaGFzIHBhc3NlZCB0aGUgcGlwZVxyXG4gICAgICAgICAgICB0aGlzLl9pbmNyZWFzZVNjb3JlKCk7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVySW5zaWRlUGlwZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSB0aGUgdGlsZWQgY2VpbGluZyBzcHJpdGVcclxuICAgICAqIEByZXR1cm5zIHtQSVhJLmV4dHJhcy5UaWxpbmdTcHJpdGV9XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfY3JlYXRlQ2VpbGluZygpIHtcclxuICAgICAgICBsZXQgY2VpbGluZ1RleHR1cmUgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLkNFSUxJTkcpO1xyXG5cclxuICAgICAgICB0aGlzLmNlaWxpbmdTcHJpdGUgPSBuZXcgUElYSS5leHRyYXMuVGlsaW5nU3ByaXRlKGNlaWxpbmdUZXh0dXJlLCBzZXR0aW5ncy5nYW1lV2lkdGgsIGNlaWxpbmdUZXh0dXJlLmhlaWdodCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmNlaWxpbmdTcHJpdGU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIHRoZSB0aWxlZCBmbG9vciBzcHJpdGVcclxuICAgICAqIEByZXR1cm5zIHtQSVhJLmV4dHJhcy5UaWxpbmdTcHJpdGV9XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfY3JlYXRlRmxvb3IoKSB7XHJcbiAgICAgICAgbGV0IGZsb29yVGV4dHVyZSA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuRkxPT1IpO1xyXG5cclxuICAgICAgICB0aGlzLmZsb29yU3ByaXRlID0gbmV3IFBJWEkuZXh0cmFzLlRpbGluZ1Nwcml0ZShmbG9vclRleHR1cmUsIHNldHRpbmdzLmdhbWVXaWR0aCwgZmxvb3JUZXh0dXJlLmhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5mbG9vclNwcml0ZS55ID0gc2V0dGluZ3MucGxheWFibGVBcmVhQWJvdmVXYXRlciArIHNldHRpbmdzLnBsYXlhYmxlQXJlYUJlbG93V2F0ZXIgKyB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLkNFSUxJTkcpLmhlaWdodDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxvb3JTcHJpdGU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge1BJWEkuQ29udGFpbmVyfVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2NyZWF0ZUluaXRpYWxQaXBlcygpIHtcclxuICAgICAgICB0aGlzLm5leHRQaXBlRmFjaW5nID0gdGhpcy5maXJzdFBpcGVGYWNpbmc7XHJcbiAgICAgICAgdGhpcy5waXBlc0NvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xyXG5cclxuICAgICAgICBsZXQgc3RhcnRpbmdQaXBlc0NvdW50ID0gTWF0aC5jZWlsKHNldHRpbmdzLmdhbWVXaWR0aCAvIHNldHRpbmdzLnBpcGVEaXN0YW5jZSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhcnRpbmdQaXBlc0NvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5fcGxhY2VOZXdQaXBlKGkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGlwZXNDb250YWluZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge1BJWEkuQ29udGFpbmVyfVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2NyZWF0ZVNjb3JlQ29udGFpbmVyKCkge1xyXG4gICAgICAgIHRoaXMuc2NvcmVDb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuICAgICAgICB0aGlzLnNjb3JlQ29udGFpbmVyLmFkZENoaWxkKHV0aWxzLnNjb3JlVG9TcHJpdGVzKHRoaXMuc2NvcmUsIHV0aWxzLnNjb3JlU2l6ZS5CSUcpKTtcclxuXHJcbiAgICAgICAgdGhpcy5zY29yZUNvbnRhaW5lci54ID0gc2V0dGluZ3Muc2NvcmVQb3NpdGlvbi54O1xyXG4gICAgICAgIHRoaXMuc2NvcmVDb250YWluZXIueSA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuQ0VJTElORykuaGVpZ2h0ICsgc2V0dGluZ3Muc2NvcmVQb3NpdGlvbi55O1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5zY29yZUNvbnRhaW5lcjtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBuZXcgcGlwZSwgdGhlIHBvc2l0aW9uIGRlcGVuZHMgb24gdGhlIG51bWJlclxyXG4gICAgICogQHBhcmFtIG51bWJlclxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3BsYWNlTmV3UGlwZShudW1iZXIpIHtcclxuICAgICAgICAvLyBXZSBuZWVkIHRvdGFsIHBpcGUgYW1vdW50LCB0byBjYWxjdWxhdGUgcG9zaXRpb24gb2YgbmV3IG9uZVxyXG4gICAgICAgIGxldCBwaXBlID0gdGhpcy5fY3JlYXRlUGlwZSh0aGlzLl9nZXRSYW5kb21QaXBlSGVpZ2h0KCksIHRoaXMubmV4dFBpcGVGYWNpbmcpO1xyXG4gICAgICAgIHBpcGUuY29udGFpbmVyLnggPSBzZXR0aW5ncy5maXJzdFBpcGVEaXN0YW5jZSArIHNldHRpbmdzLnBpcGVEaXN0YW5jZSAqIG51bWJlcjtcclxuICAgICAgICB0aGlzLnBpcGVzQ29udGFpbmVyLmFkZENoaWxkKHBpcGUuY29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgdGhpcy5uZXh0UGlwZUZhY2luZyAqPSAtMTtcclxuICAgICAgICB0aGlzLnBsYWNlZFBpcGVzQ291bnQrKztcclxuICAgIH0sXHJcblxyXG4gICAgX2NyZWF0ZVBpcGUoaGVpZ2h0LCBkaXJlY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBpcGUoaGVpZ2h0LCBkaXJlY3Rpb24pO1xyXG4gICAgfSxcclxuXHJcbiAgICBfaW5jcmVhc2VTY29yZSgpIHtcclxuICAgICAgICBhdWRpb1BsYXllci5wbGF5KGF1ZGlvUGxheWVyLmF1ZGlvRnJhZ21lbnRzLlBPSU5UKTtcclxuICAgICAgICB0aGlzLnNjb3JlKys7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNjb3JlID4gdGhpcy5iZXN0U2NvcmUpIHRoaXMuYmVzdFNjb3JlID0gdGhpcy5zY29yZTtcclxuXHJcbiAgICAgICAgLy8gQmVjYXVzZSB3ZSBwdXQgYWxsIGRpZ2l0cyBpbnNpZGUgb25lIGNvbnRhaW5lciwgd2Ugb25seSBoYXZlIHRvIHJlbW92ZSBvbiBjaGlsZFxyXG4gICAgICAgIHRoaXMuc2NvcmVDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5zY29yZUNvbnRhaW5lci5jaGlsZHJlblswXSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2NvcmVDb250YWluZXIuYWRkQ2hpbGQodXRpbHMuc2NvcmVUb1Nwcml0ZXModGhpcy5zY29yZSwgdXRpbHMuc2NvcmVTaXplLkJJRykpO1xyXG4gICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgcmFuZG9tIGhlaWdodCBmb3IgdGhlIHBpcGVcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfZ2V0UmFuZG9tUGlwZUhlaWdodCgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIChzZXR0aW5ncy5tYXhQaXBlSGVpZ2h0IC0gc2V0dGluZ3MubWluUGlwZUhlaWdodCkgKyBzZXR0aW5ncy5taW5QaXBlSGVpZ2h0O1xyXG4gICAgfSxcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbGV2ZWw7XHJcbiIsImNvbnN0IHNldHRpbmdzID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbG9jYXRpb24gb2YgdGhlIGFzc2V0cyBqc29uXHJcbiAgICAgKi9cclxuICAgIGFzc2V0RmlsZTogXCJhc3NldHMvYXNzZXRzLmpzb25cIixcclxuXHJcbiAgICBzb3VuZHNQYXRoOiBcImFzc2V0cy9zb3VuZHMvXCIsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYXJlYSB0aGF0IGlzIGF2YWlsYWJsZSBhYm92ZSB0aGUgd2F0ZXJcclxuICAgICAqL1xyXG4gICAgcGxheWFibGVBcmVhQWJvdmVXYXRlcjogMjYwLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGFyZWEgdGhhdCBpcyBhdmFpbGFibGUgYmVsb3cgdGhlIHdhdGVyXHJcbiAgICAgKi9cclxuICAgIHBsYXlhYmxlQXJlYUJlbG93V2F0ZXI6IDI2MCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB3aWR0aCBvZiB0aGUgZ2FtZSwgZmlsbGVkIGR1cmluZyBpbml0IGN1cnJlbnRseVxyXG4gICAgICovXHJcbiAgICBnYW1lV2lkdGg6IDAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3BlZWQgYXQgd2hpY2ggb2JqZWN0cyBtb3ZlIHRvd2FyZHMgdGhlIHBsYXllclxyXG4gICAgICovXHJcbiAgICBmb3J3YXJkU3BlZWQ6IDUsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3BlZWQgYXQgd2hpY2ggdGhlIGJhY2tncm91bmQgbW92ZXNcclxuICAgICAqL1xyXG4gICAgYmFja2dyb3VuZFNwZWVkOiAyLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGFtb3VudCBvZiBncmF2aXR5IGFkZGVkIHRvIHRoZSB2ZWxvY2l0eSBvZiB0aGUgcGxheWVyIHdoaWxlIGFib3ZlIHRoZSB3YXRlclxyXG4gICAgICovXHJcbiAgICBncmF2aXR5OiAwLjMsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYW1vdW50IG9mIHVwd2FyZCBmb3JjZSBhZGRlZCB0byB0aGUgdmVsb2NpdHkgb2YgdGhlIHBsYXllciB3aGlsZSBiZWxvdyB0aGUgd2F0ZXJcclxuICAgICAqL1xyXG4gICAgd2F0ZXJQdXNoRm9yY2U6IDAuMyxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhbW91bnQgb2YgdXB3YXJkIHZlbG9jaXR5IGlzIGFkZGVkIHRvIHRoZSBwbGF5ZXIgb24gJ2ZsYXBwaW5nJy5cclxuICAgICAqL1xyXG4gICAgYmlyZEZsYXBWZWxvY2l0eTogNC41LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHNwZWVkIG9mIHRoZSBiaXJkIGFuaW1hdGlvblxyXG4gICAgICovXHJcbiAgICBiaXJkQW5pbWF0aW9uU3BlZWQ6IDAuMixcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0aW5nIHBvc2l0aW9uIG9mIHRoZSBiaXJkXHJcbiAgICAgKi9cclxuICAgIGJpcmRTdGFydFBvc2l0aW9uOiB7XHJcbiAgICAgICAgeDogMTAwLFxyXG4gICAgICAgIHk6IDE1MCxcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdmVydGljYWwgZ2FwcyBpbiB0aGUgcGlwZXMgZm9yIHRoZSBwbGF5ZXIgdG8gZmx5IHRocm91Z2hcclxuICAgICAqL1xyXG4gICAgcGlwZUdhcFNpemU6IDEwMCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBkaXN0YW5jZSB0byB0aGUgZmlyc3QgcGlwZVxyXG4gICAgICovXHJcbiAgICBmaXJzdFBpcGVEaXN0YW5jZTogODAwLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGRpc3RhbmNlIGJldHdlZW4gZWFjaCBwaXBlXHJcbiAgICAgKi9cclxuICAgIHBpcGVEaXN0YW5jZTogNDAwLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1pbiBoZWlnaHQgb2YgYSBwaXBlIChoYW5kbGUgd2l0aCBjYXJlKVxyXG4gICAgICovXHJcbiAgICBtaW5QaXBlSGVpZ2h0OiAyODAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbWF4IGhlaWdodCBvZiBhIHBpcGUgKGhhbmRsZSB3aXRoIGNhcmUpXHJcbiAgICAgKi9cclxuICAgIG1heFBpcGVIZWlnaHQ6IDM5MCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBwb3NpdGlvbiBvZiB0aGUgc2NvcmVcclxuICAgICAqL1xyXG4gICAgc2NvcmVQb3NpdGlvbjoge1xyXG4gICAgICAgIHg6IDEwLFxyXG4gICAgICAgIHk6IDEwIC8vIE9mZnNldCBmcm9tIHRoZSAnY2VpbGluZydcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB2ZXJ0aWNhbCB2ZWxvY2l0eSBvZiB0aGUgcGxheWVyIHNob3VsZCBiZSByZXNldCBiZWZvcmUgYXBwbHlpbmcgdGhlIGZsYXAgdmVsb2NpdHlcclxuICAgICAqL1xyXG4gICAgc2hvdWxkQmlyZEZsYXBSZXNldFZlbG9jaXR5OiB0cnVlLFxyXG5cclxuICAgIHRleHR1cmVzOiB7XHJcbiAgICAgICAgJ0JBQ0tHUk9VTkQnOiAnc2t5LnBuZycsXHJcbiAgICAgICAgJ0ZMT09SJzogJ2xhbmQucG5nJyxcclxuICAgICAgICAnQ0VJTElORyc6ICdjZWlsaW5nLnBuZycsXHJcbiAgICAgICAgJ1BJUEUnOiAncGlwZS5wbmcnLFxyXG4gICAgICAgICdQSVBFX1VQJzogJ3BpcGUtdXAucG5nJyxcclxuICAgICAgICAnUElQRV9ET1dOJzogJ3BpcGUtZG93bi5wbmcnLFxyXG4gICAgICAgICdXQVRFUic6ICd3YXRlci5wbmcnLFxyXG4gICAgICAgICdHQU1FX09WRVInOiAnc2NvcmVib2FyZC5wbmcnLFxyXG4gICAgICAgICdSRVNUQVJUJzogJ3JlcGxheS5wbmcnLFxyXG4gICAgICAgICdCSUdfMCc6ICdmb250X2JpZ18wLnBuZycsXHJcbiAgICAgICAgJ0JJR18xJzogJ2ZvbnRfYmlnXzEucG5nJyxcclxuICAgICAgICAnQklHXzInOiAnZm9udF9iaWdfMi5wbmcnLFxyXG4gICAgICAgICdCSUdfMyc6ICdmb250X2JpZ18zLnBuZycsXHJcbiAgICAgICAgJ0JJR180JzogJ2ZvbnRfYmlnXzQucG5nJyxcclxuICAgICAgICAnQklHXzUnOiAnZm9udF9iaWdfNS5wbmcnLFxyXG4gICAgICAgICdCSUdfNic6ICdmb250X2JpZ182LnBuZycsXHJcbiAgICAgICAgJ0JJR183JzogJ2ZvbnRfYmlnXzcucG5nJyxcclxuICAgICAgICAnQklHXzgnOiAnZm9udF9iaWdfOC5wbmcnLFxyXG4gICAgICAgICdCSUdfOSc6ICdmb250X2JpZ185LnBuZycsXHJcbiAgICAgICAgJ1NNQUxMXzAnOiAnZm9udF9zbWFsbF8wLnBuZycsXHJcbiAgICAgICAgJ1NNQUxMXzEnOiAnZm9udF9zbWFsbF8xLnBuZycsXHJcbiAgICAgICAgJ1NNQUxMXzInOiAnZm9udF9zbWFsbF8yLnBuZycsXHJcbiAgICAgICAgJ1NNQUxMXzMnOiAnZm9udF9zbWFsbF8zLnBuZycsXHJcbiAgICAgICAgJ1NNQUxMXzQnOiAnZm9udF9zbWFsbF80LnBuZycsXHJcbiAgICAgICAgJ1NNQUxMXzUnOiAnZm9udF9zbWFsbF81LnBuZycsXHJcbiAgICAgICAgJ1NNQUxMXzYnOiAnZm9udF9zbWFsbF82LnBuZycsXHJcbiAgICAgICAgJ1NNQUxMXzcnOiAnZm9udF9zbWFsbF83LnBuZycsXHJcbiAgICAgICAgJ1NNQUxMXzgnOiAnZm9udF9zbWFsbF84LnBuZycsXHJcbiAgICAgICAgJ1NNQUxMXzknOiAnZm9udF9zbWFsbF85LnBuZycsXHJcbiAgICB9LFxyXG5cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgIH1cclxufTtcclxuXHJcbnNldHRpbmdzLmluaXQoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gc2V0dGluZ3M7XHJcbiIsImxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MnKTtcclxuXHJcbmxldCBzZXR1cCA9IHtcclxuICAgIC8qKlxyXG4gICAgICogU2V0IHVwIHRoZSByZW5kZXJlclxyXG4gICAgICogQHJldHVybnMge1BJWEkuV2ViR0xSZW5kZXJlcnxQSVhJLkNhbnZhc1JlbmRlcmVyfVxyXG4gICAgICovXHJcbiAgICByZW5kZXJlcigpIHtcclxuICAgICAgICBsZXQgcmVuZGVyZXIgPSBQSVhJLmF1dG9EZXRlY3RSZW5kZXJlcihzZXR0aW5ncy5nYW1lV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XHJcbiAgICAgICAgcmVuZGVyZXIudmlldy5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgICByZW5kZXJlci52aWV3LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgcmVuZGVyZXIuYmFja2dyb3VuZENvbG9yID0gMHg0ZWMwY2E7XHJcbiAgICAgICAgcmVuZGVyZXIuYXV0b1Jlc2l6ZSA9IHRydWU7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocmVuZGVyZXIudmlldyk7XHJcblxyXG4gICAgICAgIHJldHVybiByZW5kZXJlcjtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIHRoZSBhc3NldHNcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBhY3Rpb24gdG8gcGVyZm9ybSBhZnRlciBhc3NldHMgaGF2ZSBiZWVuIGxvYWRlZFxyXG4gICAgICovXHJcbiAgICBsb2FkQXNzZXRzKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IEVycm9yKCdDYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuXHJcbiAgICAgICAgUElYSS5sb2FkZXIuYWRkKHNldHRpbmdzLmFzc2V0RmlsZSkubG9hZChjYWxsYmFjayk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHNldHVwO1xyXG4iLCJsZXQgc2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldHRpbmdzJyk7XHJcblxyXG5sZXQgdXRpbHMgPSB7XHJcblxyXG4gICAgc2NvcmVTaXplOiB7XHJcbiAgICAgICAgJ1NNQUxMJzogMCxcclxuICAgICAgICAnQklHJzogMVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIHRleHR1cmUgZnJvbSB0aGUgcGl4aSBsb2FkZXIgYnkgbmFtZVxyXG4gICAgICogQHBhcmFtIG5hbWUgdGV4dHVyZSBuYW1lLCB3aXRoIGV4dGVuc2lvblxyXG4gICAgICogQHJldHVybnMgeyp8UElYSS5UZXh0dXJlfEZyYW1lT2JqZWN0fVxyXG4gICAgICovXHJcbiAgICBnZXRUZXh0dXJlKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gUElYSS5sb2FkZXIucmVzb3VyY2VzW3NldHRpbmdzLmFzc2V0RmlsZV0udGV4dHVyZXNbbmFtZV1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZSBzY29yZSBzcHJpdGVzIGJhc2VkIG9uIHBhc3NlZCBzY29yZVxyXG4gICAgICogQHBhcmFtIHNjb3JlXHJcbiAgICAgKiBAcGFyYW0gc2l6ZVxyXG4gICAgICogQHJldHVybnMge0NvbnRhaW5lcnwqfVxyXG4gICAgICovXHJcbiAgICBzY29yZVRvU3ByaXRlcyhzY29yZSwgc2l6ZSkge1xyXG4gICAgICAgIGxldCBzdHJpbmdTY29yZSA9IHNjb3JlLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgIGxldCB0ZXh0dXJlUHJlZml4ID0gc2l6ZSA9PT0gdGhpcy5zY29yZVNpemUuQklHID8gJ0JJR18nIDogJ1NNQUxMXyc7XHJcbiAgICAgICAgbGV0IGxldHRlclNwYWNpbmcgPSBzaXplID09PSB0aGlzLnNjb3JlU2l6ZS5CSUcgPyAyNSA6IDEwO1xyXG5cclxuICAgICAgICBsZXQgZGlnaXRzQ29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBzdHJpbmdTY29yZS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgZGlnaXQgPSBuZXcgUElYSS5TcHJpdGUodGhpcy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzW3RleHR1cmVQcmVmaXggKyBzdHJpbmdTY29yZS5jaGFyQXQoaSldKSk7XHJcbiAgICAgICAgICAgIGRpZ2l0LnggPSBpICogbGV0dGVyU3BhY2luZztcclxuICAgICAgICAgICAgZGlnaXRzQ29udGFpbmVyLmFkZENoaWxkKGRpZ2l0KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGRpZ2l0c0NvbnRhaW5lcjtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gdXRpbHM7XHJcbiJdfQ=="}