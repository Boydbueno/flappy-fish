{"version":3,"sources":["e:/Code/pixi/node_modules/browser-pack/_prelude.js","js/main.js","e:/Code/pixi/js/background.js","e:/Code/pixi/js/bird.js","e:/Code/pixi/js/game.js","e:/Code/pixi/js/level.js","e:/Code/pixi/js/settings.js","e:/Code/pixi/js/setup.js","e:/Code/pixi/js/utils.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function() {\r\n    let game = require('./game');\r\n    game.start();\r\n})();\r\n\r\n","let settings = require('./settings.js');\r\nlet utils = require('./utils.js');\r\n\r\nvar background = {\r\n    /**\r\n     * The container that will contain all background tiles lined up\r\n     */\r\n    container: undefined,\r\n\r\n    /**\r\n     * The width of one background tile, is needed in some calculations/checks\r\n     */\r\n    skyTileWidth: 0,\r\n\r\n    initialize() {\r\n        this.container = new PIXI.Container();\r\n        let skyTileTexture = utils.getTexture(settings.textures.background)\r\n        this.skyTileWidth = skyTileTexture.width;\r\n\r\n        this.container.y = settings.playableAreaAboveWater - skyTileTexture.height + utils.getTexture(settings.textures.ceiling).height;\r\n\r\n        utils.fillContainerWithWindowWidthTiles(this.container, skyTileTexture);\r\n\r\n        return this;\r\n    },\r\n\r\n    loop() {\r\n        this.container.x += -settings.backgroundSpeed;\r\n\r\n        // By moving the whole background back at the right moment we don't have to worry about tracking individual tiles\r\n        if (this.container.x <= -this.skyTileWidth) {\r\n            this.container.x = 0;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get the element that needs to be rendered\r\n     * @returns {Container}\r\n     */\r\n    getElement() {\r\n        return this.container;\r\n    }\r\n};\r\n\r\nmodule.exports = background;\r\n","let settings = require('./settings');\r\nlet utils = require('./utils');\r\n\r\nlet bird = {\r\n    container: undefined,\r\n    bird: undefined,\r\n    boundingBox: undefined,\r\n    velocity: {x: 0, y: 0},\r\n    isBelowWater: true,\r\n\r\n    animationFrames: 4,\r\n\r\n    initialize() {\r\n        this.container = new PIXI.Container();\r\n\r\n        let spriteFrames = [];\r\n        for (let i = 0; i < this.animationFrames; i++) {\r\n            spriteFrames.push(utils.getTexture('bird_' + i +  '.png'));\r\n        }\r\n        this.bird = new PIXI.extras.AnimatedSprite(spriteFrames);\r\n\r\n        this.bird.animationSpeed = 0.2;\r\n        this.bird.play();\r\n\r\n        this.bird.anchor.x = 0.5;\r\n        this.bird.anchor.y = 0.5;\r\n\r\n        this.bird.y = 150;\r\n        this.bird.x = 100;\r\n\r\n        this.container.addChild(this.bird);\r\n\r\n        this.boundingBox = {x: 0, y: 0, width: 0, height: 0};\r\n\r\n        return this;\r\n    },\r\n\r\n    loop() {\r\n        if (this.isBelowWater) {\r\n            this.belowWater();\r\n        } else {\r\n            this.aboveWater();\r\n        }\r\n\r\n        this.bird.y += this.velocity.y;\r\n        this.bird.rotation = Math.atan2(this.velocity.y, settings.forwardSpeed);\r\n    },\r\n\r\n    aboveWater() {\r\n        this.velocity.y += settings.gravity;\r\n    },\r\n\r\n    belowWater() {\r\n        this.velocity.y -= settings.waterPushForce;\r\n    },\r\n\r\n    flap() {\r\n        if (settings.shouldBirdFlapResetVelocity ) {\r\n            this.velocity.y = 0;\r\n        }\r\n\r\n        this.velocity.y -= settings.birdFlapVelocity;\r\n    },\r\n\r\n    getElement() {\r\n        return this.bird;\r\n    },\r\n\r\n    getTop() {\r\n        return this.bird.y - this.bird.height / 2;\r\n    },\r\n\r\n    getBottom() {\r\n        return this.bird.y + this.bird.height / 2;\r\n    },\r\n\r\n    getRight() {\r\n        return this.bird.x + this.bird.width / 2;\r\n    },\r\n\r\n    getLeft() {\r\n        return this.bird.x - this.bird.width / 2;\r\n    }\r\n};\r\n\r\nmodule.exports = bird;\r\n","let setup = require('./setup');\r\nlet background = require('./background');\r\nlet level = require('./level');\r\nlet bird = require('./bird');\r\n\r\nlet game = {\r\n\r\n    renderer: undefined,\r\n    stage: undefined,\r\n\r\n    hasStopped: false,\r\n\r\n    /**\r\n     * Start the game\r\n     */\r\n    start() {\r\n        this.renderer  = setup.renderer();\r\n        setup.loadAssets(this.initialize.bind(this));\r\n    },\r\n\r\n    /**\r\n     * Initialize all required parts of the game\r\n     */\r\n    initialize() {\r\n        this.stage = new PIXI.Container();\r\n\r\n        background.initialize();\r\n        this.stage.addChild(background.getElement());\r\n\r\n        level.initialize();\r\n        this.stage.addChild(level.getElement());\r\n\r\n        // Spawn the pipes\r\n\r\n        bird.initialize();\r\n        this.stage.addChild(bird.getElement());\r\n\r\n        this.renderer.render(this.stage);\r\n\r\n        // Todo: Add proper input handling\r\n        window.addEventListener(\"keyup\", bird.flap.bind(bird), false);\r\n\r\n        this.loop();\r\n    },\r\n\r\n    /**\r\n     * The game loop\r\n     */\r\n    loop() {\r\n        requestAnimationFrame(this.loop.bind(this));\r\n\r\n        // This basically causes the game to 'freeze'. This should change the updating to menu and such\r\n        if (this.hasStopped) return;\r\n\r\n        background.loop();\r\n        level.loop();\r\n        bird.loop();\r\n\r\n        // Check if the bird is below or underneath the water\r\n        if (bird.getTop() < level.getWaterLevel() && bird.isBelowWater) {\r\n            bird.isBelowWater = false;\r\n        } else if (bird.getTop() >= level.getWaterLevel() && !bird.isBelowWater) {\r\n            bird.isBelowWater = true;\r\n        }\r\n\r\n        // Ceiling collision\r\n        if (bird.getTop() <= level.ceilingSprite.y + level.ceilingSprite.height) {\r\n            this.stop();\r\n        }\r\n\r\n        if (level.pipeCollision(bird)) {\r\n            this.stop();\r\n        }\r\n\r\n        this.renderer.render(this.stage);\r\n    },\r\n\r\n    /**\r\n     * Stop the game\r\n     */\r\n    stop() {\r\n        this.hasStopped = true;\r\n    },\r\n\r\n    /**\r\n     * Continue the game after stopping\r\n     * Make sure bird is no longer colliding or it'll stop again instantly\r\n     */\r\n    play() {\r\n        this.hasStopped = false;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = game;\r\n","let settings = require('./settings');\r\nlet utils = require('./utils.js');\r\n\r\nconst pipeFacing = {\r\n    'UP': 1,\r\n    'DOWN': -1,\r\n};\r\n\r\nlet level = {\r\n    /**\r\n     * The container that will contain everything that needs to be moved towards the player\r\n     */\r\n    container: undefined,\r\n    /**\r\n     * The container that will contain all floor tiles\r\n     */\r\n    floorSprite: undefined,\r\n\r\n    ceilingSprite: undefined,\r\n\r\n    pipesContainer: undefined,\r\n    pipes: [],\r\n\r\n    pipeTexture: undefined,\r\n    pipeTopTexture: undefined,\r\n    pipeBottomTexture: undefined,\r\n\r\n    firstPipeFacing: pipeFacing.UP,\r\n\r\n    nextPipeFacing: 0,\r\n    placedPipesCount: 0,\r\n\r\n    pipeGapSize: 100,\r\n\r\n    pipeDistance: 300,\r\n    firstPipeDistance: 800,\r\n\r\n    initialize() {\r\n        this.container = new PIXI.Container();\r\n\r\n        this.container.addChild(this._createCeiling());\r\n        this.container.addChild(this._createFloor());\r\n\r\n        // Pipes stuff\r\n        this.nextPipeFacing = this.firstPipeFacing;\r\n        this.pipeTexture = utils.getTexture(settings.textures.pipe);\r\n        this.pipeTopTexture = utils.getTexture(settings.textures.pipeUp);\r\n        this.pipeBottomTexture = utils.getTexture(settings.textures.pipeDown);\r\n\r\n        this.pipesContainer = new PIXI.Container();\r\n\r\n        this._initialPipes();\r\n\r\n        this.container.addChild(this.pipesContainer);\r\n\r\n        return this;\r\n    },\r\n\r\n    loop() {\r\n        this.ceilingSprite.tilePosition.x += -settings.forwardSpeed;\r\n        this.floorSprite.tilePosition.x += -settings.forwardSpeed;\r\n\r\n        // Pipes stuff\r\n        this.pipesContainer.x += -settings.forwardSpeed;\r\n\r\n        // Remove pipes when they're off screen\r\n        if (this.pipes.length > 0) {\r\n\r\n            if (this.pipesContainer.x < -this.pipes[0].x - this.pipeTexture.width) {\r\n                this.pipesContainer.removeChild(this.pipes[0]);\r\n                this.pipes.shift();\r\n\r\n                this._placeNewPipe();\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * Get the y position of the water\r\n     */\r\n    getWaterLevel() {\r\n        return settings.playableAreaAboveWater;\r\n    },\r\n\r\n    /**\r\n     * Get the element to render\r\n     * @returns {undefined|*}\r\n     */\r\n    getElement() {\r\n        return this.container;\r\n    },\r\n\r\n    pipeCollision(bird) {\r\n\r\n        // We will check if the bird is colliding with the first pipe\r\n        // The bird can't possibly hit any other pipes\r\n\r\n        // We only need to collide with the left side of the pipes and the top/bottom pieces\r\n        // We know how far the pipe container has moved to the right, we can use this to get the left side\r\n\r\n        let left = this.pipesContainer.x + this.pipes[0].x;\r\n        let right = left + utils.getTexture(settings.textures.pipe).width;\r\n        \r\n        // The bird is in the left/right boundaries of the first pipe\r\n        if (bird.getRight() > left && bird.getLeft() < right) {\r\n\r\n            // The bird is above the gap!\r\n            if (bird.getTop() < this.pipes[0].gap.top || bird.getBottom() > this.pipes[0].gap.bottom) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    _createCeiling() {\r\n        let ceilingTexture = utils.getTexture(settings.textures.ceiling);\r\n\r\n        this.ceilingSprite = new PIXI.extras.TilingSprite(ceilingTexture, window.innerWidth, ceilingTexture.height);\r\n\r\n        return this.ceilingSprite;\r\n    },\r\n\r\n    _createFloor() {\r\n        let floorTexture = utils.getTexture(settings.textures.floor);\r\n\r\n        this.floorSprite = new PIXI.extras.TilingSprite(floorTexture, window.innerWidth, floorTexture.height);\r\n        this.floorSprite.y = settings.playableAreaAboveWater + settings.playableAreaBelowWater + utils.getTexture(settings.textures.ceiling).height;\r\n\r\n        return this.floorSprite;\r\n    },\r\n\r\n    _initialPipes() {\r\n        let startingPipesCount = Math.ceil(window.innerWidth / this.pipeDistance);\r\n\r\n        for (let i = 0; i < startingPipesCount; i++) {\r\n            let pipe = this._createPipe(this._getRandomPipeHeight(), this.nextPipeFacing);\r\n            pipe.x = this.firstPipeDistance + this.pipeDistance * i;\r\n            this.pipesContainer.addChild(pipe);\r\n            this.pipes.push(pipe);\r\n\r\n            this.nextPipeFacing *= -1;\r\n            this.placedPipesCount++;\r\n        }\r\n    },\r\n\r\n    _placeNewPipe() {\r\n        // We need total pipe amount, to calculate position of new one\r\n        let pipe = this._createPipe(this._getRandomPipeHeight(), this.nextPipeFacing);\r\n        pipe.x = this.placedPipesCount * this.pipeDistance + this.firstPipeDistance;\r\n        this.pipesContainer.addChild(pipe);\r\n        this.pipes.push(pipe);\r\n\r\n        this.nextPipeFacing *= -1;\r\n        this.placedPipesCount++;\r\n    },\r\n\r\n    _createPipe(height, direction) {\r\n        let container = new PIXI.Container();\r\n\r\n        let totalPlayHeight = settings.playableAreaAboveWater + settings.playableAreaBelowWater;\r\n\r\n        if (direction === pipeFacing.UP) {\r\n            container.addChild(this._createUpFacingPipe(height));\r\n        } else if (direction === pipeFacing.DOWN) {\r\n            container.addChild(this._createDownFacingPipe(height));\r\n        }\r\n\r\n        // Check if we have space for pipe in opposite direction to complete the gap\r\n        if (height + this.pipeGapSize < totalPlayHeight) {\r\n            // We can fit another pipe opposite to it\r\n            let oppositePipeHeight = totalPlayHeight - height - this.pipeGapSize;\r\n            if (direction === pipeFacing.UP)\r\n                container.addChild(this._createDownFacingPipe(oppositePipeHeight));\r\n\r\n            if (direction === pipeFacing.DOWN)\r\n                container.addChild(this._createUpFacingPipe(oppositePipeHeight));\r\n        }\r\n\r\n        // Store the information of the gap position in the container object for easier collision checks\r\n        let top = (direction === pipeFacing.UP ? height - this.pipeGapSize : height) + this.ceilingSprite.height;\r\n        let bottom = (direction === pipeFacing.UP ? height : height + this.pipeGapSize) + this.ceilingSprite.height;\r\n        container.gap = { top, bottom }\r\n\r\n        return container;\r\n    },\r\n\r\n    _createUpFacingPipe(height) {\r\n        let container = new PIXI.Container();\r\n\r\n        let pipeTop = new PIXI.Sprite(this.pipeTopTexture);\r\n        container.addChild(pipeTop);\r\n\r\n        let pipePartHeight = height - this.pipeTopTexture.height;\r\n\r\n        let pipe = new PIXI.extras.TilingSprite(this.pipeTexture, this.pipeTexture.width, pipePartHeight);\r\n        pipe.y = this.pipeTopTexture.height;\r\n        container.addChild(pipe);\r\n\r\n        // Place pipe on the bottom\r\n        container.y = settings.playableAreaAboveWater + settings.playableAreaBelowWater - height + utils.getTexture(settings.textures.ceiling).height;\r\n\r\n        return container;\r\n    },\r\n\r\n    _createDownFacingPipe(height) {\r\n        let container = new PIXI.Container();\r\n\r\n        let pipePartHeight = height - this.pipeBottomTexture.height;\r\n\r\n        let pipe = new PIXI.extras.TilingSprite(this.pipeTexture, this.pipeTexture.width, pipePartHeight);\r\n        container.addChild(pipe);\r\n\r\n        let pipeBottom = new PIXI.Sprite(this.pipeBottomTexture);\r\n        pipeBottom.y = pipePartHeight;\r\n        container.addChild(pipeBottom);\r\n\r\n        // We can place it against the ceiling\r\n        container.y = utils.getTexture(settings.textures.ceiling).height;\r\n\r\n        return container;\r\n    },\r\n\r\n    _getRandomPipeHeight() {\r\n        return 280;\r\n    },\r\n};\r\n\r\nmodule.exports = level;\r\n","const settings = {\r\n    /**\r\n     * The location of the assets json\r\n     */\r\n    assetFile: \"assets/assets.json\",\r\n\r\n    /**\r\n     * The area that is available above the water\r\n     */\r\n    playableAreaAboveWater: 280,\r\n\r\n    playableAreaBelowWater: 280,\r\n\r\n    /**\r\n     * The speed at which objects move towards the player\r\n     */\r\n    forwardSpeed: 5,\r\n\r\n    /**\r\n     * The speed at which the background moves\r\n     */\r\n    backgroundSpeed: 1,\r\n\r\n    /**\r\n     * The amount of gravity added to the velocity of the player while above the water\r\n     */\r\n    gravity: 0.3,\r\n\r\n    /**\r\n     * The amount of upward force added to the velocity of the player while below the water\r\n     */\r\n    waterPushForce: 0.3,\r\n\r\n    /**\r\n     * The amount of upward velocity is added to the player on 'flapping'.\r\n     */\r\n    birdFlapVelocity: 4,\r\n\r\n    /**\r\n     * If vertical velocity of the player should be reset before applying the flap velocity\r\n     */\r\n    shouldBirdFlapResetVelocity: false,\r\n\r\n    textures: {\r\n        'background': 'sky.png',\r\n        'floor': 'land.png',\r\n        'ceiling': 'ceiling.png',\r\n        'pipe': 'pipe.png',\r\n        'pipeUp': 'pipe-up.png',\r\n        'pipeDown': 'pipe-down.png',\r\n    }\r\n};\r\n\r\nmodule.exports = settings;\r\n","let setup = {\r\n    renderer() {\r\n        let renderer = PIXI.autoDetectRenderer(window.innerWidth, window.innerHeight);\r\n        renderer.view.style.position = \"absolute\";\r\n        renderer.view.style.display = \"block\";\r\n        renderer.backgroundColor = 0x4ec0ca;\r\n        renderer.autoResize = true;\r\n\r\n        document.body.appendChild(renderer.view);\r\n\r\n        return renderer;\r\n    },\r\n\r\n    loadAssets(callback) {\r\n        PIXI.loader.add(\"assets/assets.json\").load(callback);\r\n    }\r\n};\r\n\r\nmodule.exports = setup;\r\n","let settings = require('./settings');\r\n\r\nlet utils = {\r\n\r\n    /**\r\n     * Get a texture from the pixi loader by name\r\n     * @param name texture name, with extension\r\n     * @returns {*|PIXI.Texture|FrameObject}\r\n     */\r\n    getTexture(name) {\r\n        return PIXI.loader.resources[settings.assetFile].textures[name]\r\n    },\r\n\r\n    /**\r\n     * Fill a given pixi container and fill it with vertically aligned tiles fitting whole window width\r\n     * @param container\r\n     * @param texture\r\n     */\r\n    fillContainerWithWindowWidthTiles(container, texture) {\r\n        let requiredTiles = this._getRequiredWidthTiles(texture.width);\r\n\r\n        for (let i = 0; i < requiredTiles; i++) {\r\n            let tile = new PIXI.Sprite(texture);\r\n            tile.x = tile.width * i;\r\n            container.addChild(tile);\r\n        }\r\n    },\r\n\r\n    _getRequiredWidthTiles(tileWidth) {\r\n        return Math.ceil(window.innerWidth / tileWidth) + 1;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = utils;\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImU6L0NvZGUvcGl4aS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwianNcXG1haW4uanMiLCJlOlxcQ29kZVxccGl4aVxcanNcXGJhY2tncm91bmQuanMiLCJlOlxcQ29kZVxccGl4aVxcanNcXGJpcmQuanMiLCJlOlxcQ29kZVxccGl4aVxcanNcXGdhbWUuanMiLCJlOlxcQ29kZVxccGl4aVxcanNcXGxldmVsLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxzZXR0aW5ncy5qcyIsImU6XFxDb2RlXFxwaXhpXFxqc1xcc2V0dXAuanMiLCJlOlxcQ29kZVxccGl4aVxcanNcXHV0aWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxDQUFDLFlBQVc7QUFDUixRQUFJLE9BQU8sUUFBUSxRQUFSLENBQVg7QUFDQSxTQUFLLEtBQUw7QUFDSCxDQUhEOzs7OztBQ0FBLElBQUksV0FBVyxRQUFRLGVBQVIsQ0FBZjtBQUNBLElBQUksUUFBUSxRQUFRLFlBQVIsQ0FBWjs7QUFFQSxJQUFJLGFBQWE7QUFDYjs7O0FBR0EsZUFBVyxTQUpFOztBQU1iOzs7QUFHQSxrQkFBYyxDQVREOztBQVdiLGNBWGEsd0JBV0E7QUFDVCxhQUFLLFNBQUwsR0FBaUIsSUFBSSxLQUFLLFNBQVQsRUFBakI7QUFDQSxZQUFJLGlCQUFpQixNQUFNLFVBQU4sQ0FBaUIsU0FBUyxRQUFULENBQWtCLFVBQW5DLENBQXJCO0FBQ0EsYUFBSyxZQUFMLEdBQW9CLGVBQWUsS0FBbkM7O0FBRUEsYUFBSyxTQUFMLENBQWUsQ0FBZixHQUFtQixTQUFTLHNCQUFULEdBQWtDLGVBQWUsTUFBakQsR0FBMEQsTUFBTSxVQUFOLENBQWlCLFNBQVMsUUFBVCxDQUFrQixPQUFuQyxFQUE0QyxNQUF6SDs7QUFFQSxjQUFNLGlDQUFOLENBQXdDLEtBQUssU0FBN0MsRUFBd0QsY0FBeEQ7O0FBRUEsZUFBTyxJQUFQO0FBQ0gsS0FyQlk7QUF1QmIsUUF2QmEsa0JBdUJO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QlEsNkNBZ0IwQixTQWhCMUIsRUFnQnFDLE9BaEJyQyxFQWdCOEM7QUFDbEQsWUFBSSxnQkFBZ0IsS0FBSyxzQkFBTCxDQUE0QixRQUFRLEtBQXBDLENBQXBCOztBQUVBLGFBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxhQUFwQixFQUFtQyxHQUFuQyxFQUF3QztBQUNwQyxnQkFBSSxPQUFPLElBQUksS0FBSyxNQUFULENBQWdCLE9BQWhCLENBQVg7QUFDQSxpQkFBSyxDQUFMLEdBQVMsS0FBSyxLQUFMLEdBQWEsQ0FBdEI7QUFDQSxzQkFBVSxRQUFWLENBQW1CLElBQW5CO0FBQ0g7QUFDSixLQXhCTztBQTBCUiwwQkExQlEsa0NBMEJlLFNBMUJmLEVBMEIwQjtBQUM5QixlQUFPLEtBQUssSUFBTCxDQUFVLE9BQU8sVUFBUCxHQUFvQixTQUE5QixJQUEyQyxDQUFsRDtBQUNIO0FBNUJPLENBQVo7O0FBZ0NBLE9BQU8sT0FBUCxHQUFpQixLQUFqQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBsZXQgZ2FtZSA9IHJlcXVpcmUoJy4vZ2FtZScpO1xyXG4gICAgZ2FtZS5zdGFydCgpO1xyXG59KSgpO1xyXG5cclxuIiwibGV0IHNldHRpbmdzID0gcmVxdWlyZSgnLi9zZXR0aW5ncy5qcycpO1xyXG5sZXQgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzLmpzJyk7XHJcblxyXG52YXIgYmFja2dyb3VuZCA9IHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNvbnRhaW5lciB0aGF0IHdpbGwgY29udGFpbiBhbGwgYmFja2dyb3VuZCB0aWxlcyBsaW5lZCB1cFxyXG4gICAgICovXHJcbiAgICBjb250YWluZXI6IHVuZGVmaW5lZCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB3aWR0aCBvZiBvbmUgYmFja2dyb3VuZCB0aWxlLCBpcyBuZWVkZWQgaW4gc29tZSBjYWxjdWxhdGlvbnMvY2hlY2tzXHJcbiAgICAgKi9cclxuICAgIHNreVRpbGVXaWR0aDogMCxcclxuXHJcbiAgICBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcbiAgICAgICAgbGV0IHNreVRpbGVUZXh0dXJlID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5iYWNrZ3JvdW5kKVxyXG4gICAgICAgIHRoaXMuc2t5VGlsZVdpZHRoID0gc2t5VGlsZVRleHR1cmUud2lkdGg7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnkgPSBzZXR0aW5ncy5wbGF5YWJsZUFyZWFBYm92ZVdhdGVyIC0gc2t5VGlsZVRleHR1cmUuaGVpZ2h0ICsgdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5jZWlsaW5nKS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIHV0aWxzLmZpbGxDb250YWluZXJXaXRoV2luZG93V2lkdGhUaWxlcyh0aGlzLmNvbnRhaW5lciwgc2t5VGlsZVRleHR1cmUpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcblxyXG4gICAgbG9vcCgpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci54ICs9IC1zZXR0aW5ncy5iYWNrZ3JvdW5kU3BlZWQ7XHJcblxyXG4gICAgICAgIC8vIEJ5IG1vdmluZyB0aGUgd2hvbGUgYmFja2dyb3VuZCBiYWNrIGF0IHRoZSByaWdodCBtb21lbnQgd2UgZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCB0cmFja2luZyBpbmRpdmlkdWFsIHRpbGVzXHJcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyLnggPD0gLXRoaXMuc2t5VGlsZVdpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnggPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGVsZW1lbnQgdGhhdCBuZWVkcyB0byBiZSByZW5kZXJlZFxyXG4gICAgICogQHJldHVybnMge0NvbnRhaW5lcn1cclxuICAgICAqL1xyXG4gICAgZ2V0RWxlbWVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGJhY2tncm91bmQ7XHJcbiIsImxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MnKTtcclxubGV0IHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxubGV0IGJpcmQgPSB7XHJcbiAgICBjb250YWluZXI6IHVuZGVmaW5lZCxcclxuICAgIGJpcmQ6IHVuZGVmaW5lZCxcclxuICAgIGJvdW5kaW5nQm94OiB1bmRlZmluZWQsXHJcbiAgICB2ZWxvY2l0eToge3g6IDAsIHk6IDB9LFxyXG4gICAgaXNCZWxvd1dhdGVyOiB0cnVlLFxyXG5cclxuICAgIGFuaW1hdGlvbkZyYW1lczogNCxcclxuXHJcbiAgICBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIGxldCBzcHJpdGVGcmFtZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYW5pbWF0aW9uRnJhbWVzOyBpKyspIHtcclxuICAgICAgICAgICAgc3ByaXRlRnJhbWVzLnB1c2godXRpbHMuZ2V0VGV4dHVyZSgnYmlyZF8nICsgaSArICAnLnBuZycpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5iaXJkID0gbmV3IFBJWEkuZXh0cmFzLkFuaW1hdGVkU3ByaXRlKHNwcml0ZUZyYW1lcyk7XHJcblxyXG4gICAgICAgIHRoaXMuYmlyZC5hbmltYXRpb25TcGVlZCA9IDAuMjtcclxuICAgICAgICB0aGlzLmJpcmQucGxheSgpO1xyXG5cclxuICAgICAgICB0aGlzLmJpcmQuYW5jaG9yLnggPSAwLjU7XHJcbiAgICAgICAgdGhpcy5iaXJkLmFuY2hvci55ID0gMC41O1xyXG5cclxuICAgICAgICB0aGlzLmJpcmQueSA9IDE1MDtcclxuICAgICAgICB0aGlzLmJpcmQueCA9IDEwMDtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5iaXJkKTtcclxuXHJcbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveCA9IHt4OiAwLCB5OiAwLCB3aWR0aDogMCwgaGVpZ2h0OiAwfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG5cclxuICAgIGxvb3AoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNCZWxvd1dhdGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVsb3dXYXRlcigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWJvdmVXYXRlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5iaXJkLnkgKz0gdGhpcy52ZWxvY2l0eS55O1xyXG4gICAgICAgIHRoaXMuYmlyZC5yb3RhdGlvbiA9IE1hdGguYXRhbjIodGhpcy52ZWxvY2l0eS55LCBzZXR0aW5ncy5mb3J3YXJkU3BlZWQpO1xyXG4gICAgfSxcclxuXHJcbiAgICBhYm92ZVdhdGVyKCkge1xyXG4gICAgICAgIHRoaXMudmVsb2NpdHkueSArPSBzZXR0aW5ncy5ncmF2aXR5O1xyXG4gICAgfSxcclxuXHJcbiAgICBiZWxvd1dhdGVyKCkge1xyXG4gICAgICAgIHRoaXMudmVsb2NpdHkueSAtPSBzZXR0aW5ncy53YXRlclB1c2hGb3JjZTtcclxuICAgIH0sXHJcblxyXG4gICAgZmxhcCgpIHtcclxuICAgICAgICBpZiAoc2V0dGluZ3Muc2hvdWxkQmlyZEZsYXBSZXNldFZlbG9jaXR5ICkge1xyXG4gICAgICAgICAgICB0aGlzLnZlbG9jaXR5LnkgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy52ZWxvY2l0eS55IC09IHNldHRpbmdzLmJpcmRGbGFwVmVsb2NpdHk7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldEVsZW1lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmlyZDtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0VG9wKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJpcmQueSAtIHRoaXMuYmlyZC5oZWlnaHQgLyAyO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRCb3R0b20oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmlyZC55ICsgdGhpcy5iaXJkLmhlaWdodCAvIDI7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldFJpZ2h0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJpcmQueCArIHRoaXMuYmlyZC53aWR0aCAvIDI7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldExlZnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmlyZC54IC0gdGhpcy5iaXJkLndpZHRoIC8gMjtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYmlyZDtcclxuIiwibGV0IHNldHVwID0gcmVxdWlyZSgnLi9zZXR1cCcpO1xyXG5sZXQgYmFja2dyb3VuZCA9IHJlcXVpcmUoJy4vYmFja2dyb3VuZCcpO1xyXG5sZXQgbGV2ZWwgPSByZXF1aXJlKCcuL2xldmVsJyk7XHJcbmxldCBiaXJkID0gcmVxdWlyZSgnLi9iaXJkJyk7XHJcblxyXG5sZXQgZ2FtZSA9IHtcclxuXHJcbiAgICByZW5kZXJlcjogdW5kZWZpbmVkLFxyXG4gICAgc3RhZ2U6IHVuZGVmaW5lZCxcclxuXHJcbiAgICBoYXNTdG9wcGVkOiBmYWxzZSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0IHRoZSBnYW1lXHJcbiAgICAgKi9cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgID0gc2V0dXAucmVuZGVyZXIoKTtcclxuICAgICAgICBzZXR1cC5sb2FkQXNzZXRzKHRoaXMuaW5pdGlhbGl6ZS5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGFsbCByZXF1aXJlZCBwYXJ0cyBvZiB0aGUgZ2FtZVxyXG4gICAgICovXHJcbiAgICBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIHRoaXMuc3RhZ2UgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuXHJcbiAgICAgICAgYmFja2dyb3VuZC5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgdGhpcy5zdGFnZS5hZGRDaGlsZChiYWNrZ3JvdW5kLmdldEVsZW1lbnQoKSk7XHJcblxyXG4gICAgICAgIGxldmVsLmluaXRpYWxpemUoKTtcclxuICAgICAgICB0aGlzLnN0YWdlLmFkZENoaWxkKGxldmVsLmdldEVsZW1lbnQoKSk7XHJcblxyXG4gICAgICAgIC8vIFNwYXduIHRoZSBwaXBlc1xyXG5cclxuICAgICAgICBiaXJkLmluaXRpYWxpemUoKTtcclxuICAgICAgICB0aGlzLnN0YWdlLmFkZENoaWxkKGJpcmQuZ2V0RWxlbWVudCgpKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5zdGFnZSk7XHJcblxyXG4gICAgICAgIC8vIFRvZG86IEFkZCBwcm9wZXIgaW5wdXQgaGFuZGxpbmdcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGJpcmQuZmxhcC5iaW5kKGJpcmQpLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIHRoaXMubG9vcCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBnYW1lIGxvb3BcclxuICAgICAqL1xyXG4gICAgbG9vcCgpIHtcclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5sb29wLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICAvLyBUaGlzIGJhc2ljYWxseSBjYXVzZXMgdGhlIGdhbWUgdG8gJ2ZyZWV6ZScuIFRoaXMgc2hvdWxkIGNoYW5nZSB0aGUgdXBkYXRpbmcgdG8gbWVudSBhbmQgc3VjaFxyXG4gICAgICAgIGlmICh0aGlzLmhhc1N0b3BwZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgYmFja2dyb3VuZC5sb29wKCk7XHJcbiAgICAgICAgbGV2ZWwubG9vcCgpO1xyXG4gICAgICAgIGJpcmQubG9vcCgpO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgYmlyZCBpcyBiZWxvdyBvciB1bmRlcm5lYXRoIHRoZSB3YXRlclxyXG4gICAgICAgIGlmIChiaXJkLmdldFRvcCgpIDwgbGV2ZWwuZ2V0V2F0ZXJMZXZlbCgpICYmIGJpcmQuaXNCZWxvd1dhdGVyKSB7XHJcbiAgICAgICAgICAgIGJpcmQuaXNCZWxvd1dhdGVyID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChiaXJkLmdldFRvcCgpID49IGxldmVsLmdldFdhdGVyTGV2ZWwoKSAmJiAhYmlyZC5pc0JlbG93V2F0ZXIpIHtcclxuICAgICAgICAgICAgYmlyZC5pc0JlbG93V2F0ZXIgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2VpbGluZyBjb2xsaXNpb25cclxuICAgICAgICBpZiAoYmlyZC5nZXRUb3AoKSA8PSBsZXZlbC5jZWlsaW5nU3ByaXRlLnkgKyBsZXZlbC5jZWlsaW5nU3ByaXRlLmhlaWdodCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3AoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChsZXZlbC5waXBlQ29sbGlzaW9uKGJpcmQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5zdGFnZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RvcCB0aGUgZ2FtZVxyXG4gICAgICovXHJcbiAgICBzdG9wKCkge1xyXG4gICAgICAgIHRoaXMuaGFzU3RvcHBlZCA9IHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29udGludWUgdGhlIGdhbWUgYWZ0ZXIgc3RvcHBpbmdcclxuICAgICAqIE1ha2Ugc3VyZSBiaXJkIGlzIG5vIGxvbmdlciBjb2xsaWRpbmcgb3IgaXQnbGwgc3RvcCBhZ2FpbiBpbnN0YW50bHlcclxuICAgICAqL1xyXG4gICAgcGxheSgpIHtcclxuICAgICAgICB0aGlzLmhhc1N0b3BwZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdhbWU7XHJcbiIsImxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MnKTtcclxubGV0IHV0aWxzID0gcmVxdWlyZSgnLi91dGlscy5qcycpO1xyXG5cclxuY29uc3QgcGlwZUZhY2luZyA9IHtcclxuICAgICdVUCc6IDEsXHJcbiAgICAnRE9XTic6IC0xLFxyXG59O1xyXG5cclxubGV0IGxldmVsID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY29udGFpbmVyIHRoYXQgd2lsbCBjb250YWluIGV2ZXJ5dGhpbmcgdGhhdCBuZWVkcyB0byBiZSBtb3ZlZCB0b3dhcmRzIHRoZSBwbGF5ZXJcclxuICAgICAqL1xyXG4gICAgY29udGFpbmVyOiB1bmRlZmluZWQsXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjb250YWluZXIgdGhhdCB3aWxsIGNvbnRhaW4gYWxsIGZsb29yIHRpbGVzXHJcbiAgICAgKi9cclxuICAgIGZsb29yU3ByaXRlOiB1bmRlZmluZWQsXHJcblxyXG4gICAgY2VpbGluZ1Nwcml0ZTogdW5kZWZpbmVkLFxyXG5cclxuICAgIHBpcGVzQ29udGFpbmVyOiB1bmRlZmluZWQsXHJcbiAgICBwaXBlczogW10sXHJcblxyXG4gICAgcGlwZVRleHR1cmU6IHVuZGVmaW5lZCxcclxuICAgIHBpcGVUb3BUZXh0dXJlOiB1bmRlZmluZWQsXHJcbiAgICBwaXBlQm90dG9tVGV4dHVyZTogdW5kZWZpbmVkLFxyXG5cclxuICAgIGZpcnN0UGlwZUZhY2luZzogcGlwZUZhY2luZy5VUCxcclxuXHJcbiAgICBuZXh0UGlwZUZhY2luZzogMCxcclxuICAgIHBsYWNlZFBpcGVzQ291bnQ6IDAsXHJcblxyXG4gICAgcGlwZUdhcFNpemU6IDEwMCxcclxuXHJcbiAgICBwaXBlRGlzdGFuY2U6IDMwMCxcclxuICAgIGZpcnN0UGlwZURpc3RhbmNlOiA4MDAsXHJcblxyXG4gICAgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9jcmVhdGVDZWlsaW5nKCkpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX2NyZWF0ZUZsb29yKCkpO1xyXG5cclxuICAgICAgICAvLyBQaXBlcyBzdHVmZlxyXG4gICAgICAgIHRoaXMubmV4dFBpcGVGYWNpbmcgPSB0aGlzLmZpcnN0UGlwZUZhY2luZztcclxuICAgICAgICB0aGlzLnBpcGVUZXh0dXJlID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5waXBlKTtcclxuICAgICAgICB0aGlzLnBpcGVUb3BUZXh0dXJlID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5waXBlVXApO1xyXG4gICAgICAgIHRoaXMucGlwZUJvdHRvbVRleHR1cmUgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLnBpcGVEb3duKTtcclxuXHJcbiAgICAgICAgdGhpcy5waXBlc0NvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbml0aWFsUGlwZXMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5waXBlc0NvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuXHJcbiAgICBsb29wKCkge1xyXG4gICAgICAgIHRoaXMuY2VpbGluZ1Nwcml0ZS50aWxlUG9zaXRpb24ueCArPSAtc2V0dGluZ3MuZm9yd2FyZFNwZWVkO1xyXG4gICAgICAgIHRoaXMuZmxvb3JTcHJpdGUudGlsZVBvc2l0aW9uLnggKz0gLXNldHRpbmdzLmZvcndhcmRTcGVlZDtcclxuXHJcbiAgICAgICAgLy8gUGlwZXMgc3R1ZmZcclxuICAgICAgICB0aGlzLnBpcGVzQ29udGFpbmVyLnggKz0gLXNldHRpbmdzLmZvcndhcmRTcGVlZDtcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIHBpcGVzIHdoZW4gdGhleSdyZSBvZmYgc2NyZWVuXHJcbiAgICAgICAgaWYgKHRoaXMucGlwZXMubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGlwZXNDb250YWluZXIueCA8IC10aGlzLnBpcGVzWzBdLnggLSB0aGlzLnBpcGVUZXh0dXJlLndpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBpcGVzQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMucGlwZXNbMF0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5waXBlcy5zaGlmdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYWNlTmV3UGlwZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSB5IHBvc2l0aW9uIG9mIHRoZSB3YXRlclxyXG4gICAgICovXHJcbiAgICBnZXRXYXRlckxldmVsKCkge1xyXG4gICAgICAgIHJldHVybiBzZXR0aW5ncy5wbGF5YWJsZUFyZWFBYm92ZVdhdGVyO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgZWxlbWVudCB0byByZW5kZXJcclxuICAgICAqIEByZXR1cm5zIHt1bmRlZmluZWR8Kn1cclxuICAgICAqL1xyXG4gICAgZ2V0RWxlbWVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIHBpcGVDb2xsaXNpb24oYmlyZCkge1xyXG5cclxuICAgICAgICAvLyBXZSB3aWxsIGNoZWNrIGlmIHRoZSBiaXJkIGlzIGNvbGxpZGluZyB3aXRoIHRoZSBmaXJzdCBwaXBlXHJcbiAgICAgICAgLy8gVGhlIGJpcmQgY2FuJ3QgcG9zc2libHkgaGl0IGFueSBvdGhlciBwaXBlc1xyXG5cclxuICAgICAgICAvLyBXZSBvbmx5IG5lZWQgdG8gY29sbGlkZSB3aXRoIHRoZSBsZWZ0IHNpZGUgb2YgdGhlIHBpcGVzIGFuZCB0aGUgdG9wL2JvdHRvbSBwaWVjZXNcclxuICAgICAgICAvLyBXZSBrbm93IGhvdyBmYXIgdGhlIHBpcGUgY29udGFpbmVyIGhhcyBtb3ZlZCB0byB0aGUgcmlnaHQsIHdlIGNhbiB1c2UgdGhpcyB0byBnZXQgdGhlIGxlZnQgc2lkZVxyXG5cclxuICAgICAgICBsZXQgbGVmdCA9IHRoaXMucGlwZXNDb250YWluZXIueCArIHRoaXMucGlwZXNbMF0ueDtcclxuICAgICAgICBsZXQgcmlnaHQgPSBsZWZ0ICsgdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5waXBlKS53aWR0aDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBUaGUgYmlyZCBpcyBpbiB0aGUgbGVmdC9yaWdodCBib3VuZGFyaWVzIG9mIHRoZSBmaXJzdCBwaXBlXHJcbiAgICAgICAgaWYgKGJpcmQuZ2V0UmlnaHQoKSA+IGxlZnQgJiYgYmlyZC5nZXRMZWZ0KCkgPCByaWdodCkge1xyXG5cclxuICAgICAgICAgICAgLy8gVGhlIGJpcmQgaXMgYWJvdmUgdGhlIGdhcCFcclxuICAgICAgICAgICAgaWYgKGJpcmQuZ2V0VG9wKCkgPCB0aGlzLnBpcGVzWzBdLmdhcC50b3AgfHwgYmlyZC5nZXRCb3R0b20oKSA+IHRoaXMucGlwZXNbMF0uZ2FwLmJvdHRvbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sXHJcblxyXG4gICAgX2NyZWF0ZUNlaWxpbmcoKSB7XHJcbiAgICAgICAgbGV0IGNlaWxpbmdUZXh0dXJlID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5jZWlsaW5nKTtcclxuXHJcbiAgICAgICAgdGhpcy5jZWlsaW5nU3ByaXRlID0gbmV3IFBJWEkuZXh0cmFzLlRpbGluZ1Nwcml0ZShjZWlsaW5nVGV4dHVyZSwgd2luZG93LmlubmVyV2lkdGgsIGNlaWxpbmdUZXh0dXJlLmhlaWdodCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmNlaWxpbmdTcHJpdGU7XHJcbiAgICB9LFxyXG5cclxuICAgIF9jcmVhdGVGbG9vcigpIHtcclxuICAgICAgICBsZXQgZmxvb3JUZXh0dXJlID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5mbG9vcik7XHJcblxyXG4gICAgICAgIHRoaXMuZmxvb3JTcHJpdGUgPSBuZXcgUElYSS5leHRyYXMuVGlsaW5nU3ByaXRlKGZsb29yVGV4dHVyZSwgd2luZG93LmlubmVyV2lkdGgsIGZsb29yVGV4dHVyZS5oZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuZmxvb3JTcHJpdGUueSA9IHNldHRpbmdzLnBsYXlhYmxlQXJlYUFib3ZlV2F0ZXIgKyBzZXR0aW5ncy5wbGF5YWJsZUFyZWFCZWxvd1dhdGVyICsgdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5jZWlsaW5nKS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmZsb29yU3ByaXRlO1xyXG4gICAgfSxcclxuXHJcbiAgICBfaW5pdGlhbFBpcGVzKCkge1xyXG4gICAgICAgIGxldCBzdGFydGluZ1BpcGVzQ291bnQgPSBNYXRoLmNlaWwod2luZG93LmlubmVyV2lkdGggLyB0aGlzLnBpcGVEaXN0YW5jZSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhcnRpbmdQaXBlc0NvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHBpcGUgPSB0aGlzLl9jcmVhdGVQaXBlKHRoaXMuX2dldFJhbmRvbVBpcGVIZWlnaHQoKSwgdGhpcy5uZXh0UGlwZUZhY2luZyk7XHJcbiAgICAgICAgICAgIHBpcGUueCA9IHRoaXMuZmlyc3RQaXBlRGlzdGFuY2UgKyB0aGlzLnBpcGVEaXN0YW5jZSAqIGk7XHJcbiAgICAgICAgICAgIHRoaXMucGlwZXNDb250YWluZXIuYWRkQ2hpbGQocGlwZSk7XHJcbiAgICAgICAgICAgIHRoaXMucGlwZXMucHVzaChwaXBlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubmV4dFBpcGVGYWNpbmcgKj0gLTE7XHJcbiAgICAgICAgICAgIHRoaXMucGxhY2VkUGlwZXNDb3VudCsrO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgX3BsYWNlTmV3UGlwZSgpIHtcclxuICAgICAgICAvLyBXZSBuZWVkIHRvdGFsIHBpcGUgYW1vdW50LCB0byBjYWxjdWxhdGUgcG9zaXRpb24gb2YgbmV3IG9uZVxyXG4gICAgICAgIGxldCBwaXBlID0gdGhpcy5fY3JlYXRlUGlwZSh0aGlzLl9nZXRSYW5kb21QaXBlSGVpZ2h0KCksIHRoaXMubmV4dFBpcGVGYWNpbmcpO1xyXG4gICAgICAgIHBpcGUueCA9IHRoaXMucGxhY2VkUGlwZXNDb3VudCAqIHRoaXMucGlwZURpc3RhbmNlICsgdGhpcy5maXJzdFBpcGVEaXN0YW5jZTtcclxuICAgICAgICB0aGlzLnBpcGVzQ29udGFpbmVyLmFkZENoaWxkKHBpcGUpO1xyXG4gICAgICAgIHRoaXMucGlwZXMucHVzaChwaXBlKTtcclxuXHJcbiAgICAgICAgdGhpcy5uZXh0UGlwZUZhY2luZyAqPSAtMTtcclxuICAgICAgICB0aGlzLnBsYWNlZFBpcGVzQ291bnQrKztcclxuICAgIH0sXHJcblxyXG4gICAgX2NyZWF0ZVBpcGUoaGVpZ2h0LCBkaXJlY3Rpb24pIHtcclxuICAgICAgICBsZXQgY29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIGxldCB0b3RhbFBsYXlIZWlnaHQgPSBzZXR0aW5ncy5wbGF5YWJsZUFyZWFBYm92ZVdhdGVyICsgc2V0dGluZ3MucGxheWFibGVBcmVhQmVsb3dXYXRlcjtcclxuXHJcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gcGlwZUZhY2luZy5VUCkge1xyXG4gICAgICAgICAgICBjb250YWluZXIuYWRkQ2hpbGQodGhpcy5fY3JlYXRlVXBGYWNpbmdQaXBlKGhlaWdodCkpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSBwaXBlRmFjaW5nLkRPV04pIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX2NyZWF0ZURvd25GYWNpbmdQaXBlKGhlaWdodCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBzcGFjZSBmb3IgcGlwZSBpbiBvcHBvc2l0ZSBkaXJlY3Rpb24gdG8gY29tcGxldGUgdGhlIGdhcFxyXG4gICAgICAgIGlmIChoZWlnaHQgKyB0aGlzLnBpcGVHYXBTaXplIDwgdG90YWxQbGF5SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGNhbiBmaXQgYW5vdGhlciBwaXBlIG9wcG9zaXRlIHRvIGl0XHJcbiAgICAgICAgICAgIGxldCBvcHBvc2l0ZVBpcGVIZWlnaHQgPSB0b3RhbFBsYXlIZWlnaHQgLSBoZWlnaHQgLSB0aGlzLnBpcGVHYXBTaXplO1xyXG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBwaXBlRmFjaW5nLlVQKVxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX2NyZWF0ZURvd25GYWNpbmdQaXBlKG9wcG9zaXRlUGlwZUhlaWdodCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gcGlwZUZhY2luZy5ET1dOKVxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX2NyZWF0ZVVwRmFjaW5nUGlwZShvcHBvc2l0ZVBpcGVIZWlnaHQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN0b3JlIHRoZSBpbmZvcm1hdGlvbiBvZiB0aGUgZ2FwIHBvc2l0aW9uIGluIHRoZSBjb250YWluZXIgb2JqZWN0IGZvciBlYXNpZXIgY29sbGlzaW9uIGNoZWNrc1xyXG4gICAgICAgIGxldCB0b3AgPSAoZGlyZWN0aW9uID09PSBwaXBlRmFjaW5nLlVQID8gaGVpZ2h0IC0gdGhpcy5waXBlR2FwU2l6ZSA6IGhlaWdodCkgKyB0aGlzLmNlaWxpbmdTcHJpdGUuaGVpZ2h0O1xyXG4gICAgICAgIGxldCBib3R0b20gPSAoZGlyZWN0aW9uID09PSBwaXBlRmFjaW5nLlVQID8gaGVpZ2h0IDogaGVpZ2h0ICsgdGhpcy5waXBlR2FwU2l6ZSkgKyB0aGlzLmNlaWxpbmdTcHJpdGUuaGVpZ2h0O1xyXG4gICAgICAgIGNvbnRhaW5lci5nYXAgPSB7IHRvcCwgYm90dG9tIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcclxuICAgIH0sXHJcblxyXG4gICAgX2NyZWF0ZVVwRmFjaW5nUGlwZShoZWlnaHQpIHtcclxuICAgICAgICBsZXQgY29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIGxldCBwaXBlVG9wID0gbmV3IFBJWEkuU3ByaXRlKHRoaXMucGlwZVRvcFRleHR1cmUpO1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDaGlsZChwaXBlVG9wKTtcclxuXHJcbiAgICAgICAgbGV0IHBpcGVQYXJ0SGVpZ2h0ID0gaGVpZ2h0IC0gdGhpcy5waXBlVG9wVGV4dHVyZS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGxldCBwaXBlID0gbmV3IFBJWEkuZXh0cmFzLlRpbGluZ1Nwcml0ZSh0aGlzLnBpcGVUZXh0dXJlLCB0aGlzLnBpcGVUZXh0dXJlLndpZHRoLCBwaXBlUGFydEhlaWdodCk7XHJcbiAgICAgICAgcGlwZS55ID0gdGhpcy5waXBlVG9wVGV4dHVyZS5oZWlnaHQ7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZENoaWxkKHBpcGUpO1xyXG5cclxuICAgICAgICAvLyBQbGFjZSBwaXBlIG9uIHRoZSBib3R0b21cclxuICAgICAgICBjb250YWluZXIueSA9IHNldHRpbmdzLnBsYXlhYmxlQXJlYUFib3ZlV2F0ZXIgKyBzZXR0aW5ncy5wbGF5YWJsZUFyZWFCZWxvd1dhdGVyIC0gaGVpZ2h0ICsgdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5jZWlsaW5nKS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIF9jcmVhdGVEb3duRmFjaW5nUGlwZShoZWlnaHQpIHtcclxuICAgICAgICBsZXQgY29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIGxldCBwaXBlUGFydEhlaWdodCA9IGhlaWdodCAtIHRoaXMucGlwZUJvdHRvbVRleHR1cmUuaGVpZ2h0O1xyXG5cclxuICAgICAgICBsZXQgcGlwZSA9IG5ldyBQSVhJLmV4dHJhcy5UaWxpbmdTcHJpdGUodGhpcy5waXBlVGV4dHVyZSwgdGhpcy5waXBlVGV4dHVyZS53aWR0aCwgcGlwZVBhcnRIZWlnaHQpO1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDaGlsZChwaXBlKTtcclxuXHJcbiAgICAgICAgbGV0IHBpcGVCb3R0b20gPSBuZXcgUElYSS5TcHJpdGUodGhpcy5waXBlQm90dG9tVGV4dHVyZSk7XHJcbiAgICAgICAgcGlwZUJvdHRvbS55ID0gcGlwZVBhcnRIZWlnaHQ7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZENoaWxkKHBpcGVCb3R0b20pO1xyXG5cclxuICAgICAgICAvLyBXZSBjYW4gcGxhY2UgaXQgYWdhaW5zdCB0aGUgY2VpbGluZ1xyXG4gICAgICAgIGNvbnRhaW5lci55ID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5jZWlsaW5nKS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIF9nZXRSYW5kb21QaXBlSGVpZ2h0KCkge1xyXG4gICAgICAgIHJldHVybiAyODA7XHJcbiAgICB9LFxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBsZXZlbDtcclxuIiwiY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBsb2NhdGlvbiBvZiB0aGUgYXNzZXRzIGpzb25cclxuICAgICAqL1xyXG4gICAgYXNzZXRGaWxlOiBcImFzc2V0cy9hc3NldHMuanNvblwiLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGFyZWEgdGhhdCBpcyBhdmFpbGFibGUgYWJvdmUgdGhlIHdhdGVyXHJcbiAgICAgKi9cclxuICAgIHBsYXlhYmxlQXJlYUFib3ZlV2F0ZXI6IDI4MCxcclxuXHJcbiAgICBwbGF5YWJsZUFyZWFCZWxvd1dhdGVyOiAyODAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3BlZWQgYXQgd2hpY2ggb2JqZWN0cyBtb3ZlIHRvd2FyZHMgdGhlIHBsYXllclxyXG4gICAgICovXHJcbiAgICBmb3J3YXJkU3BlZWQ6IDUsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3BlZWQgYXQgd2hpY2ggdGhlIGJhY2tncm91bmQgbW92ZXNcclxuICAgICAqL1xyXG4gICAgYmFja2dyb3VuZFNwZWVkOiAxLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGFtb3VudCBvZiBncmF2aXR5IGFkZGVkIHRvIHRoZSB2ZWxvY2l0eSBvZiB0aGUgcGxheWVyIHdoaWxlIGFib3ZlIHRoZSB3YXRlclxyXG4gICAgICovXHJcbiAgICBncmF2aXR5OiAwLjMsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYW1vdW50IG9mIHVwd2FyZCBmb3JjZSBhZGRlZCB0byB0aGUgdmVsb2NpdHkgb2YgdGhlIHBsYXllciB3aGlsZSBiZWxvdyB0aGUgd2F0ZXJcclxuICAgICAqL1xyXG4gICAgd2F0ZXJQdXNoRm9yY2U6IDAuMyxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhbW91bnQgb2YgdXB3YXJkIHZlbG9jaXR5IGlzIGFkZGVkIHRvIHRoZSBwbGF5ZXIgb24gJ2ZsYXBwaW5nJy5cclxuICAgICAqL1xyXG4gICAgYmlyZEZsYXBWZWxvY2l0eTogNCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIElmIHZlcnRpY2FsIHZlbG9jaXR5IG9mIHRoZSBwbGF5ZXIgc2hvdWxkIGJlIHJlc2V0IGJlZm9yZSBhcHBseWluZyB0aGUgZmxhcCB2ZWxvY2l0eVxyXG4gICAgICovXHJcbiAgICBzaG91bGRCaXJkRmxhcFJlc2V0VmVsb2NpdHk6IGZhbHNlLFxyXG5cclxuICAgIHRleHR1cmVzOiB7XHJcbiAgICAgICAgJ2JhY2tncm91bmQnOiAnc2t5LnBuZycsXHJcbiAgICAgICAgJ2Zsb29yJzogJ2xhbmQucG5nJyxcclxuICAgICAgICAnY2VpbGluZyc6ICdjZWlsaW5nLnBuZycsXHJcbiAgICAgICAgJ3BpcGUnOiAncGlwZS5wbmcnLFxyXG4gICAgICAgICdwaXBlVXAnOiAncGlwZS11cC5wbmcnLFxyXG4gICAgICAgICdwaXBlRG93bic6ICdwaXBlLWRvd24ucG5nJyxcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gc2V0dGluZ3M7XHJcbiIsImxldCBzZXR1cCA9IHtcclxuICAgIHJlbmRlcmVyKCkge1xyXG4gICAgICAgIGxldCByZW5kZXJlciA9IFBJWEkuYXV0b0RldGVjdFJlbmRlcmVyKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xyXG4gICAgICAgIHJlbmRlcmVyLnZpZXcuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgICAgcmVuZGVyZXIudmlldy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIHJlbmRlcmVyLmJhY2tncm91bmRDb2xvciA9IDB4NGVjMGNhO1xyXG4gICAgICAgIHJlbmRlcmVyLmF1dG9SZXNpemUgPSB0cnVlO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHJlbmRlcmVyLnZpZXcpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVuZGVyZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIGxvYWRBc3NldHMoY2FsbGJhY2spIHtcclxuICAgICAgICBQSVhJLmxvYWRlci5hZGQoXCJhc3NldHMvYXNzZXRzLmpzb25cIikubG9hZChjYWxsYmFjayk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHNldHVwO1xyXG4iLCJsZXQgc2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldHRpbmdzJyk7XHJcblxyXG5sZXQgdXRpbHMgPSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSB0ZXh0dXJlIGZyb20gdGhlIHBpeGkgbG9hZGVyIGJ5IG5hbWVcclxuICAgICAqIEBwYXJhbSBuYW1lIHRleHR1cmUgbmFtZSwgd2l0aCBleHRlbnNpb25cclxuICAgICAqIEByZXR1cm5zIHsqfFBJWEkuVGV4dHVyZXxGcmFtZU9iamVjdH1cclxuICAgICAqL1xyXG4gICAgZ2V0VGV4dHVyZShuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIFBJWEkubG9hZGVyLnJlc291cmNlc1tzZXR0aW5ncy5hc3NldEZpbGVdLnRleHR1cmVzW25hbWVdXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlsbCBhIGdpdmVuIHBpeGkgY29udGFpbmVyIGFuZCBmaWxsIGl0IHdpdGggdmVydGljYWxseSBhbGlnbmVkIHRpbGVzIGZpdHRpbmcgd2hvbGUgd2luZG93IHdpZHRoXHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyXHJcbiAgICAgKiBAcGFyYW0gdGV4dHVyZVxyXG4gICAgICovXHJcbiAgICBmaWxsQ29udGFpbmVyV2l0aFdpbmRvd1dpZHRoVGlsZXMoY29udGFpbmVyLCB0ZXh0dXJlKSB7XHJcbiAgICAgICAgbGV0IHJlcXVpcmVkVGlsZXMgPSB0aGlzLl9nZXRSZXF1aXJlZFdpZHRoVGlsZXModGV4dHVyZS53aWR0aCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVxdWlyZWRUaWxlczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB0aWxlID0gbmV3IFBJWEkuU3ByaXRlKHRleHR1cmUpO1xyXG4gICAgICAgICAgICB0aWxlLnggPSB0aWxlLndpZHRoICogaTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENoaWxkKHRpbGUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgX2dldFJlcXVpcmVkV2lkdGhUaWxlcyh0aWxlV2lkdGgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKHdpbmRvdy5pbm5lcldpZHRoIC8gdGlsZVdpZHRoKSArIDE7XHJcbiAgICB9XHJcblxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB1dGlscztcclxuIl19"}