{"version":3,"sources":["e:/Code/pixi/node_modules/browser-pack/_prelude.js","js/main.js","e:/Code/pixi/js/audioPlayer.js","e:/Code/pixi/js/background.js","e:/Code/pixi/js/bird.js","e:/Code/pixi/js/game.js","e:/Code/pixi/js/gameOverScreen.js","e:/Code/pixi/js/level.js","e:/Code/pixi/js/settings.js","e:/Code/pixi/js/setup.js","e:/Code/pixi/js/utils.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","let game = require('./game');\r\n\r\n(function() {\r\n    game.start();\r\n})();\r\n\r\n","let settings = require('./settings');\r\n\r\nlet audioPlayer = {\r\n\r\n    audioFragments: {\r\n        'FLAP': 'sfx_wing.ogg',\r\n        'HIT': 'sfx_hit.ogg',\r\n        'DIE': 'sfx_die.ogg',\r\n        'POINT': 'sfx_point.ogg',\r\n        'SWIM': 'sfx_blub.ogg',\r\n        'ENTER_WATER': 'sfx_water-enter.ogg',\r\n        'EXIT_WATER': 'sfx_water-exit.ogg',\r\n    },\r\n\r\n    _audio: [],\r\n\r\n    init() {\r\n        // Todo: Maybe we need to wait with starting the game until these have been loaded\r\n        for (let key in this.audioFragments) {\r\n            this._audio[this.audioFragments[key]] = new Audio(settings.soundsPath + this.audioFragments[key]);\r\n        }\r\n    },\r\n\r\n    play(audioFragment, callback) {\r\n        if (this._audio[audioFragment].currentTime > 0) {\r\n            this._audio[audioFragment].currentTime = 0;\r\n        }\r\n\r\n        this._audio[audioFragment].play();\r\n\r\n        if (typeof callback === 'function')\r\n            setTimeout(callback, this._audio[audioFragment].duration * 1000);\r\n    }\r\n};\r\n\r\naudioPlayer.init();\r\n\r\n\r\nmodule.exports = audioPlayer;\r\n","let settings = require('./settings.js');\r\nlet utils = require('./utils.js');\r\n\r\nvar background = {\r\n    /**\r\n     * The container that will contain all background tiles lined up\r\n     */\r\n    backgroundSprite: undefined,\r\n\r\n    /**\r\n     * Initialize the background\r\n     * @returns {PIXI.Sprite}\r\n     */\r\n    initialize() {\r\n        let skyTileTexture = utils.getTexture(settings.textures.background);\r\n        this.backgroundSprite = new PIXI.extras.TilingSprite(skyTileTexture, settings.gameWidth, skyTileTexture.height);\r\n        this.backgroundSprite.y = this._getBackgroundSpriteYPosition(skyTileTexture.height);\r\n\r\n        return this.backgroundSprite;\r\n    },\r\n\r\n    /**\r\n     * Update loop of the background\r\n     */\r\n    loop() {\r\n        this.backgroundSprite.tilePosition.x += -settings.backgroundSpeed;\r\n    },\r\n\r\n    /**\r\n     * Get the y position for the background sprite\r\n     * @returns {Number}\r\n     * @private\r\n     */\r\n    _getBackgroundSpriteYPosition(height) {\r\n        return settings.playableAreaAboveWater - height + utils.getTexture(settings.textures.ceiling).height;\r\n    }\r\n};\r\n\r\nmodule.exports = background;\r\n","let settings = require('./settings');\r\nlet utils = require('./utils');\r\n\r\nlet audioPlayer = require('./audioPlayer');\r\n\r\nlet bird = {\r\n    container: undefined,\r\n    bird: undefined,\r\n    boundingBox: undefined,\r\n    velocity: {x: 0, y: 0},\r\n    isBelowWater: false,\r\n\r\n    animationFrames: 4,\r\n\r\n    initialize() {\r\n        this.container = new PIXI.Container();\r\n\r\n        let spriteFrames = [];\r\n        for (let i = 0; i < this.animationFrames; i++) {\r\n            spriteFrames.push(utils.getTexture('bird_' + i +  '.png'));\r\n        }\r\n        this.bird = new PIXI.extras.AnimatedSprite(spriteFrames);\r\n\r\n        this.bird.animationSpeed = 0.2;\r\n        this.bird.play();\r\n\r\n        this.bird.anchor.x = 0.5;\r\n        this.bird.anchor.y = 0.5;\r\n\r\n        this.bird.y = 150;\r\n        this.bird.x = 100;\r\n\r\n        this.container.addChild(this.bird);\r\n\r\n        this.boundingBox = {x: 0, y: 0, width: 0, height: 0};\r\n\r\n        return this.container;\r\n    },\r\n\r\n    loop() {\r\n        if (this.isBelowWater) {\r\n            this.belowWater();\r\n        } else {\r\n            this.aboveWater();\r\n        }\r\n\r\n        this.bird.y += this.velocity.y;\r\n        this.bird.rotation = Math.atan2(this.velocity.y, settings.forwardSpeed);\r\n    },\r\n\r\n    aboveWater() {\r\n        this.velocity.y += settings.gravity;\r\n    },\r\n\r\n    belowWater() {\r\n        this.velocity.y -= settings.waterPushForce;\r\n    },\r\n\r\n    flap() {\r\n        if (settings.shouldBirdFlapResetVelocity ) {\r\n            this.velocity.y = 0;\r\n        }\r\n\r\n        if (this.isBelowWater) {\r\n            this._swim();\r\n        } else {\r\n            this._flap();\r\n        }\r\n    },\r\n\r\n    reset() {\r\n        this.bird.y = 150;\r\n        this.bird.x = 100;\r\n        this.velocity.x = 0;\r\n        this.velocity.y = 0;\r\n    },\r\n\r\n    getTop() {\r\n        return this.bird.y - this.bird.height / 2;\r\n    },\r\n\r\n    getBottom() {\r\n        return this.bird.y + this.bird.height / 2;\r\n    },\r\n\r\n    getRight() {\r\n        return this.bird.x + this.bird.width / 2;\r\n    },\r\n\r\n    getLeft() {\r\n        return this.bird.x - this.bird.width / 2;\r\n    },\r\n\r\n    enterWater() {\r\n        if (this.isBelowWater) return;\r\n        this.isBelowWater = true;\r\n\r\n        audioPlayer.play(audioPlayer.audioFragments.ENTER_WATER);\r\n    },\r\n\r\n    leaveWater() {\r\n        if (!this.isBelowWater) return;\r\n        this.isBelowWater = false;\r\n\r\n        audioPlayer.play(audioPlayer.audioFragments.EXIT_WATER);\r\n    },\r\n\r\n    _flap() {\r\n        audioPlayer.play(audioPlayer.audioFragments.FLAP);\r\n\r\n        this.velocity.y -= settings.birdFlapVelocity;\r\n    },\r\n\r\n    _swim() {\r\n        audioPlayer.play(audioPlayer.audioFragments.SWIM);\r\n\r\n        this.velocity.y += settings.birdFlapVelocity;\r\n    }\r\n};\r\n\r\nmodule.exports = bird;\r\n","let setup = require('./setup');\r\n\r\nlet gameOverScreen = require('./gameOverScreen');\r\nlet audioPlayer = require('./audioPlayer');\r\nlet settings = require('./settings');\r\nlet utils = require('./utils');\r\n\r\nlet background = require('./background');\r\nlet level = require('./level');\r\nlet bird = require('./bird');\r\n\r\nlet game = {\r\n    renderer: undefined,\r\n    stage: undefined,\r\n\r\n    /**\r\n     * Whether the game (loop) has stopped or not\r\n     */\r\n    hasStopped: false,\r\n\r\n    /**\r\n     * Start the game\r\n     */\r\n    start() {\r\n        this.renderer = setup.renderer();\r\n        setup.loadAssets(this.initialize.bind(this));\r\n    },\r\n\r\n    /**\r\n     * Initialize all required parts of the game\r\n     */\r\n    initialize() {\r\n        this.stage = new PIXI.Container();\r\n\r\n        this.stage.addChild(background.initialize());\r\n        this.stage.addChild(level.initialize());\r\n        this.stage.addChild(bird.initialize());\r\n\r\n        this.stage.addChild(this._getWaterSprite());\r\n\r\n        let onRestartClick = this._clickRestart.bind(this);\r\n        this.stage.addChild(gameOverScreen.initialize(onRestartClick));\r\n\r\n        this.renderer.render(this.stage);\r\n\r\n        this._setEvents();\r\n\r\n        this.loop();\r\n    },\r\n\r\n    /**\r\n     * The game loop\r\n     */\r\n    loop() {\r\n        requestAnimationFrame(this.loop.bind(this));\r\n\r\n        // This causes the game loop to freeze. Is used when the players hits something and a menu is shown to _restart\r\n        if (this.hasStopped) return;\r\n\r\n        background.loop();\r\n        level.loop();\r\n        bird.loop();\r\n\r\n        this._handleCollision();\r\n\r\n        this.renderer.render(this.stage);\r\n    },\r\n\r\n    /**\r\n     * Trigger game over happening\r\n     * @private\r\n     */\r\n    _gameOver() {\r\n        this._stop();\r\n        this._playDieAudio();\r\n\r\n        // Show game over screen\r\n        gameOverScreen.updateScores(level.score, level.bestScore);\r\n        gameOverScreen.show();\r\n    },\r\n\r\n    /**\r\n     * Function to be called when _restart is clicked from the game over screen\r\n     * @private\r\n     */\r\n    _clickRestart() {\r\n        this._restart();\r\n        gameOverScreen.hide();\r\n    },\r\n\r\n    /**\r\n     * Stop the game\r\n     * @private\r\n     */\r\n    _stop() {\r\n        this.hasStopped = true;\r\n    },\r\n\r\n    /**\r\n     * Continue the game after stopping\r\n     * @private\r\n     */\r\n    _restart() {\r\n        level.reset();\r\n        bird.reset();\r\n\r\n        this.hasStopped = false;\r\n    },\r\n\r\n    /**\r\n     * Handle collision between the bird and 'obstacles'\r\n     * @private\r\n     */\r\n    _handleCollision() {\r\n        // Check if the bird is below or underneath the water\r\n        if (bird.getTop() < level.getWaterLevel() && bird.isBelowWater) {\r\n            bird.leaveWater();\r\n        } else if (bird.getTop() >= level.getWaterLevel() && !bird.isBelowWater) {\r\n            bird.enterWater();\r\n        }\r\n\r\n        // Ceiling collision\r\n        if (bird.getTop() <= level.ceilingSprite.y + level.ceilingSprite.height) {\r\n            this.gameOver();\r\n        }\r\n\r\n        // Floor collision\r\n        if (bird.getBottom() >= level.ceilingSprite.y + level.ceilingSprite.height + settings.playableAreaAboveWater + settings.playableAreaBelowWater) {\r\n            this.gameOver();\r\n        }\r\n\r\n        if (level.pipeCollision(bird)) {\r\n            this.gameOver();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Play the audio for when the player dies\r\n     * @private\r\n     */\r\n    _playDieAudio() {\r\n        audioPlayer.play(audioPlayer.audioFragments.HIT,\r\n            audioPlayer.play.bind(audioPlayer, audioPlayer.audioFragments.DIE)\r\n        );\r\n    },\r\n\r\n    /**\r\n     * Set the required events for interacting with the game\r\n     * @private\r\n     */\r\n    _setEvents() {\r\n        window.addEventListener(\"keyup\", (e) => {\r\n            if (e.keyCode != 32) return; // Not spacebar\r\n            if (this.hasStopped) {\r\n                this._clickRestart();\r\n                return;\r\n            }\r\n            bird.flap();\r\n        }, false);\r\n\r\n        if (\"ontouchstart\" in window) {\r\n            window.addEventListener(\"touchstart\", () => {\r\n                if (this.hasStopped) return;\r\n                bird.flap();\r\n            });\r\n        } else {\r\n            window.addEventListener(\"mousedown\", () => {\r\n                if (this.hasStopped) return;\r\n                bird.flap();\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Create and get the tiled sprite for the water\r\n     * @returns {TilingSprite|PIXI.TilingSprite|{enumerable, get}|*}\r\n     * @private\r\n     */\r\n    _getWaterSprite() {\r\n        let waterTexture = utils.getTexture(settings.textures.WATER);\r\n        let waterSprite = new PIXI.extras.TilingSprite(waterTexture, settings.gameWidth, settings.playableAreaBelowWater);\r\n        waterSprite.y = utils.getTexture(settings.textures.ceiling).height + settings.playableAreaAboveWater;\r\n\r\n        return waterSprite;\r\n    }\r\n};\r\n\r\nmodule.exports = game;\r\n","let settings = require('./settings');\r\nlet utils = require('./utils');\r\n\r\nlet gameOverScreen = {\r\n\r\n    /**\r\n     * The callback when the _restart button is clicked\r\n     */\r\n    onClickRestart: undefined,\r\n\r\n    /**\r\n     * The container that will hold the game over container\r\n     */\r\n    container: undefined,\r\n\r\n    /**\r\n     * The container that will hold the the scores and the game over sprite\r\n     */\r\n    gameOverContainer: undefined,\r\n\r\n    scoreYPosition: 93,\r\n    bestScoreYPosition: 135,\r\n    restartButtonYPosition: 190,\r\n    gameOverContainerXPosition: 150,\r\n\r\n    /**\r\n     * Because the score box is not perfectly centered we add some offset\r\n     */\r\n    elementsXOffset: 2,\r\n\r\n    /**\r\n     * Create the game over screen, should only be called once\r\n     */\r\n    initialize(callback) {\r\n        this._setRestartCallback(callback);\r\n\r\n        this.container = new PIXI.Container();\r\n\r\n        this.container.y = this._getContainerYPosition();\r\n        this.container.x = this.gameOverContainerXPosition;\r\n\r\n        this.gameOverContainer = new PIXI.Sprite(utils.getTexture(settings.textures.GAME_OVER));\r\n\r\n        this._renderScores(0, 0);\r\n\r\n        let restartButton = new PIXI.Sprite(utils.getTexture(settings.textures.RESTART));\r\n        restartButton.x = this.gameOverContainer.width / 2 - restartButton.width / 2 + this.elementsXOffset;\r\n        restartButton.y = this.restartButtonYPosition;\r\n        restartButton.interactive = true;\r\n        restartButton.buttonMode = true;\r\n        restartButton.defaultCursor = 'pointer';\r\n\r\n        restartButton.addListener(\"click\", this.onClickRestart);\r\n\r\n        if (\"ontouchstart\" in window) {\r\n            restartButton.addListener(\"touchstart\", this.onClickRestart);\r\n        }\r\n\r\n        this.gameOverContainer.addChild(restartButton);\r\n\r\n        this.container.addChild(this.gameOverContainer);\r\n\r\n        this.hide();\r\n\r\n        return this.container;\r\n    },\r\n\r\n    /**\r\n     * Update the game over screen with the new scores\r\n     */\r\n    updateScores(score, bestScore) {\r\n        this._clearScores();\r\n        this._renderScores(score, bestScore);\r\n    },\r\n\r\n    /**\r\n     * Hide the game over screen\r\n     */\r\n    hide() {\r\n        this.gameOverContainer.visible = false;\r\n    },\r\n\r\n    /**\r\n     * Show the game over screen\r\n     */\r\n    show() {\r\n        this.gameOverContainer.visible = true;\r\n    },\r\n\r\n    /**\r\n     * Set the callback for when the _restart button has been pressed\r\n     * @param callback\r\n     * @private\r\n     */\r\n    _setRestartCallback(callback) {\r\n        if (typeof callback !== 'function') throw new Error('Supplied callback is not a function');\r\n\r\n        this.onClickRestart = callback;\r\n    },\r\n\r\n    /**\r\n     * @param score\r\n     * @param bestScore\r\n     * @private\r\n     */\r\n    _renderScores(score, bestScore) {\r\n        this.scoreSprite = utils.scoreToSprites(score, utils.scoreSize.SMALL);\r\n        this.scoreSprite.x = this.gameOverContainer.width / 2 - this.scoreSprite.width / 2 + this.elementsXOffset;\r\n        this.scoreSprite.y = this.scoreYPosition;\r\n\r\n        this.bestScoreSprite = utils.scoreToSprites(bestScore, utils.scoreSize.SMALL);\r\n        this.bestScoreSprite.x = this.gameOverContainer.width / 2 - this.bestScoreSprite.width / 2 + this.elementsXOffset;\r\n        this.bestScoreSprite.y = this.bestScoreYPosition;\r\n\r\n        this.gameOverContainer.addChild(this.scoreSprite);\r\n        this.gameOverContainer.addChild(this.bestScoreSprite);\r\n    },\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _clearScores() {\r\n        this.gameOverContainer.removeChild(this.scoreSprite);\r\n        this.gameOverContainer.removeChild(this.bestScoreSprite);\r\n    },\r\n\r\n    /**\r\n     * @returns {number}\r\n     * @private\r\n     */\r\n    _getContainerYPosition() {\r\n        let ceilingHeight = utils.getTexture(settings.textures.ceiling).height;\r\n        let gameOverScreenHeight = utils.getTexture(settings.textures.GAME_OVER).height;\r\n        return (ceilingHeight + settings.playableAreaAboveWater + settings.playableAreaBelowWater) / 2 - gameOverScreenHeight / 2;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = gameOverScreen;\r\n","let settings = require('./settings');\r\nlet utils = require('./utils.js');\r\n\r\nlet audioPlayer = require('./audioPlayer');\r\n\r\nconst pipeFacing = {\r\n    'UP': 1,\r\n    'DOWN': -1,\r\n};\r\n\r\nlet level = {\r\n    /**\r\n     * The container that will contain everything that needs to be moved towards the player\r\n     */\r\n    container: undefined,\r\n    /**\r\n     * The container that will contain all floor tiles\r\n     */\r\n    floorSprite: undefined,\r\n\r\n    ceilingSprite: undefined,\r\n\r\n    pipesContainer: undefined,\r\n    pipes: [],\r\n\r\n    pipeTexture: undefined,\r\n    pipeTopTexture: undefined,\r\n    pipeBottomTexture: undefined,\r\n\r\n    firstPipeFacing: pipeFacing.UP,\r\n\r\n    nextPipeFacing: 0,\r\n    placedPipesCount: 0,\r\n\r\n    playerInsidePipe: false,\r\n\r\n    pipeGapSize: 100,\r\n\r\n    pipeDistance: 400,\r\n    firstPipeDistance: 800,\r\n\r\n    score: 0,\r\n    bestScore: 0,\r\n    scoreContainer: undefined,\r\n\r\n    initialize() {\r\n        this.container = new PIXI.Container();\r\n\r\n        this.container.addChild(this._createCeiling());\r\n        this.container.addChild(this._createFloor());\r\n\r\n        // Pipes stuff\r\n        this.nextPipeFacing = this.firstPipeFacing;\r\n        this.pipeTexture = utils.getTexture(settings.textures.pipe);\r\n        this.pipeTopTexture = utils.getTexture(settings.textures.pipeUp);\r\n        this.pipeBottomTexture = utils.getTexture(settings.textures.pipeDown);\r\n\r\n        this.pipesContainer = new PIXI.Container();\r\n\r\n        this._initialPipes();\r\n\r\n        this.container.addChild(this.pipesContainer);\r\n\r\n        // Score\r\n        this.scoreContainer = new PIXI.Container();\r\n        this.scoreContainer.addChild(utils.scoreToSprites(this.score, utils.scoreSize.BIG));\r\n\r\n        // Todo: Make vars\r\n        this.scoreContainer.x = 10;\r\n        this.scoreContainer.y = utils.getTexture(settings.textures.ceiling).height + 10;\r\n\r\n        this.container.addChild(this.scoreContainer);\r\n\r\n        return this.container;\r\n    },\r\n\r\n    reset() {\r\n        this.score = 0;\r\n        this.scoreContainer.removeChild(this.scoreContainer.children[0]);\r\n        this.scoreContainer.addChild(utils.scoreToSprites(this.score, utils.scoreSize.BIG));\r\n\r\n        this.pipesContainer.x = 0;\r\n        this.pipesContainer.children.splice(0);\r\n        this.pipes = [];\r\n        this.playerInsidePipe = false;\r\n        this.nextPipeFacing = this.firstPipeFacing;\r\n        this.placedPipesCount = 0;\r\n        this._initialPipes();\r\n    },\r\n\r\n    loop() {\r\n        this.ceilingSprite.tilePosition.x += -settings.forwardSpeed;\r\n        this.floorSprite.tilePosition.x += -settings.forwardSpeed;\r\n\r\n        // Pipes stuff\r\n        this.pipesContainer.x += -settings.forwardSpeed;\r\n\r\n        // Remove pipes when they're off screen\r\n        if (this.pipes.length > 0) {\r\n\r\n            if (this.pipesContainer.x < -this.pipes[0].x - this.pipeTexture.width) {\r\n                this.pipesContainer.removeChild(this.pipes[0]);\r\n                this.pipes.shift();\r\n\r\n                this._placeNewPipe();\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get the y position of the water\r\n     */\r\n    getWaterLevel() {\r\n        return settings.playableAreaAboveWater;\r\n    },\r\n\r\n    pipeCollision(bird) {\r\n\r\n        // We will check if the bird is colliding with the first pipe\r\n        // The bird can't possibly hit any other pipes\r\n\r\n        // We only need to collide with the left side of the pipes and the top/bottom pieces\r\n        // We know how far the pipe container has moved to the right, we can use this to get the left side\r\n\r\n        // Because of square collision it can feel unfair when hitting the sides of the pipes while at an angle\r\n        // Which often happens when diving through the gap. To make things a bit fairer, added a small margin;\r\n        let collisionMargin = 2;\r\n\r\n        let left = this.pipesContainer.x + this.pipes[0].x + collisionMargin;\r\n        let right = left + utils.getTexture(settings.textures.pipe).width - collisionMargin;\r\n        \r\n        // The bird is in the left/right boundaries of the first pipe\r\n        if (bird.getRight() > left && bird.getLeft() < right) {\r\n\r\n            this.playerInsidePipe = true;\r\n\r\n            // The bird is above the gap!\r\n            if (bird.getTop() < this.pipes[0].gap.top || bird.getBottom() > this.pipes[0].gap.bottom) {\r\n                return true;\r\n            }\r\n        } else if (this.playerInsidePipe) {\r\n            // Player has passed the pipe\r\n            this._increaseScore();\r\n            this.playerInsidePipe = false;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    _createCeiling() {\r\n        let ceilingTexture = utils.getTexture(settings.textures.ceiling);\r\n\r\n        this.ceilingSprite = new PIXI.extras.TilingSprite(ceilingTexture, settings.gameWidth, ceilingTexture.height);\r\n\r\n        return this.ceilingSprite;\r\n    },\r\n\r\n    _createFloor() {\r\n        let floorTexture = utils.getTexture(settings.textures.floor);\r\n\r\n        this.floorSprite = new PIXI.extras.TilingSprite(floorTexture, settings.gameWidth, floorTexture.height);\r\n        this.floorSprite.y = settings.playableAreaAboveWater + settings.playableAreaBelowWater + utils.getTexture(settings.textures.ceiling).height;\r\n\r\n        return this.floorSprite;\r\n    },\r\n\r\n    _initialPipes() {\r\n        let startingPipesCount = Math.ceil(settings.gameWidth / this.pipeDistance);\r\n\r\n        for (let i = 0; i < startingPipesCount; i++) {\r\n            let pipe = this._createPipe(this._getRandomPipeHeight(), this.nextPipeFacing);\r\n            pipe.x = this.firstPipeDistance + this.pipeDistance * i;\r\n            this.pipesContainer.addChild(pipe);\r\n            this.pipes.push(pipe);\r\n\r\n            this.nextPipeFacing *= -1;\r\n            this.placedPipesCount++;\r\n        }\r\n    },\r\n\r\n    _placeNewPipe() {\r\n        // We need total pipe amount, to calculate position of new one\r\n        let pipe = this._createPipe(this._getRandomPipeHeight(), this.nextPipeFacing);\r\n        pipe.x = this.placedPipesCount * this.pipeDistance + this.firstPipeDistance;\r\n        this.pipesContainer.addChild(pipe);\r\n        this.pipes.push(pipe);\r\n\r\n        this.nextPipeFacing *= -1;\r\n        this.placedPipesCount++;\r\n    },\r\n\r\n    _createPipe(height, direction) {\r\n        let container = new PIXI.Container();\r\n\r\n        let totalPlayHeight = settings.playableAreaAboveWater + settings.playableAreaBelowWater;\r\n\r\n        if (direction === pipeFacing.UP) {\r\n            container.addChild(this._createUpFacingPipe(height));\r\n        } else if (direction === pipeFacing.DOWN) {\r\n            container.addChild(this._createDownFacingPipe(height));\r\n        }\r\n\r\n        // Check if we have space for pipe in opposite direction to complete the gap\r\n        if (height + this.pipeGapSize < totalPlayHeight) {\r\n            // We can fit another pipe opposite to it\r\n            let oppositePipeHeight = totalPlayHeight - height - this.pipeGapSize;\r\n            if (direction === pipeFacing.UP)\r\n                container.addChild(this._createDownFacingPipe(oppositePipeHeight));\r\n\r\n            if (direction === pipeFacing.DOWN)\r\n                container.addChild(this._createUpFacingPipe(oppositePipeHeight));\r\n        }\r\n\r\n        // Store the information of the gap position in the container object for easier collision checks\r\n        let top = (direction === pipeFacing.UP ? totalPlayHeight - height - this.pipeGapSize : height) + this.ceilingSprite.height;\r\n        let bottom = (direction === pipeFacing.UP ? totalPlayHeight - height : height + this.pipeGapSize) + this.ceilingSprite.height;\r\n        container.gap = { top, bottom }\r\n\r\n        return container;\r\n    },\r\n\r\n    _createUpFacingPipe(height) {\r\n        let container = new PIXI.Container();\r\n\r\n        let pipeTop = new PIXI.Sprite(this.pipeTopTexture);\r\n        container.addChild(pipeTop);\r\n\r\n        let pipePartHeight = height - this.pipeTopTexture.height;\r\n\r\n        let pipe = new PIXI.extras.TilingSprite(this.pipeTexture, this.pipeTexture.width, pipePartHeight);\r\n        pipe.y = this.pipeTopTexture.height;\r\n        container.addChild(pipe);\r\n\r\n        // Place pipe on the bottom\r\n        container.y = settings.playableAreaAboveWater + settings.playableAreaBelowWater - height + utils.getTexture(settings.textures.ceiling).height;\r\n\r\n        return container;\r\n    },\r\n\r\n    _createDownFacingPipe(height) {\r\n        let container = new PIXI.Container();\r\n\r\n        let pipePartHeight = height - this.pipeBottomTexture.height;\r\n\r\n        let pipe = new PIXI.extras.TilingSprite(this.pipeTexture, this.pipeTexture.width, pipePartHeight);\r\n        container.addChild(pipe);\r\n\r\n        let pipeBottom = new PIXI.Sprite(this.pipeBottomTexture);\r\n        pipeBottom.y = pipePartHeight;\r\n        container.addChild(pipeBottom);\r\n\r\n        // We can place it against the ceiling\r\n        container.y = utils.getTexture(settings.textures.ceiling).height;\r\n\r\n        return container;\r\n    },\r\n\r\n    _increaseScore() {\r\n        audioPlayer.play(audioPlayer.audioFragments.POINT);\r\n        this.score++;\r\n\r\n        if (this.score > this.bestScore) this.bestScore = this.score;\r\n\r\n        // Because we put all digits inside one container, we only have to remove on child\r\n        this.scoreContainer.removeChild(this.scoreContainer.children[0]);\r\n\r\n        this.scoreContainer.addChild(utils.scoreToSprites(this.score, utils.scoreSize.BIG));\r\n   },\r\n\r\n    _getRandomPipeHeight() {\r\n        // Todo: Grab from settings somewhere\r\n        let minHeight = 280;\r\n        let maxHeight = 390;\r\n\r\n        return Math.random() * (maxHeight - minHeight) + minHeight;\r\n    },\r\n};\r\n\r\nmodule.exports = level;\r\n","const settings = {\r\n    /**\r\n     * The location of the assets json\r\n     */\r\n    assetFile: \"assets/assets.json\",\r\n\r\n    soundsPath: \"assets/sounds/\",\r\n\r\n    /**\r\n     * The area that is available above the water\r\n     */\r\n    playableAreaAboveWater: 260,\r\n\r\n    playableAreaBelowWater: 260,\r\n\r\n    gameWidth: 0,\r\n\r\n    gameOverScreenPosition: { x: 0, y: 0 },\r\n\r\n    /**\r\n     * The speed at which objects move towards the player\r\n     */\r\n    forwardSpeed: 5,\r\n\r\n    /**\r\n     * The speed at which the background moves\r\n     */\r\n    backgroundSpeed: 2,\r\n\r\n    /**\r\n     * The amount of gravity added to the velocity of the player while above the water\r\n     */\r\n    gravity: 0.3,\r\n\r\n    /**\r\n     * The amount of upward force added to the velocity of the player while below the water\r\n     */\r\n    waterPushForce: 0.3,\r\n\r\n    /**\r\n     * The amount of upward velocity is added to the player on 'flapping'.\r\n     */\r\n    birdFlapVelocity: 4.5,\r\n\r\n    /**\r\n     * If vertical velocity of the player should be reset before applying the flap velocity\r\n     */\r\n    shouldBirdFlapResetVelocity: true,\r\n\r\n    ceilingSpriteHeight: 0,\r\n\r\n    textures: {\r\n        'background': 'sky.png',\r\n        'floor': 'land.png',\r\n        'ceiling': 'ceiling.png',\r\n        'pipe': 'pipe.png',\r\n        'pipeUp': 'pipe-up.png',\r\n        'pipeDown': 'pipe-down.png',\r\n        'WATER': 'water.png',\r\n        'GAME_OVER': 'scoreboard.png',\r\n        'RESTART': 'replay.png',\r\n        'BIG_0': 'font_big_0.png',\r\n        'BIG_1': 'font_big_1.png',\r\n        'BIG_2': 'font_big_2.png',\r\n        'BIG_3': 'font_big_3.png',\r\n        'BIG_4': 'font_big_4.png',\r\n        'BIG_5': 'font_big_5.png',\r\n        'BIG_6': 'font_big_6.png',\r\n        'BIG_7': 'font_big_7.png',\r\n        'BIG_8': 'font_big_8.png',\r\n        'BIG_9': 'font_big_9.png',\r\n        'SMALL_0': 'font_small_0.png',\r\n        'SMALL_1': 'font_small_1.png',\r\n        'SMALL_2': 'font_small_2.png',\r\n        'SMALL_3': 'font_small_3.png',\r\n        'SMALL_4': 'font_small_4.png',\r\n        'SMALL_5': 'font_small_5.png',\r\n        'SMALL_6': 'font_small_6.png',\r\n        'SMALL_7': 'font_small_7.png',\r\n        'SMALL_8': 'font_small_8.png',\r\n        'SMALL_9': 'font_small_9.png',\r\n    },\r\n\r\n    init() {\r\n        this.gameWidth = window.innerWidth;\r\n    }\r\n};\r\n\r\nsettings.init();\r\n\r\nmodule.exports = settings;\r\n","let settings = require('./settings');\r\n\r\nlet setup = {\r\n    /**\r\n     * Set up the renderer\r\n     * @returns {PIXI.WebGLRenderer|PIXI.CanvasRenderer}\r\n     */\r\n    renderer() {\r\n        let renderer = PIXI.autoDetectRenderer(settings.gameWidth, window.innerHeight);\r\n        renderer.view.style.position = \"absolute\";\r\n        renderer.view.style.display = \"block\";\r\n        renderer.backgroundColor = 0x4ec0ca;\r\n        renderer.autoResize = true;\r\n\r\n        document.body.appendChild(renderer.view);\r\n\r\n        return renderer;\r\n    },\r\n\r\n    /**\r\n     * Load the assets\r\n     * @param callback action to perform after assets have been loaded\r\n     */\r\n    loadAssets(callback) {\r\n        if (typeof callback !== 'function') throw new Error('Callback must be a function');\r\n\r\n        PIXI.loader.add(\"assets/assets.json\").load(callback);\r\n    }\r\n};\r\n\r\nmodule.exports = setup;\r\n","let settings = require('./settings');\r\n\r\nlet utils = {\r\n\r\n    scoreSize: {\r\n        'SMALL': 0,\r\n        'BIG': 1\r\n    },\r\n\r\n    /**\r\n     * Get a texture from the pixi loader by name\r\n     * @param name texture name, with extension\r\n     * @returns {*|PIXI.Texture|FrameObject}\r\n     */\r\n    getTexture(name) {\r\n        return PIXI.loader.resources[settings.assetFile].textures[name]\r\n    },\r\n\r\n    /**\r\n     * Fill a given pixi container and fill it with vertically aligned tiles fitting whole window width\r\n     * @param container\r\n     * @param texture\r\n     */\r\n    fillContainerWithWindowWidthTiles(container, texture) {\r\n        let requiredTiles = this._getRequiredWidthTiles(texture.width);\r\n\r\n        for (let i = 0; i < requiredTiles; i++) {\r\n            let tile = new PIXI.Sprite(texture);\r\n            tile.x = tile.width * i;\r\n            container.addChild(tile);\r\n        }\r\n    },\r\n\r\n    scoreToSprites(score, size) {\r\n        let stringScore = score.toString();\r\n\r\n        let texturePrefix = size === this.scoreSize.BIG ? 'BIG_' : 'SMALL_';\r\n        let letterSpacing = size === this.scoreSize.BIG ? 25 : 10;\r\n\r\n\r\n        let digitsContainer = new PIXI.Container();\r\n\r\n        for (let i = 0, len = stringScore.length; i < len; i++) {\r\n            let digit = new PIXI.Sprite(this.getTexture(settings.textures[texturePrefix + stringScore.charAt(i)]));\r\n            digit.x = i * letterSpacing;\r\n            digitsContainer.addChild(digit)\r\n        }\r\n\r\n        return digitsContainer;\r\n    },\r\n\r\n    _getRequiredWidthTiles(tileWidth) {\r\n        return Math.ceil(settings.gameWidth / tileWidth) + 1;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = utils;\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImU6L0NvZGUvcGl4aS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwianNcXG1haW4uanMiLCJlOlxcQ29kZVxccGl4aVxcanNcXGF1ZGlvUGxheWVyLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxiYWNrZ3JvdW5kLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxiaXJkLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxnYW1lLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxnYW1lT3ZlclNjcmVlbi5qcyIsImU6XFxDb2RlXFxwaXhpXFxqc1xcbGV2ZWwuanMiLCJlOlxcQ29kZVxccGl4aVxcanNcXHNldHRpbmdzLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxzZXR1cC5qcyIsImU6XFxDb2RlXFxwaXhpXFxqc1xcdXRpbHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLElBQUksT0FBTyxRQUFRLFFBQVIsQ0FBWDs7QUFFQSxDQUFDLFlBQVc7QUFDUixTQUFLLEtBQUw7QUFDSCxDQUZEOzs7OztBQ0ZBLElBQUksV0FBVyxRQUFRLFlBQVIsQ0FBZjs7QUFFQSxJQUFJLGNBQWM7O0FBRWQsb0JBQWdCO0FBQ1osZ0JBQVEsY0FESTtBQUVaLGVBQU8sYUFGSztBQUdaLGVBQU8sYUFISztBQUlaLGlCQUFTLGVBSkc7QUFLWixnQkFBUSxjQUxJO0FBTVosdUJBQWUscUJBTkg7QUFPWixzQkFBYztBQVBGLEtBRkY7O0FBWWQsWUFBUSxFQVpNOztBQWNkLFFBZGMsa0JBY1A7QUFDSDtBQUNBLGFBQUssSUFBSSxHQUFULElBQWdCLEtBQUssY0FBckIsRUFBcUM7QUFDakMsaUJBQUssTUFBTCxDQUFZLEtBQUssY0FBTCxDQUFvQixHQUFwQixDQUFaLElBQXdDLElBQUksS0FBSixDQUFVLFNBQVMsVUFBVCxHQUFzQixLQUFLLGNBQUwsQ0FBb0IsR0FBcEIsQ0FBaEMsQ0FBeEM7QUFDSDtBQUNKLEtBbkJhO0FBcUJkLFFBckJj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QUNBLGlCQUFLLENBQUwsR0FBUyxLQUFLLEtBQUwsR0FBYSxDQUF0QjtBQUNBLHNCQUFVLFFBQVYsQ0FBbUIsSUFBbkI7QUFDSDtBQUNKLEtBN0JPO0FBK0JSLGtCQS9CUSwwQkErQk8sS0EvQlAsRUErQmMsSUEvQmQsRUErQm9CO0FBQ3hCLFlBQUksY0FBYyxNQUFNLFFBQU4sRUFBbEI7O0FBRUEsWUFBSSxnQkFBZ0IsU0FBUyxLQUFLLFNBQUwsQ0FBZSxHQUF4QixHQUE4QixNQUE5QixHQUF1QyxRQUEzRDtBQUNBLFlBQUksZ0JBQWdCLFNBQVMsS0FBSyxTQUFMLENBQWUsR0FBeEIsR0FBOEIsRUFBOUIsR0FBbUMsRUFBdkQ7O0FBR0EsWUFBSSxrQkFBa0IsSUFBSSxLQUFLLFNBQVQsRUFBdEI7O0FBRUEsYUFBSyxJQUFJLElBQUksQ0FBUixFQUFXLE1BQU0sWUFBWSxNQUFsQyxFQUEwQyxJQUFJLEdBQTlDLEVBQW1ELEdBQW5ELEVBQXdEO0FBQ3BELGdCQUFJLFFBQVEsSUFBSSxLQUFLLE1BQVQsQ0FBZ0IsS0FBSyxVQUFMLENBQWdCLFNBQVMsUUFBVCxDQUFrQixnQkFBZ0IsWUFBWSxNQUFaLENBQW1CLENBQW5CLENBQWxDLENBQWhCLENBQWhCLENBQVo7QUFDQSxrQkFBTSxDQUFOLEdBQVUsSUFBSSxhQUFkO0FBQ0EsNEJBQWdCLFFBQWhCLENBQXlCLEtBQXpCO0FBQ0g7O0FBRUQsZUFBTyxlQUFQO0FBQ0gsS0EvQ087QUFpRFIsMEJBakRRLGtDQWlEZSxTQWpEZixFQWlEMEI7QUFDOUIsZUFBTyxLQUFLLElBQUwsQ0FBVSxTQUFTLFNBQVQsR0FBcUIsU0FBL0IsSUFBNEMsQ0FBbkQ7QUFDSDtBQW5ETyxDQUFaOztBQXVEQSxPQUFPLE9BQVAsR0FBaUIsS0FBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibGV0IGdhbWUgPSByZXF1aXJlKCcuL2dhbWUnKTtcclxuXHJcbihmdW5jdGlvbigpIHtcclxuICAgIGdhbWUuc3RhcnQoKTtcclxufSkoKTtcclxuXHJcbiIsImxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MnKTtcclxuXHJcbmxldCBhdWRpb1BsYXllciA9IHtcclxuXHJcbiAgICBhdWRpb0ZyYWdtZW50czoge1xyXG4gICAgICAgICdGTEFQJzogJ3NmeF93aW5nLm9nZycsXHJcbiAgICAgICAgJ0hJVCc6ICdzZnhfaGl0Lm9nZycsXHJcbiAgICAgICAgJ0RJRSc6ICdzZnhfZGllLm9nZycsXHJcbiAgICAgICAgJ1BPSU5UJzogJ3NmeF9wb2ludC5vZ2cnLFxyXG4gICAgICAgICdTV0lNJzogJ3NmeF9ibHViLm9nZycsXHJcbiAgICAgICAgJ0VOVEVSX1dBVEVSJzogJ3NmeF93YXRlci1lbnRlci5vZ2cnLFxyXG4gICAgICAgICdFWElUX1dBVEVSJzogJ3NmeF93YXRlci1leGl0Lm9nZycsXHJcbiAgICB9LFxyXG5cclxuICAgIF9hdWRpbzogW10sXHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICAvLyBUb2RvOiBNYXliZSB3ZSBuZWVkIHRvIHdhaXQgd2l0aCBzdGFydGluZyB0aGUgZ2FtZSB1bnRpbCB0aGVzZSBoYXZlIGJlZW4gbG9hZGVkXHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMuYXVkaW9GcmFnbWVudHMpIHtcclxuICAgICAgICAgICAgdGhpcy5fYXVkaW9bdGhpcy5hdWRpb0ZyYWdtZW50c1trZXldXSA9IG5ldyBBdWRpbyhzZXR0aW5ncy5zb3VuZHNQYXRoICsgdGhpcy5hdWRpb0ZyYWdtZW50c1trZXldKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHBsYXkoYXVkaW9GcmFnbWVudCwgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAodGhpcy5fYXVkaW9bYXVkaW9GcmFnbWVudF0uY3VycmVudFRpbWUgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2F1ZGlvW2F1ZGlvRnJhZ21lbnRdLmN1cnJlbnRUaW1lID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2F1ZGlvW2F1ZGlvRnJhZ21lbnRdLnBsYXkoKTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgc2V0VGltZW91dChjYWxsYmFjaywgdGhpcy5fYXVkaW9bYXVkaW9GcmFnbWVudF0uZHVyYXRpb24gKiAxMDAwKTtcclxuICAgIH1cclxufTtcclxuXHJcbmF1ZGlvUGxheWVyLmluaXQoKTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGF1ZGlvUGxheWVyO1xyXG4iLCJsZXQgc2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldHRpbmdzLmpzJyk7XHJcbmxldCB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMuanMnKTtcclxuXHJcbnZhciBiYWNrZ3JvdW5kID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY29udGFpbmVyIHRoYXQgd2lsbCBjb250YWluIGFsbCBiYWNrZ3JvdW5kIHRpbGVzIGxpbmVkIHVwXHJcbiAgICAgKi9cclxuICAgIGJhY2tncm91bmRTcHJpdGU6IHVuZGVmaW5lZCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgdGhlIGJhY2tncm91bmRcclxuICAgICAqIEByZXR1cm5zIHtQSVhJLlNwcml0ZX1cclxuICAgICAqL1xyXG4gICAgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICBsZXQgc2t5VGlsZVRleHR1cmUgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLmJhY2tncm91bmQpO1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZFNwcml0ZSA9IG5ldyBQSVhJLmV4dHJhcy5UaWxpbmdTcHJpdGUoc2t5VGlsZVRleHR1cmUsIHNldHRpbmdzLmdhbWVXaWR0aCwgc2t5VGlsZVRleHR1cmUuaGVpZ2h0KTtcclxuICAgICAgICB0aGlzLmJhY2tncm91bmRTcHJpdGUueSA9IHRoaXMuX2dldEJhY2tncm91bmRTcHJpdGVZUG9zaXRpb24oc2t5VGlsZVRleHR1cmUuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFja2dyb3VuZFNwcml0ZTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgbG9vcCBvZiB0aGUgYmFja2dyb3VuZFxyXG4gICAgICovXHJcbiAgICBsb29wKCkge1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZFNwcml0ZS50aWxlUG9zaXRpb24ueCArPSAtc2V0dGluZ3MuYmFja2dyb3VuZFNwZWVkO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgeSBwb3NpdGlvbiBmb3IgdGhlIGJhY2tncm91bmQgc3ByaXRlXHJcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2dldEJhY2tncm91bmRTcHJpdGVZUG9zaXRpb24oaGVpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIHNldHRpbmdzLnBsYXlhYmxlQXJlYUFib3ZlV2F0ZXIgLSBoZWlnaHQgKyB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLmNlaWxpbmcpLmhlaWdodDtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYmFja2dyb3VuZDtcclxuIiwibGV0IHNldHRpbmdzID0gcmVxdWlyZSgnLi9zZXR0aW5ncycpO1xyXG5sZXQgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcblxyXG5sZXQgYXVkaW9QbGF5ZXIgPSByZXF1aXJlKCcuL2F1ZGlvUGxheWVyJyk7XHJcblxyXG5sZXQgYmlyZCA9IHtcclxuICAgIGNvbnRhaW5lcjogdW5kZWZpbmVkLFxyXG4gICAgYmlyZDogdW5kZWZpbmVkLFxyXG4gICAgYm91bmRpbmdCb3g6IHVuZGVmaW5lZCxcclxuICAgIHZlbG9jaXR5OiB7eDogMCwgeTogMH0sXHJcbiAgICBpc0JlbG93V2F0ZXI6IGZhbHNlLFxyXG5cclxuICAgIGFuaW1hdGlvbkZyYW1lczogNCxcclxuXHJcbiAgICBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIGxldCBzcHJpdGVGcmFtZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYW5pbWF0aW9uRnJhbWVzOyBpKyspIHtcclxuICAgICAgICAgICAgc3ByaXRlRnJhbWVzLnB1c2godXRpbHMuZ2V0VGV4dHVyZSgnYmlyZF8nICsgaSArICAnLnBuZycpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5iaXJkID0gbmV3IFBJWEkuZXh0cmFzLkFuaW1hdGVkU3ByaXRlKHNwcml0ZUZyYW1lcyk7XHJcblxyXG4gICAgICAgIHRoaXMuYmlyZC5hbmltYXRpb25TcGVlZCA9IDAuMjtcclxuICAgICAgICB0aGlzLmJpcmQucGxheSgpO1xyXG5cclxuICAgICAgICB0aGlzLmJpcmQuYW5jaG9yLnggPSAwLjU7XHJcbiAgICAgICAgdGhpcy5iaXJkLmFuY2hvci55ID0gMC41O1xyXG5cclxuICAgICAgICB0aGlzLmJpcmQueSA9IDE1MDtcclxuICAgICAgICB0aGlzLmJpcmQueCA9IDEwMDtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5iaXJkKTtcclxuXHJcbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveCA9IHt4OiAwLCB5OiAwLCB3aWR0aDogMCwgaGVpZ2h0OiAwfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xyXG4gICAgfSxcclxuXHJcbiAgICBsb29wKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQmVsb3dXYXRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmJlbG93V2F0ZXIoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmFib3ZlV2F0ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYmlyZC55ICs9IHRoaXMudmVsb2NpdHkueTtcclxuICAgICAgICB0aGlzLmJpcmQucm90YXRpb24gPSBNYXRoLmF0YW4yKHRoaXMudmVsb2NpdHkueSwgc2V0dGluZ3MuZm9yd2FyZFNwZWVkKTtcclxuICAgIH0sXHJcblxyXG4gICAgYWJvdmVXYXRlcigpIHtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5LnkgKz0gc2V0dGluZ3MuZ3Jhdml0eTtcclxuICAgIH0sXHJcblxyXG4gICAgYmVsb3dXYXRlcigpIHtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5LnkgLT0gc2V0dGluZ3Mud2F0ZXJQdXNoRm9yY2U7XHJcbiAgICB9LFxyXG5cclxuICAgIGZsYXAoKSB7XHJcbiAgICAgICAgaWYgKHNldHRpbmdzLnNob3VsZEJpcmRGbGFwUmVzZXRWZWxvY2l0eSApIHtcclxuICAgICAgICAgICAgdGhpcy52ZWxvY2l0eS55ID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzQmVsb3dXYXRlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9zd2ltKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZmxhcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5iaXJkLnkgPSAxNTA7XHJcbiAgICAgICAgdGhpcy5iaXJkLnggPSAxMDA7XHJcbiAgICAgICAgdGhpcy52ZWxvY2l0eS54ID0gMDtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5LnkgPSAwO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRUb3AoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmlyZC55IC0gdGhpcy5iaXJkLmhlaWdodCAvIDI7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldEJvdHRvbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iaXJkLnkgKyB0aGlzLmJpcmQuaGVpZ2h0IC8gMjtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0UmlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmlyZC54ICsgdGhpcy5iaXJkLndpZHRoIC8gMjtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0TGVmdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iaXJkLnggLSB0aGlzLmJpcmQud2lkdGggLyAyO1xyXG4gICAgfSxcclxuXHJcbiAgICBlbnRlcldhdGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQmVsb3dXYXRlcikgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuaXNCZWxvd1dhdGVyID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgYXVkaW9QbGF5ZXIucGxheShhdWRpb1BsYXllci5hdWRpb0ZyYWdtZW50cy5FTlRFUl9XQVRFUik7XHJcbiAgICB9LFxyXG5cclxuICAgIGxlYXZlV2F0ZXIoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQmVsb3dXYXRlcikgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuaXNCZWxvd1dhdGVyID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGF1ZGlvUGxheWVyLnBsYXkoYXVkaW9QbGF5ZXIuYXVkaW9GcmFnbWVudHMuRVhJVF9XQVRFUik7XHJcbiAgICB9LFxyXG5cclxuICAgIF9mbGFwKCkge1xyXG4gICAgICAgIGF1ZGlvUGxheWVyLnBsYXkoYXVkaW9QbGF5ZXIuYXVkaW9GcmFnbWVudHMuRkxBUCk7XHJcblxyXG4gICAgICAgIHRoaXMudmVsb2NpdHkueSAtPSBzZXR0aW5ncy5iaXJkRmxhcFZlbG9jaXR5O1xyXG4gICAgfSxcclxuXHJcbiAgICBfc3dpbSgpIHtcclxuICAgICAgICBhdWRpb1BsYXllci5wbGF5KGF1ZGlvUGxheWVyLmF1ZGlvRnJhZ21lbnRzLlNXSU0pO1xyXG5cclxuICAgICAgICB0aGlzLnZlbG9jaXR5LnkgKz0gc2V0dGluZ3MuYmlyZEZsYXBWZWxvY2l0eTtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYmlyZDtcclxuIiwibGV0IHNldHVwID0gcmVxdWlyZSgnLi9zZXR1cCcpO1xyXG5cclxubGV0IGdhbWVPdmVyU2NyZWVuID0gcmVxdWlyZSgnLi9nYW1lT3ZlclNjcmVlbicpO1xyXG5sZXQgYXVkaW9QbGF5ZXIgPSByZXF1aXJlKCcuL2F1ZGlvUGxheWVyJyk7XHJcbmxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MnKTtcclxubGV0IHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxubGV0IGJhY2tncm91bmQgPSByZXF1aXJlKCcuL2JhY2tncm91bmQnKTtcclxubGV0IGxldmVsID0gcmVxdWlyZSgnLi9sZXZlbCcpO1xyXG5sZXQgYmlyZCA9IHJlcXVpcmUoJy4vYmlyZCcpO1xyXG5cclxubGV0IGdhbWUgPSB7XHJcbiAgICByZW5kZXJlcjogdW5kZWZpbmVkLFxyXG4gICAgc3RhZ2U6IHVuZGVmaW5lZCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhlIGdhbWUgKGxvb3ApIGhhcyBzdG9wcGVkIG9yIG5vdFxyXG4gICAgICovXHJcbiAgICBoYXNTdG9wcGVkOiBmYWxzZSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0IHRoZSBnYW1lXHJcbiAgICAgKi9cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBzZXR1cC5yZW5kZXJlcigpO1xyXG4gICAgICAgIHNldHVwLmxvYWRBc3NldHModGhpcy5pbml0aWFsaXplLmJpbmQodGhpcykpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYWxsIHJlcXVpcmVkIHBhcnRzIG9mIHRoZSBnYW1lXHJcbiAgICAgKi9cclxuICAgIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgdGhpcy5zdGFnZSA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YWdlLmFkZENoaWxkKGJhY2tncm91bmQuaW5pdGlhbGl6ZSgpKTtcclxuICAgICAgICB0aGlzLnN0YWdlLmFkZENoaWxkKGxldmVsLmluaXRpYWxpemUoKSk7XHJcbiAgICAgICAgdGhpcy5zdGFnZS5hZGRDaGlsZChiaXJkLmluaXRpYWxpemUoKSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhZ2UuYWRkQ2hpbGQodGhpcy5fZ2V0V2F0ZXJTcHJpdGUoKSk7XHJcblxyXG4gICAgICAgIGxldCBvblJlc3RhcnRDbGljayA9IHRoaXMuX2NsaWNrUmVzdGFydC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc3RhZ2UuYWRkQ2hpbGQoZ2FtZU92ZXJTY3JlZW4uaW5pdGlhbGl6ZShvblJlc3RhcnRDbGljaykpO1xyXG5cclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnN0YWdlKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRzKCk7XHJcblxyXG4gICAgICAgIHRoaXMubG9vcCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBnYW1lIGxvb3BcclxuICAgICAqL1xyXG4gICAgbG9vcCgpIHtcclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5sb29wLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICAvLyBUaGlzIGNhdXNlcyB0aGUgZ2FtZSBsb29wIHRvIGZyZWV6ZS4gSXMgdXNlZCB3aGVuIHRoZSBwbGF5ZXJzIGhpdHMgc29tZXRoaW5nIGFuZCBhIG1lbnUgaXMgc2hvd24gdG8gX3Jlc3RhcnRcclxuICAgICAgICBpZiAodGhpcy5oYXNTdG9wcGVkKSByZXR1cm47XHJcblxyXG4gICAgICAgIGJhY2tncm91bmQubG9vcCgpO1xyXG4gICAgICAgIGxldmVsLmxvb3AoKTtcclxuICAgICAgICBiaXJkLmxvb3AoKTtcclxuXHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ29sbGlzaW9uKCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMuc3RhZ2UpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyaWdnZXIgZ2FtZSBvdmVyIGhhcHBlbmluZ1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2dhbWVPdmVyKCkge1xyXG4gICAgICAgIHRoaXMuX3N0b3AoKTtcclxuICAgICAgICB0aGlzLl9wbGF5RGllQXVkaW8oKTtcclxuXHJcbiAgICAgICAgLy8gU2hvdyBnYW1lIG92ZXIgc2NyZWVuXHJcbiAgICAgICAgZ2FtZU92ZXJTY3JlZW4udXBkYXRlU2NvcmVzKGxldmVsLnNjb3JlLCBsZXZlbC5iZXN0U2NvcmUpO1xyXG4gICAgICAgIGdhbWVPdmVyU2NyZWVuLnNob3coKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBfcmVzdGFydCBpcyBjbGlja2VkIGZyb20gdGhlIGdhbWUgb3ZlciBzY3JlZW5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9jbGlja1Jlc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVzdGFydCgpO1xyXG4gICAgICAgIGdhbWVPdmVyU2NyZWVuLmhpZGUoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wIHRoZSBnYW1lXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfc3RvcCgpIHtcclxuICAgICAgICB0aGlzLmhhc1N0b3BwZWQgPSB0cnVlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnRpbnVlIHRoZSBnYW1lIGFmdGVyIHN0b3BwaW5nXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfcmVzdGFydCgpIHtcclxuICAgICAgICBsZXZlbC5yZXNldCgpO1xyXG4gICAgICAgIGJpcmQucmVzZXQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5oYXNTdG9wcGVkID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIGNvbGxpc2lvbiBiZXR3ZWVuIHRoZSBiaXJkIGFuZCAnb2JzdGFjbGVzJ1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2hhbmRsZUNvbGxpc2lvbigpIHtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgYmlyZCBpcyBiZWxvdyBvciB1bmRlcm5lYXRoIHRoZSB3YXRlclxyXG4gICAgICAgIGlmIChiaXJkLmdldFRvcCgpIDwgbGV2ZWwuZ2V0V2F0ZXJMZXZlbCgpICYmIGJpcmQuaXNCZWxvd1dhdGVyKSB7XHJcbiAgICAgICAgICAgIGJpcmQubGVhdmVXYXRlcigpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYmlyZC5nZXRUb3AoKSA+PSBsZXZlbC5nZXRXYXRlckxldmVsKCkgJiYgIWJpcmQuaXNCZWxvd1dhdGVyKSB7XHJcbiAgICAgICAgICAgIGJpcmQuZW50ZXJXYXRlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2VpbGluZyBjb2xsaXNpb25cclxuICAgICAgICBpZiAoYmlyZC5nZXRUb3AoKSA8PSBsZXZlbC5jZWlsaW5nU3ByaXRlLnkgKyBsZXZlbC5jZWlsaW5nU3ByaXRlLmhlaWdodCkge1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVPdmVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGbG9vciBjb2xsaXNpb25cclxuICAgICAgICBpZiAoYmlyZC5nZXRCb3R0b20oKSA+PSBsZXZlbC5jZWlsaW5nU3ByaXRlLnkgKyBsZXZlbC5jZWlsaW5nU3ByaXRlLmhlaWdodCArIHNldHRpbmdzLnBsYXlhYmxlQXJlYUFib3ZlV2F0ZXIgKyBzZXR0aW5ncy5wbGF5YWJsZUFyZWFCZWxvd1dhdGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZU92ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChsZXZlbC5waXBlQ29sbGlzaW9uKGJpcmQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZU92ZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGxheSB0aGUgYXVkaW8gZm9yIHdoZW4gdGhlIHBsYXllciBkaWVzXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfcGxheURpZUF1ZGlvKCkge1xyXG4gICAgICAgIGF1ZGlvUGxheWVyLnBsYXkoYXVkaW9QbGF5ZXIuYXVkaW9GcmFnbWVudHMuSElULFxyXG4gICAgICAgICAgICBhdWRpb1BsYXllci5wbGF5LmJpbmQoYXVkaW9QbGF5ZXIsIGF1ZGlvUGxheWVyLmF1ZGlvRnJhZ21lbnRzLkRJRSlcclxuICAgICAgICApO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgcmVxdWlyZWQgZXZlbnRzIGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBnYW1lXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfc2V0RXZlbnRzKCkge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSAhPSAzMikgcmV0dXJuOyAvLyBOb3Qgc3BhY2ViYXJcclxuICAgICAgICAgICAgaWYgKHRoaXMuaGFzU3RvcHBlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2xpY2tSZXN0YXJ0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYmlyZC5mbGFwKCk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICBpZiAoXCJvbnRvdWNoc3RhcnRcIiBpbiB3aW5kb3cpIHtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1N0b3BwZWQpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGJpcmQuZmxhcCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNTdG9wcGVkKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBiaXJkLmZsYXAoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhbmQgZ2V0IHRoZSB0aWxlZCBzcHJpdGUgZm9yIHRoZSB3YXRlclxyXG4gICAgICogQHJldHVybnMge1RpbGluZ1Nwcml0ZXxQSVhJLlRpbGluZ1Nwcml0ZXx7ZW51bWVyYWJsZSwgZ2V0fXwqfVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2dldFdhdGVyU3ByaXRlKCkge1xyXG4gICAgICAgIGxldCB3YXRlclRleHR1cmUgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLldBVEVSKTtcclxuICAgICAgICBsZXQgd2F0ZXJTcHJpdGUgPSBuZXcgUElYSS5leHRyYXMuVGlsaW5nU3ByaXRlKHdhdGVyVGV4dHVyZSwgc2V0dGluZ3MuZ2FtZVdpZHRoLCBzZXR0aW5ncy5wbGF5YWJsZUFyZWFCZWxvd1dhdGVyKTtcclxuICAgICAgICB3YXRlclNwcml0ZS55ID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5jZWlsaW5nKS5oZWlnaHQgKyBzZXR0aW5ncy5wbGF5YWJsZUFyZWFBYm92ZVdhdGVyO1xyXG5cclxuICAgICAgICByZXR1cm4gd2F0ZXJTcHJpdGU7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdhbWU7XHJcbiIsImxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MnKTtcclxubGV0IHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxubGV0IGdhbWVPdmVyU2NyZWVuID0ge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNhbGxiYWNrIHdoZW4gdGhlIF9yZXN0YXJ0IGJ1dHRvbiBpcyBjbGlja2VkXHJcbiAgICAgKi9cclxuICAgIG9uQ2xpY2tSZXN0YXJ0OiB1bmRlZmluZWQsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY29udGFpbmVyIHRoYXQgd2lsbCBob2xkIHRoZSBnYW1lIG92ZXIgY29udGFpbmVyXHJcbiAgICAgKi9cclxuICAgIGNvbnRhaW5lcjogdW5kZWZpbmVkLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNvbnRhaW5lciB0aGF0IHdpbGwgaG9sZCB0aGUgdGhlIHNjb3JlcyBhbmQgdGhlIGdhbWUgb3ZlciBzcHJpdGVcclxuICAgICAqL1xyXG4gICAgZ2FtZU92ZXJDb250YWluZXI6IHVuZGVmaW5lZCxcclxuXHJcbiAgICBzY29yZVlQb3NpdGlvbjogOTMsXHJcbiAgICBiZXN0U2NvcmVZUG9zaXRpb246IDEzNSxcclxuICAgIHJlc3RhcnRCdXR0b25ZUG9zaXRpb246IDE5MCxcclxuICAgIGdhbWVPdmVyQ29udGFpbmVyWFBvc2l0aW9uOiAxNTAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCZWNhdXNlIHRoZSBzY29yZSBib3ggaXMgbm90IHBlcmZlY3RseSBjZW50ZXJlZCB3ZSBhZGQgc29tZSBvZmZzZXRcclxuICAgICAqL1xyXG4gICAgZWxlbWVudHNYT2Zmc2V0OiAyLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIHRoZSBnYW1lIG92ZXIgc2NyZWVuLCBzaG91bGQgb25seSBiZSBjYWxsZWQgb25jZVxyXG4gICAgICovXHJcbiAgICBpbml0aWFsaXplKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0UmVzdGFydENhbGxiYWNrKGNhbGxiYWNrKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIueSA9IHRoaXMuX2dldENvbnRhaW5lcllQb3NpdGlvbigpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnggPSB0aGlzLmdhbWVPdmVyQ29udGFpbmVyWFBvc2l0aW9uO1xyXG5cclxuICAgICAgICB0aGlzLmdhbWVPdmVyQ29udGFpbmVyID0gbmV3IFBJWEkuU3ByaXRlKHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuR0FNRV9PVkVSKSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3JlbmRlclNjb3JlcygwLCAwKTtcclxuXHJcbiAgICAgICAgbGV0IHJlc3RhcnRCdXR0b24gPSBuZXcgUElYSS5TcHJpdGUodXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5SRVNUQVJUKSk7XHJcbiAgICAgICAgcmVzdGFydEJ1dHRvbi54ID0gdGhpcy5nYW1lT3ZlckNvbnRhaW5lci53aWR0aCAvIDIgLSByZXN0YXJ0QnV0dG9uLndpZHRoIC8gMiArIHRoaXMuZWxlbWVudHNYT2Zmc2V0O1xyXG4gICAgICAgIHJlc3RhcnRCdXR0b24ueSA9IHRoaXMucmVzdGFydEJ1dHRvbllQb3NpdGlvbjtcclxuICAgICAgICByZXN0YXJ0QnV0dG9uLmludGVyYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICByZXN0YXJ0QnV0dG9uLmJ1dHRvbk1vZGUgPSB0cnVlO1xyXG4gICAgICAgIHJlc3RhcnRCdXR0b24uZGVmYXVsdEN1cnNvciA9ICdwb2ludGVyJztcclxuXHJcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5hZGRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMub25DbGlja1Jlc3RhcnQpO1xyXG5cclxuICAgICAgICBpZiAoXCJvbnRvdWNoc3RhcnRcIiBpbiB3aW5kb3cpIHtcclxuICAgICAgICAgICAgcmVzdGFydEJ1dHRvbi5hZGRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5vbkNsaWNrUmVzdGFydCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmdhbWVPdmVyQ29udGFpbmVyLmFkZENoaWxkKHJlc3RhcnRCdXR0b24pO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLmdhbWVPdmVyQ29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgdGhpcy5oaWRlKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIGdhbWUgb3ZlciBzY3JlZW4gd2l0aCB0aGUgbmV3IHNjb3Jlc1xyXG4gICAgICovXHJcbiAgICB1cGRhdGVTY29yZXMoc2NvcmUsIGJlc3RTY29yZSkge1xyXG4gICAgICAgIHRoaXMuX2NsZWFyU2NvcmVzKCk7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyU2NvcmVzKHNjb3JlLCBiZXN0U2NvcmUpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEhpZGUgdGhlIGdhbWUgb3ZlciBzY3JlZW5cclxuICAgICAqL1xyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICB0aGlzLmdhbWVPdmVyQ29udGFpbmVyLnZpc2libGUgPSBmYWxzZTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG93IHRoZSBnYW1lIG92ZXIgc2NyZWVuXHJcbiAgICAgKi9cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lT3ZlckNvbnRhaW5lci52aXNpYmxlID0gdHJ1ZTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGNhbGxiYWNrIGZvciB3aGVuIHRoZSBfcmVzdGFydCBidXR0b24gaGFzIGJlZW4gcHJlc3NlZFxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfc2V0UmVzdGFydENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IEVycm9yKCdTdXBwbGllZCBjYWxsYmFjayBpcyBub3QgYSBmdW5jdGlvbicpO1xyXG5cclxuICAgICAgICB0aGlzLm9uQ2xpY2tSZXN0YXJ0ID0gY2FsbGJhY2s7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHNjb3JlXHJcbiAgICAgKiBAcGFyYW0gYmVzdFNjb3JlXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfcmVuZGVyU2NvcmVzKHNjb3JlLCBiZXN0U2NvcmUpIHtcclxuICAgICAgICB0aGlzLnNjb3JlU3ByaXRlID0gdXRpbHMuc2NvcmVUb1Nwcml0ZXMoc2NvcmUsIHV0aWxzLnNjb3JlU2l6ZS5TTUFMTCk7XHJcbiAgICAgICAgdGhpcy5zY29yZVNwcml0ZS54ID0gdGhpcy5nYW1lT3ZlckNvbnRhaW5lci53aWR0aCAvIDIgLSB0aGlzLnNjb3JlU3ByaXRlLndpZHRoIC8gMiArIHRoaXMuZWxlbWVudHNYT2Zmc2V0O1xyXG4gICAgICAgIHRoaXMuc2NvcmVTcHJpdGUueSA9IHRoaXMuc2NvcmVZUG9zaXRpb247XHJcblxyXG4gICAgICAgIHRoaXMuYmVzdFNjb3JlU3ByaXRlID0gdXRpbHMuc2NvcmVUb1Nwcml0ZXMoYmVzdFNjb3JlLCB1dGlscy5zY29yZVNpemUuU01BTEwpO1xyXG4gICAgICAgIHRoaXMuYmVzdFNjb3JlU3ByaXRlLnggPSB0aGlzLmdhbWVPdmVyQ29udGFpbmVyLndpZHRoIC8gMiAtIHRoaXMuYmVzdFNjb3JlU3ByaXRlLndpZHRoIC8gMiArIHRoaXMuZWxlbWVudHNYT2Zmc2V0O1xyXG4gICAgICAgIHRoaXMuYmVzdFNjb3JlU3ByaXRlLnkgPSB0aGlzLmJlc3RTY29yZVlQb3NpdGlvbjtcclxuXHJcbiAgICAgICAgdGhpcy5nYW1lT3ZlckNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLnNjb3JlU3ByaXRlKTtcclxuICAgICAgICB0aGlzLmdhbWVPdmVyQ29udGFpbmVyLmFkZENoaWxkKHRoaXMuYmVzdFNjb3JlU3ByaXRlKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfY2xlYXJTY29yZXMoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lT3ZlckNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLnNjb3JlU3ByaXRlKTtcclxuICAgICAgICB0aGlzLmdhbWVPdmVyQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuYmVzdFNjb3JlU3ByaXRlKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2dldENvbnRhaW5lcllQb3NpdGlvbigpIHtcclxuICAgICAgICBsZXQgY2VpbGluZ0hlaWdodCA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuY2VpbGluZykuaGVpZ2h0O1xyXG4gICAgICAgIGxldCBnYW1lT3ZlclNjcmVlbkhlaWdodCA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuR0FNRV9PVkVSKS5oZWlnaHQ7XHJcbiAgICAgICAgcmV0dXJuIChjZWlsaW5nSGVpZ2h0ICsgc2V0dGluZ3MucGxheWFibGVBcmVhQWJvdmVXYXRlciArIHNldHRpbmdzLnBsYXlhYmxlQXJlYUJlbG93V2F0ZXIpIC8gMiAtIGdhbWVPdmVyU2NyZWVuSGVpZ2h0IC8gMjtcclxuICAgIH1cclxuXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdhbWVPdmVyU2NyZWVuO1xyXG4iLCJsZXQgc2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldHRpbmdzJyk7XHJcbmxldCB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMuanMnKTtcclxuXHJcbmxldCBhdWRpb1BsYXllciA9IHJlcXVpcmUoJy4vYXVkaW9QbGF5ZXInKTtcclxuXHJcbmNvbnN0IHBpcGVGYWNpbmcgPSB7XHJcbiAgICAnVVAnOiAxLFxyXG4gICAgJ0RPV04nOiAtMSxcclxufTtcclxuXHJcbmxldCBsZXZlbCA9IHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNvbnRhaW5lciB0aGF0IHdpbGwgY29udGFpbiBldmVyeXRoaW5nIHRoYXQgbmVlZHMgdG8gYmUgbW92ZWQgdG93YXJkcyB0aGUgcGxheWVyXHJcbiAgICAgKi9cclxuICAgIGNvbnRhaW5lcjogdW5kZWZpbmVkLFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY29udGFpbmVyIHRoYXQgd2lsbCBjb250YWluIGFsbCBmbG9vciB0aWxlc1xyXG4gICAgICovXHJcbiAgICBmbG9vclNwcml0ZTogdW5kZWZpbmVkLFxyXG5cclxuICAgIGNlaWxpbmdTcHJpdGU6IHVuZGVmaW5lZCxcclxuXHJcbiAgICBwaXBlc0NvbnRhaW5lcjogdW5kZWZpbmVkLFxyXG4gICAgcGlwZXM6IFtdLFxyXG5cclxuICAgIHBpcGVUZXh0dXJlOiB1bmRlZmluZWQsXHJcbiAgICBwaXBlVG9wVGV4dHVyZTogdW5kZWZpbmVkLFxyXG4gICAgcGlwZUJvdHRvbVRleHR1cmU6IHVuZGVmaW5lZCxcclxuXHJcbiAgICBmaXJzdFBpcGVGYWNpbmc6IHBpcGVGYWNpbmcuVVAsXHJcblxyXG4gICAgbmV4dFBpcGVGYWNpbmc6IDAsXHJcbiAgICBwbGFjZWRQaXBlc0NvdW50OiAwLFxyXG5cclxuICAgIHBsYXllckluc2lkZVBpcGU6IGZhbHNlLFxyXG5cclxuICAgIHBpcGVHYXBTaXplOiAxMDAsXHJcblxyXG4gICAgcGlwZURpc3RhbmNlOiA0MDAsXHJcbiAgICBmaXJzdFBpcGVEaXN0YW5jZTogODAwLFxyXG5cclxuICAgIHNjb3JlOiAwLFxyXG4gICAgYmVzdFNjb3JlOiAwLFxyXG4gICAgc2NvcmVDb250YWluZXI6IHVuZGVmaW5lZCxcclxuXHJcbiAgICBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX2NyZWF0ZUNlaWxpbmcoKSk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5fY3JlYXRlRmxvb3IoKSk7XHJcblxyXG4gICAgICAgIC8vIFBpcGVzIHN0dWZmXHJcbiAgICAgICAgdGhpcy5uZXh0UGlwZUZhY2luZyA9IHRoaXMuZmlyc3RQaXBlRmFjaW5nO1xyXG4gICAgICAgIHRoaXMucGlwZVRleHR1cmUgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLnBpcGUpO1xyXG4gICAgICAgIHRoaXMucGlwZVRvcFRleHR1cmUgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLnBpcGVVcCk7XHJcbiAgICAgICAgdGhpcy5waXBlQm90dG9tVGV4dHVyZSA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMucGlwZURvd24pO1xyXG5cclxuICAgICAgICB0aGlzLnBpcGVzQ29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2luaXRpYWxQaXBlcygpO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLnBpcGVzQ29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgLy8gU2NvcmVcclxuICAgICAgICB0aGlzLnNjb3JlQ29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcbiAgICAgICAgdGhpcy5zY29yZUNvbnRhaW5lci5hZGRDaGlsZCh1dGlscy5zY29yZVRvU3ByaXRlcyh0aGlzLnNjb3JlLCB1dGlscy5zY29yZVNpemUuQklHKSk7XHJcblxyXG4gICAgICAgIC8vIFRvZG86IE1ha2UgdmFyc1xyXG4gICAgICAgIHRoaXMuc2NvcmVDb250YWluZXIueCA9IDEwO1xyXG4gICAgICAgIHRoaXMuc2NvcmVDb250YWluZXIueSA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuY2VpbGluZykuaGVpZ2h0ICsgMTA7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuc2NvcmVDb250YWluZXIpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xyXG4gICAgICAgIHRoaXMuc2NvcmVDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5zY29yZUNvbnRhaW5lci5jaGlsZHJlblswXSk7XHJcbiAgICAgICAgdGhpcy5zY29yZUNvbnRhaW5lci5hZGRDaGlsZCh1dGlscy5zY29yZVRvU3ByaXRlcyh0aGlzLnNjb3JlLCB1dGlscy5zY29yZVNpemUuQklHKSk7XHJcblxyXG4gICAgICAgIHRoaXMucGlwZXNDb250YWluZXIueCA9IDA7XHJcbiAgICAgICAgdGhpcy5waXBlc0NvbnRhaW5lci5jaGlsZHJlbi5zcGxpY2UoMCk7XHJcbiAgICAgICAgdGhpcy5waXBlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMucGxheWVySW5zaWRlUGlwZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubmV4dFBpcGVGYWNpbmcgPSB0aGlzLmZpcnN0UGlwZUZhY2luZztcclxuICAgICAgICB0aGlzLnBsYWNlZFBpcGVzQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuX2luaXRpYWxQaXBlcygpO1xyXG4gICAgfSxcclxuXHJcbiAgICBsb29wKCkge1xyXG4gICAgICAgIHRoaXMuY2VpbGluZ1Nwcml0ZS50aWxlUG9zaXRpb24ueCArPSAtc2V0dGluZ3MuZm9yd2FyZFNwZWVkO1xyXG4gICAgICAgIHRoaXMuZmxvb3JTcHJpdGUudGlsZVBvc2l0aW9uLnggKz0gLXNldHRpbmdzLmZvcndhcmRTcGVlZDtcclxuXHJcbiAgICAgICAgLy8gUGlwZXMgc3R1ZmZcclxuICAgICAgICB0aGlzLnBpcGVzQ29udGFpbmVyLnggKz0gLXNldHRpbmdzLmZvcndhcmRTcGVlZDtcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIHBpcGVzIHdoZW4gdGhleSdyZSBvZmYgc2NyZWVuXHJcbiAgICAgICAgaWYgKHRoaXMucGlwZXMubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGlwZXNDb250YWluZXIueCA8IC10aGlzLnBpcGVzWzBdLnggLSB0aGlzLnBpcGVUZXh0dXJlLndpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBpcGVzQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMucGlwZXNbMF0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5waXBlcy5zaGlmdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYWNlTmV3UGlwZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIHkgcG9zaXRpb24gb2YgdGhlIHdhdGVyXHJcbiAgICAgKi9cclxuICAgIGdldFdhdGVyTGV2ZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHNldHRpbmdzLnBsYXlhYmxlQXJlYUFib3ZlV2F0ZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIHBpcGVDb2xsaXNpb24oYmlyZCkge1xyXG5cclxuICAgICAgICAvLyBXZSB3aWxsIGNoZWNrIGlmIHRoZSBiaXJkIGlzIGNvbGxpZGluZyB3aXRoIHRoZSBmaXJzdCBwaXBlXHJcbiAgICAgICAgLy8gVGhlIGJpcmQgY2FuJ3QgcG9zc2libHkgaGl0IGFueSBvdGhlciBwaXBlc1xyXG5cclxuICAgICAgICAvLyBXZSBvbmx5IG5lZWQgdG8gY29sbGlkZSB3aXRoIHRoZSBsZWZ0IHNpZGUgb2YgdGhlIHBpcGVzIGFuZCB0aGUgdG9wL2JvdHRvbSBwaWVjZXNcclxuICAgICAgICAvLyBXZSBrbm93IGhvdyBmYXIgdGhlIHBpcGUgY29udGFpbmVyIGhhcyBtb3ZlZCB0byB0aGUgcmlnaHQsIHdlIGNhbiB1c2UgdGhpcyB0byBnZXQgdGhlIGxlZnQgc2lkZVxyXG5cclxuICAgICAgICAvLyBCZWNhdXNlIG9mIHNxdWFyZSBjb2xsaXNpb24gaXQgY2FuIGZlZWwgdW5mYWlyIHdoZW4gaGl0dGluZyB0aGUgc2lkZXMgb2YgdGhlIHBpcGVzIHdoaWxlIGF0IGFuIGFuZ2xlXHJcbiAgICAgICAgLy8gV2hpY2ggb2Z0ZW4gaGFwcGVucyB3aGVuIGRpdmluZyB0aHJvdWdoIHRoZSBnYXAuIFRvIG1ha2UgdGhpbmdzIGEgYml0IGZhaXJlciwgYWRkZWQgYSBzbWFsbCBtYXJnaW47XHJcbiAgICAgICAgbGV0IGNvbGxpc2lvbk1hcmdpbiA9IDI7XHJcblxyXG4gICAgICAgIGxldCBsZWZ0ID0gdGhpcy5waXBlc0NvbnRhaW5lci54ICsgdGhpcy5waXBlc1swXS54ICsgY29sbGlzaW9uTWFyZ2luO1xyXG4gICAgICAgIGxldCByaWdodCA9IGxlZnQgKyB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLnBpcGUpLndpZHRoIC0gY29sbGlzaW9uTWFyZ2luO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRoZSBiaXJkIGlzIGluIHRoZSBsZWZ0L3JpZ2h0IGJvdW5kYXJpZXMgb2YgdGhlIGZpcnN0IHBpcGVcclxuICAgICAgICBpZiAoYmlyZC5nZXRSaWdodCgpID4gbGVmdCAmJiBiaXJkLmdldExlZnQoKSA8IHJpZ2h0KSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBsYXllckluc2lkZVBpcGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgLy8gVGhlIGJpcmQgaXMgYWJvdmUgdGhlIGdhcCFcclxuICAgICAgICAgICAgaWYgKGJpcmQuZ2V0VG9wKCkgPCB0aGlzLnBpcGVzWzBdLmdhcC50b3AgfHwgYmlyZC5nZXRCb3R0b20oKSA+IHRoaXMucGlwZXNbMF0uZ2FwLmJvdHRvbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGxheWVySW5zaWRlUGlwZSkge1xyXG4gICAgICAgICAgICAvLyBQbGF5ZXIgaGFzIHBhc3NlZCB0aGUgcGlwZVxyXG4gICAgICAgICAgICB0aGlzLl9pbmNyZWFzZVNjb3JlKCk7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVySW5zaWRlUGlwZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICBfY3JlYXRlQ2VpbGluZygpIHtcclxuICAgICAgICBsZXQgY2VpbGluZ1RleHR1cmUgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLmNlaWxpbmcpO1xyXG5cclxuICAgICAgICB0aGlzLmNlaWxpbmdTcHJpdGUgPSBuZXcgUElYSS5leHRyYXMuVGlsaW5nU3ByaXRlKGNlaWxpbmdUZXh0dXJlLCBzZXR0aW5ncy5nYW1lV2lkdGgsIGNlaWxpbmdUZXh0dXJlLmhlaWdodCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmNlaWxpbmdTcHJpdGU7XHJcbiAgICB9LFxyXG5cclxuICAgIF9jcmVhdGVGbG9vcigpIHtcclxuICAgICAgICBsZXQgZmxvb3JUZXh0dXJlID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5mbG9vcik7XHJcblxyXG4gICAgICAgIHRoaXMuZmxvb3JTcHJpdGUgPSBuZXcgUElYSS5leHRyYXMuVGlsaW5nU3ByaXRlKGZsb29yVGV4dHVyZSwgc2V0dGluZ3MuZ2FtZVdpZHRoLCBmbG9vclRleHR1cmUuaGVpZ2h0KTtcclxuICAgICAgICB0aGlzLmZsb29yU3ByaXRlLnkgPSBzZXR0aW5ncy5wbGF5YWJsZUFyZWFBYm92ZVdhdGVyICsgc2V0dGluZ3MucGxheWFibGVBcmVhQmVsb3dXYXRlciArIHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuY2VpbGluZykuaGVpZ2h0O1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5mbG9vclNwcml0ZTtcclxuICAgIH0sXHJcblxyXG4gICAgX2luaXRpYWxQaXBlcygpIHtcclxuICAgICAgICBsZXQgc3RhcnRpbmdQaXBlc0NvdW50ID0gTWF0aC5jZWlsKHNldHRpbmdzLmdhbWVXaWR0aCAvIHRoaXMucGlwZURpc3RhbmNlKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGFydGluZ1BpcGVzQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgcGlwZSA9IHRoaXMuX2NyZWF0ZVBpcGUodGhpcy5fZ2V0UmFuZG9tUGlwZUhlaWdodCgpLCB0aGlzLm5leHRQaXBlRmFjaW5nKTtcclxuICAgICAgICAgICAgcGlwZS54ID0gdGhpcy5maXJzdFBpcGVEaXN0YW5jZSArIHRoaXMucGlwZURpc3RhbmNlICogaTtcclxuICAgICAgICAgICAgdGhpcy5waXBlc0NvbnRhaW5lci5hZGRDaGlsZChwaXBlKTtcclxuICAgICAgICAgICAgdGhpcy5waXBlcy5wdXNoKHBpcGUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5uZXh0UGlwZUZhY2luZyAqPSAtMTtcclxuICAgICAgICAgICAgdGhpcy5wbGFjZWRQaXBlc0NvdW50Kys7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBfcGxhY2VOZXdQaXBlKCkge1xyXG4gICAgICAgIC8vIFdlIG5lZWQgdG90YWwgcGlwZSBhbW91bnQsIHRvIGNhbGN1bGF0ZSBwb3NpdGlvbiBvZiBuZXcgb25lXHJcbiAgICAgICAgbGV0IHBpcGUgPSB0aGlzLl9jcmVhdGVQaXBlKHRoaXMuX2dldFJhbmRvbVBpcGVIZWlnaHQoKSwgdGhpcy5uZXh0UGlwZUZhY2luZyk7XHJcbiAgICAgICAgcGlwZS54ID0gdGhpcy5wbGFjZWRQaXBlc0NvdW50ICogdGhpcy5waXBlRGlzdGFuY2UgKyB0aGlzLmZpcnN0UGlwZURpc3RhbmNlO1xyXG4gICAgICAgIHRoaXMucGlwZXNDb250YWluZXIuYWRkQ2hpbGQocGlwZSk7XHJcbiAgICAgICAgdGhpcy5waXBlcy5wdXNoKHBpcGUpO1xyXG5cclxuICAgICAgICB0aGlzLm5leHRQaXBlRmFjaW5nICo9IC0xO1xyXG4gICAgICAgIHRoaXMucGxhY2VkUGlwZXNDb3VudCsrO1xyXG4gICAgfSxcclxuXHJcbiAgICBfY3JlYXRlUGlwZShoZWlnaHQsIGRpcmVjdGlvbikge1xyXG4gICAgICAgIGxldCBjb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuXHJcbiAgICAgICAgbGV0IHRvdGFsUGxheUhlaWdodCA9IHNldHRpbmdzLnBsYXlhYmxlQXJlYUFib3ZlV2F0ZXIgKyBzZXR0aW5ncy5wbGF5YWJsZUFyZWFCZWxvd1dhdGVyO1xyXG5cclxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBwaXBlRmFjaW5nLlVQKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9jcmVhdGVVcEZhY2luZ1BpcGUoaGVpZ2h0KSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09IHBpcGVGYWNpbmcuRE9XTikge1xyXG4gICAgICAgICAgICBjb250YWluZXIuYWRkQ2hpbGQodGhpcy5fY3JlYXRlRG93bkZhY2luZ1BpcGUoaGVpZ2h0KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIHNwYWNlIGZvciBwaXBlIGluIG9wcG9zaXRlIGRpcmVjdGlvbiB0byBjb21wbGV0ZSB0aGUgZ2FwXHJcbiAgICAgICAgaWYgKGhlaWdodCArIHRoaXMucGlwZUdhcFNpemUgPCB0b3RhbFBsYXlIZWlnaHQpIHtcclxuICAgICAgICAgICAgLy8gV2UgY2FuIGZpdCBhbm90aGVyIHBpcGUgb3Bwb3NpdGUgdG8gaXRcclxuICAgICAgICAgICAgbGV0IG9wcG9zaXRlUGlwZUhlaWdodCA9IHRvdGFsUGxheUhlaWdodCAtIGhlaWdodCAtIHRoaXMucGlwZUdhcFNpemU7XHJcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09IHBpcGVGYWNpbmcuVVApXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkQ2hpbGQodGhpcy5fY3JlYXRlRG93bkZhY2luZ1BpcGUob3Bwb3NpdGVQaXBlSGVpZ2h0KSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBwaXBlRmFjaW5nLkRPV04pXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkQ2hpbGQodGhpcy5fY3JlYXRlVXBGYWNpbmdQaXBlKG9wcG9zaXRlUGlwZUhlaWdodCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3RvcmUgdGhlIGluZm9ybWF0aW9uIG9mIHRoZSBnYXAgcG9zaXRpb24gaW4gdGhlIGNvbnRhaW5lciBvYmplY3QgZm9yIGVhc2llciBjb2xsaXNpb24gY2hlY2tzXHJcbiAgICAgICAgbGV0IHRvcCA9IChkaXJlY3Rpb24gPT09IHBpcGVGYWNpbmcuVVAgPyB0b3RhbFBsYXlIZWlnaHQgLSBoZWlnaHQgLSB0aGlzLnBpcGVHYXBTaXplIDogaGVpZ2h0KSArIHRoaXMuY2VpbGluZ1Nwcml0ZS5oZWlnaHQ7XHJcbiAgICAgICAgbGV0IGJvdHRvbSA9IChkaXJlY3Rpb24gPT09IHBpcGVGYWNpbmcuVVAgPyB0b3RhbFBsYXlIZWlnaHQgLSBoZWlnaHQgOiBoZWlnaHQgKyB0aGlzLnBpcGVHYXBTaXplKSArIHRoaXMuY2VpbGluZ1Nwcml0ZS5oZWlnaHQ7XHJcbiAgICAgICAgY29udGFpbmVyLmdhcCA9IHsgdG9wLCBib3R0b20gfVxyXG5cclxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gICAgfSxcclxuXHJcbiAgICBfY3JlYXRlVXBGYWNpbmdQaXBlKGhlaWdodCkge1xyXG4gICAgICAgIGxldCBjb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuXHJcbiAgICAgICAgbGV0IHBpcGVUb3AgPSBuZXcgUElYSS5TcHJpdGUodGhpcy5waXBlVG9wVGV4dHVyZSk7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZENoaWxkKHBpcGVUb3ApO1xyXG5cclxuICAgICAgICBsZXQgcGlwZVBhcnRIZWlnaHQgPSBoZWlnaHQgLSB0aGlzLnBpcGVUb3BUZXh0dXJlLmhlaWdodDtcclxuXHJcbiAgICAgICAgbGV0IHBpcGUgPSBuZXcgUElYSS5leHRyYXMuVGlsaW5nU3ByaXRlKHRoaXMucGlwZVRleHR1cmUsIHRoaXMucGlwZVRleHR1cmUud2lkdGgsIHBpcGVQYXJ0SGVpZ2h0KTtcclxuICAgICAgICBwaXBlLnkgPSB0aGlzLnBpcGVUb3BUZXh0dXJlLmhlaWdodDtcclxuICAgICAgICBjb250YWluZXIuYWRkQ2hpbGQocGlwZSk7XHJcblxyXG4gICAgICAgIC8vIFBsYWNlIHBpcGUgb24gdGhlIGJvdHRvbVxyXG4gICAgICAgIGNvbnRhaW5lci55ID0gc2V0dGluZ3MucGxheWFibGVBcmVhQWJvdmVXYXRlciArIHNldHRpbmdzLnBsYXlhYmxlQXJlYUJlbG93V2F0ZXIgLSBoZWlnaHQgKyB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLmNlaWxpbmcpLmhlaWdodDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcclxuICAgIH0sXHJcblxyXG4gICAgX2NyZWF0ZURvd25GYWNpbmdQaXBlKGhlaWdodCkge1xyXG4gICAgICAgIGxldCBjb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuXHJcbiAgICAgICAgbGV0IHBpcGVQYXJ0SGVpZ2h0ID0gaGVpZ2h0IC0gdGhpcy5waXBlQm90dG9tVGV4dHVyZS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGxldCBwaXBlID0gbmV3IFBJWEkuZXh0cmFzLlRpbGluZ1Nwcml0ZSh0aGlzLnBpcGVUZXh0dXJlLCB0aGlzLnBpcGVUZXh0dXJlLndpZHRoLCBwaXBlUGFydEhlaWdodCk7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZENoaWxkKHBpcGUpO1xyXG5cclxuICAgICAgICBsZXQgcGlwZUJvdHRvbSA9IG5ldyBQSVhJLlNwcml0ZSh0aGlzLnBpcGVCb3R0b21UZXh0dXJlKTtcclxuICAgICAgICBwaXBlQm90dG9tLnkgPSBwaXBlUGFydEhlaWdodDtcclxuICAgICAgICBjb250YWluZXIuYWRkQ2hpbGQocGlwZUJvdHRvbSk7XHJcblxyXG4gICAgICAgIC8vIFdlIGNhbiBwbGFjZSBpdCBhZ2FpbnN0IHRoZSBjZWlsaW5nXHJcbiAgICAgICAgY29udGFpbmVyLnkgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLmNlaWxpbmcpLmhlaWdodDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcclxuICAgIH0sXHJcblxyXG4gICAgX2luY3JlYXNlU2NvcmUoKSB7XHJcbiAgICAgICAgYXVkaW9QbGF5ZXIucGxheShhdWRpb1BsYXllci5hdWRpb0ZyYWdtZW50cy5QT0lOVCk7XHJcbiAgICAgICAgdGhpcy5zY29yZSsrO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zY29yZSA+IHRoaXMuYmVzdFNjb3JlKSB0aGlzLmJlc3RTY29yZSA9IHRoaXMuc2NvcmU7XHJcblxyXG4gICAgICAgIC8vIEJlY2F1c2Ugd2UgcHV0IGFsbCBkaWdpdHMgaW5zaWRlIG9uZSBjb250YWluZXIsIHdlIG9ubHkgaGF2ZSB0byByZW1vdmUgb24gY2hpbGRcclxuICAgICAgICB0aGlzLnNjb3JlQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuc2NvcmVDb250YWluZXIuY2hpbGRyZW5bMF0pO1xyXG5cclxuICAgICAgICB0aGlzLnNjb3JlQ29udGFpbmVyLmFkZENoaWxkKHV0aWxzLnNjb3JlVG9TcHJpdGVzKHRoaXMuc2NvcmUsIHV0aWxzLnNjb3JlU2l6ZS5CSUcpKTtcclxuICAgfSxcclxuXHJcbiAgICBfZ2V0UmFuZG9tUGlwZUhlaWdodCgpIHtcclxuICAgICAgICAvLyBUb2RvOiBHcmFiIGZyb20gc2V0dGluZ3Mgc29tZXdoZXJlXHJcbiAgICAgICAgbGV0IG1pbkhlaWdodCA9IDI4MDtcclxuICAgICAgICBsZXQgbWF4SGVpZ2h0ID0gMzkwO1xyXG5cclxuICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIChtYXhIZWlnaHQgLSBtaW5IZWlnaHQpICsgbWluSGVpZ2h0O1xyXG4gICAgfSxcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbGV2ZWw7XHJcbiIsImNvbnN0IHNldHRpbmdzID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbG9jYXRpb24gb2YgdGhlIGFzc2V0cyBqc29uXHJcbiAgICAgKi9cclxuICAgIGFzc2V0RmlsZTogXCJhc3NldHMvYXNzZXRzLmpzb25cIixcclxuXHJcbiAgICBzb3VuZHNQYXRoOiBcImFzc2V0cy9zb3VuZHMvXCIsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYXJlYSB0aGF0IGlzIGF2YWlsYWJsZSBhYm92ZSB0aGUgd2F0ZXJcclxuICAgICAqL1xyXG4gICAgcGxheWFibGVBcmVhQWJvdmVXYXRlcjogMjYwLFxyXG5cclxuICAgIHBsYXlhYmxlQXJlYUJlbG93V2F0ZXI6IDI2MCxcclxuXHJcbiAgICBnYW1lV2lkdGg6IDAsXHJcblxyXG4gICAgZ2FtZU92ZXJTY3JlZW5Qb3NpdGlvbjogeyB4OiAwLCB5OiAwIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3BlZWQgYXQgd2hpY2ggb2JqZWN0cyBtb3ZlIHRvd2FyZHMgdGhlIHBsYXllclxyXG4gICAgICovXHJcbiAgICBmb3J3YXJkU3BlZWQ6IDUsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3BlZWQgYXQgd2hpY2ggdGhlIGJhY2tncm91bmQgbW92ZXNcclxuICAgICAqL1xyXG4gICAgYmFja2dyb3VuZFNwZWVkOiAyLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGFtb3VudCBvZiBncmF2aXR5IGFkZGVkIHRvIHRoZSB2ZWxvY2l0eSBvZiB0aGUgcGxheWVyIHdoaWxlIGFib3ZlIHRoZSB3YXRlclxyXG4gICAgICovXHJcbiAgICBncmF2aXR5OiAwLjMsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYW1vdW50IG9mIHVwd2FyZCBmb3JjZSBhZGRlZCB0byB0aGUgdmVsb2NpdHkgb2YgdGhlIHBsYXllciB3aGlsZSBiZWxvdyB0aGUgd2F0ZXJcclxuICAgICAqL1xyXG4gICAgd2F0ZXJQdXNoRm9yY2U6IDAuMyxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhbW91bnQgb2YgdXB3YXJkIHZlbG9jaXR5IGlzIGFkZGVkIHRvIHRoZSBwbGF5ZXIgb24gJ2ZsYXBwaW5nJy5cclxuICAgICAqL1xyXG4gICAgYmlyZEZsYXBWZWxvY2l0eTogNC41LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSWYgdmVydGljYWwgdmVsb2NpdHkgb2YgdGhlIHBsYXllciBzaG91bGQgYmUgcmVzZXQgYmVmb3JlIGFwcGx5aW5nIHRoZSBmbGFwIHZlbG9jaXR5XHJcbiAgICAgKi9cclxuICAgIHNob3VsZEJpcmRGbGFwUmVzZXRWZWxvY2l0eTogdHJ1ZSxcclxuXHJcbiAgICBjZWlsaW5nU3ByaXRlSGVpZ2h0OiAwLFxyXG5cclxuICAgIHRleHR1cmVzOiB7XHJcbiAgICAgICAgJ2JhY2tncm91bmQnOiAnc2t5LnBuZycsXHJcbiAgICAgICAgJ2Zsb29yJzogJ2xhbmQucG5nJyxcclxuICAgICAgICAnY2VpbGluZyc6ICdjZWlsaW5nLnBuZycsXHJcbiAgICAgICAgJ3BpcGUnOiAncGlwZS5wbmcnLFxyXG4gICAgICAgICdwaXBlVXAnOiAncGlwZS11cC5wbmcnLFxyXG4gICAgICAgICdwaXBlRG93bic6ICdwaXBlLWRvd24ucG5nJyxcclxuICAgICAgICAnV0FURVInOiAnd2F0ZXIucG5nJyxcclxuICAgICAgICAnR0FNRV9PVkVSJzogJ3Njb3JlYm9hcmQucG5nJyxcclxuICAgICAgICAnUkVTVEFSVCc6ICdyZXBsYXkucG5nJyxcclxuICAgICAgICAnQklHXzAnOiAnZm9udF9iaWdfMC5wbmcnLFxyXG4gICAgICAgICdCSUdfMSc6ICdmb250X2JpZ18xLnBuZycsXHJcbiAgICAgICAgJ0JJR18yJzogJ2ZvbnRfYmlnXzIucG5nJyxcclxuICAgICAgICAnQklHXzMnOiAnZm9udF9iaWdfMy5wbmcnLFxyXG4gICAgICAgICdCSUdfNCc6ICdmb250X2JpZ180LnBuZycsXHJcbiAgICAgICAgJ0JJR181JzogJ2ZvbnRfYmlnXzUucG5nJyxcclxuICAgICAgICAnQklHXzYnOiAnZm9udF9iaWdfNi5wbmcnLFxyXG4gICAgICAgICdCSUdfNyc6ICdmb250X2JpZ183LnBuZycsXHJcbiAgICAgICAgJ0JJR184JzogJ2ZvbnRfYmlnXzgucG5nJyxcclxuICAgICAgICAnQklHXzknOiAnZm9udF9iaWdfOS5wbmcnLFxyXG4gICAgICAgICdTTUFMTF8wJzogJ2ZvbnRfc21hbGxfMC5wbmcnLFxyXG4gICAgICAgICdTTUFMTF8xJzogJ2ZvbnRfc21hbGxfMS5wbmcnLFxyXG4gICAgICAgICdTTUFMTF8yJzogJ2ZvbnRfc21hbGxfMi5wbmcnLFxyXG4gICAgICAgICdTTUFMTF8zJzogJ2ZvbnRfc21hbGxfMy5wbmcnLFxyXG4gICAgICAgICdTTUFMTF80JzogJ2ZvbnRfc21hbGxfNC5wbmcnLFxyXG4gICAgICAgICdTTUFMTF81JzogJ2ZvbnRfc21hbGxfNS5wbmcnLFxyXG4gICAgICAgICdTTUFMTF82JzogJ2ZvbnRfc21hbGxfNi5wbmcnLFxyXG4gICAgICAgICdTTUFMTF83JzogJ2ZvbnRfc21hbGxfNy5wbmcnLFxyXG4gICAgICAgICdTTUFMTF84JzogJ2ZvbnRfc21hbGxfOC5wbmcnLFxyXG4gICAgICAgICdTTUFMTF85JzogJ2ZvbnRfc21hbGxfOS5wbmcnLFxyXG4gICAgfSxcclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZVdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICB9XHJcbn07XHJcblxyXG5zZXR0aW5ncy5pbml0KCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHNldHRpbmdzO1xyXG4iLCJsZXQgc2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldHRpbmdzJyk7XHJcblxyXG5sZXQgc2V0dXAgPSB7XHJcbiAgICAvKipcclxuICAgICAqIFNldCB1cCB0aGUgcmVuZGVyZXJcclxuICAgICAqIEByZXR1cm5zIHtQSVhJLldlYkdMUmVuZGVyZXJ8UElYSS5DYW52YXNSZW5kZXJlcn1cclxuICAgICAqL1xyXG4gICAgcmVuZGVyZXIoKSB7XHJcbiAgICAgICAgbGV0IHJlbmRlcmVyID0gUElYSS5hdXRvRGV0ZWN0UmVuZGVyZXIoc2V0dGluZ3MuZ2FtZVdpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xyXG4gICAgICAgIHJlbmRlcmVyLnZpZXcuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgICAgcmVuZGVyZXIudmlldy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIHJlbmRlcmVyLmJhY2tncm91bmRDb2xvciA9IDB4NGVjMGNhO1xyXG4gICAgICAgIHJlbmRlcmVyLmF1dG9SZXNpemUgPSB0cnVlO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHJlbmRlcmVyLnZpZXcpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVuZGVyZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCB0aGUgYXNzZXRzXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgYWN0aW9uIHRvIHBlcmZvcm0gYWZ0ZXIgYXNzZXRzIGhhdmUgYmVlbiBsb2FkZWRcclxuICAgICAqL1xyXG4gICAgbG9hZEFzc2V0cyhjYWxsYmFjaykge1xyXG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBFcnJvcignQ2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcblxyXG4gICAgICAgIFBJWEkubG9hZGVyLmFkZChcImFzc2V0cy9hc3NldHMuanNvblwiKS5sb2FkKGNhbGxiYWNrKTtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gc2V0dXA7XHJcbiIsImxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MnKTtcclxuXHJcbmxldCB1dGlscyA9IHtcclxuXHJcbiAgICBzY29yZVNpemU6IHtcclxuICAgICAgICAnU01BTEwnOiAwLFxyXG4gICAgICAgICdCSUcnOiAxXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgdGV4dHVyZSBmcm9tIHRoZSBwaXhpIGxvYWRlciBieSBuYW1lXHJcbiAgICAgKiBAcGFyYW0gbmFtZSB0ZXh0dXJlIG5hbWUsIHdpdGggZXh0ZW5zaW9uXHJcbiAgICAgKiBAcmV0dXJucyB7KnxQSVhJLlRleHR1cmV8RnJhbWVPYmplY3R9XHJcbiAgICAgKi9cclxuICAgIGdldFRleHR1cmUobmFtZSkge1xyXG4gICAgICAgIHJldHVybiBQSVhJLmxvYWRlci5yZXNvdXJjZXNbc2V0dGluZ3MuYXNzZXRGaWxlXS50ZXh0dXJlc1tuYW1lXVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpbGwgYSBnaXZlbiBwaXhpIGNvbnRhaW5lciBhbmQgZmlsbCBpdCB3aXRoIHZlcnRpY2FsbHkgYWxpZ25lZCB0aWxlcyBmaXR0aW5nIHdob2xlIHdpbmRvdyB3aWR0aFxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5lclxyXG4gICAgICogQHBhcmFtIHRleHR1cmVcclxuICAgICAqL1xyXG4gICAgZmlsbENvbnRhaW5lcldpdGhXaW5kb3dXaWR0aFRpbGVzKGNvbnRhaW5lciwgdGV4dHVyZSkge1xyXG4gICAgICAgIGxldCByZXF1aXJlZFRpbGVzID0gdGhpcy5fZ2V0UmVxdWlyZWRXaWR0aFRpbGVzKHRleHR1cmUud2lkdGgpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcXVpcmVkVGlsZXM7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdGlsZSA9IG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlKTtcclxuICAgICAgICAgICAgdGlsZS54ID0gdGlsZS53aWR0aCAqIGk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDaGlsZCh0aWxlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNjb3JlVG9TcHJpdGVzKHNjb3JlLCBzaXplKSB7XHJcbiAgICAgICAgbGV0IHN0cmluZ1Njb3JlID0gc2NvcmUudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgbGV0IHRleHR1cmVQcmVmaXggPSBzaXplID09PSB0aGlzLnNjb3JlU2l6ZS5CSUcgPyAnQklHXycgOiAnU01BTExfJztcclxuICAgICAgICBsZXQgbGV0dGVyU3BhY2luZyA9IHNpemUgPT09IHRoaXMuc2NvcmVTaXplLkJJRyA/IDI1IDogMTA7XHJcblxyXG5cclxuICAgICAgICBsZXQgZGlnaXRzQ29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBzdHJpbmdTY29yZS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgZGlnaXQgPSBuZXcgUElYSS5TcHJpdGUodGhpcy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzW3RleHR1cmVQcmVmaXggKyBzdHJpbmdTY29yZS5jaGFyQXQoaSldKSk7XHJcbiAgICAgICAgICAgIGRpZ2l0LnggPSBpICogbGV0dGVyU3BhY2luZztcclxuICAgICAgICAgICAgZGlnaXRzQ29udGFpbmVyLmFkZENoaWxkKGRpZ2l0KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGRpZ2l0c0NvbnRhaW5lcjtcclxuICAgIH0sXHJcblxyXG4gICAgX2dldFJlcXVpcmVkV2lkdGhUaWxlcyh0aWxlV2lkdGgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKHNldHRpbmdzLmdhbWVXaWR0aCAvIHRpbGVXaWR0aCkgKyAxO1xyXG4gICAgfVxyXG5cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gdXRpbHM7XHJcbiJdfQ=="}