{"version":3,"sources":["e:/Code/pixi/node_modules/browser-pack/_prelude.js","js/main.js","e:/Code/pixi/js/Pipe.js","e:/Code/pixi/js/audioPlayer.js","e:/Code/pixi/js/background.js","e:/Code/pixi/js/bird.js","e:/Code/pixi/js/game.js","e:/Code/pixi/js/gameOverScreen.js","e:/Code/pixi/js/level.js","e:/Code/pixi/js/settings.js","e:/Code/pixi/js/setup.js","e:/Code/pixi/js/utils.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","let game = require('./game');\r\n\r\n(function() {\r\n    game.start();\r\n})();\r\n\r\n","let settings = require('./settings');\r\nlet utils = require('./utils');\r\n\r\nclass Pipe {\r\n    constructor(height, facing) {\r\n        this.height = height;\r\n        this.facing = facing;\r\n\r\n        this.pipeTexture = utils.getTexture(settings.textures.PIPE);\r\n        this.pipeTopTexture = utils.getTexture(settings.textures.PIPE_UP);\r\n        this.pipeBottomTexture = utils.getTexture(settings.textures.PIPE_DOWN);\r\n\r\n        this._container = new PIXI.Container();\r\n\r\n        let totalPlayHeight = settings.playableAreaAboveWater + settings.playableAreaBelowWater;\r\n\r\n        if (facing === Pipe.UP) {\r\n            this._container.addChild(this._createUpFacingPipe(height));\r\n        } else if (facing === Pipe.DOWN) {\r\n            this._container.addChild(this._createDownFacingPipe(height));\r\n        }\r\n\r\n        // Check if we have space for pipe in opposite direction to complete the gap\r\n        if (height + settings.pipeGapSize < totalPlayHeight) {\r\n            // We can fit another pipe opposite to it\r\n            let oppositePipeHeight = totalPlayHeight - height - settings.pipeGapSize;\r\n            if (facing === Pipe.UP)\r\n                this._container.addChild(this._createDownFacingPipe(oppositePipeHeight));\r\n\r\n            if (facing === Pipe.DOWN)\r\n                this._container.addChild(this._createUpFacingPipe(oppositePipeHeight));\r\n        }\r\n\r\n        let ceilingSpriteHeight = utils.getTexture(settings.textures.CEILING).height;\r\n\r\n        // Store the information of the gap position in the container object for easier collision checks\r\n        let top = (facing === Pipe.UP ? totalPlayHeight - height - settings.pipeGapSize : height) + ceilingSpriteHeight;\r\n        let bottom = (facing === Pipe.UP ? totalPlayHeight - height : height + settings.pipeGapSize) + ceilingSpriteHeight;\r\n        this.container.gap = { top, bottom }\r\n    }\r\n\r\n    _createUpFacingPipe(height) {\r\n        let container = new PIXI.Container();\r\n\r\n        let pipeTop = new PIXI.Sprite(this.pipeTopTexture);\r\n        container.addChild(pipeTop);\r\n\r\n        let pipePartHeight = height - this.pipeTopTexture.height;\r\n\r\n        let pipe = new PIXI.extras.TilingSprite(this.pipeTexture, this.pipeTexture.width, pipePartHeight);\r\n        pipe.y = this.pipeTopTexture.height;\r\n        container.addChild(pipe);\r\n\r\n        // Place pipe on the bottom\r\n        container.y = settings.playableAreaAboveWater + settings.playableAreaBelowWater - height + utils.getTexture(settings.textures.CEILING).height;\r\n\r\n        return container;\r\n    }\r\n\r\n    _createDownFacingPipe(height) {\r\n        let container = new PIXI.Container();\r\n\r\n        let pipePartHeight = height - this.pipeBottomTexture.height;\r\n\r\n        let pipe = new PIXI.extras.TilingSprite(this.pipeTexture, this.pipeTexture.width, pipePartHeight);\r\n        container.addChild(pipe);\r\n\r\n        let pipeBottom = new PIXI.Sprite(this.pipeBottomTexture);\r\n        pipeBottom.y = pipePartHeight;\r\n        container.addChild(pipeBottom);\r\n\r\n        // We can place it against the ceiling\r\n        container.y = utils.getTexture(settings.textures.CEILING).height;\r\n\r\n        return container;\r\n    }\r\n\r\n    get container() {\r\n        return this._container;\r\n    }\r\n\r\n    set container(container) {\r\n        this._container = container;\r\n    }\r\n\r\n    static get textureWidth() {\r\n        return utils.getTexture(settings.textures.PIPE).width;\r\n    }\r\n\r\n    static get UP() {\r\n        return 1;\r\n    }\r\n\r\n    static get DOWN() {\r\n        return -1;\r\n    }\r\n}\r\n\r\nmodule.exports = Pipe;\r\n","let settings = require('./settings');\r\n\r\nlet audioPlayer = {\r\n\r\n    audioFragments: {\r\n        'FLAP': 'sfx_wing.ogg',\r\n        'HIT': 'sfx_hit.ogg',\r\n        'DIE': 'sfx_die.ogg',\r\n        'POINT': 'sfx_point.ogg',\r\n        'SWIM': 'sfx_blub.ogg',\r\n        'ENTER_WATER': 'sfx_water-enter.ogg',\r\n        'EXIT_WATER': 'sfx_water-exit.ogg',\r\n    },\r\n\r\n    _audio: [],\r\n\r\n    init() {\r\n        // Todo: Maybe we need to wait with starting the game until these have been loaded\r\n        for (let key in this.audioFragments) {\r\n            this._audio[this.audioFragments[key]] = new Audio(settings.soundsPath + this.audioFragments[key]);\r\n        }\r\n    },\r\n\r\n    play(audioFragment, callback) {\r\n        if (this._audio[audioFragment].currentTime > 0) {\r\n            this._audio[audioFragment].currentTime = 0;\r\n        }\r\n\r\n        this._audio[audioFragment].play();\r\n\r\n        if (typeof callback === 'function')\r\n            setTimeout(callback, this._audio[audioFragment].duration * 1000);\r\n    }\r\n};\r\n\r\naudioPlayer.init();\r\n\r\n\r\nmodule.exports = audioPlayer;\r\n","let settings = require('./settings.js');\r\nlet utils = require('./utils.js');\r\n\r\nvar background = {\r\n    /**\r\n     * The container that will contain all background tiles lined up\r\n     */\r\n    backgroundSprite: undefined,\r\n\r\n    /**\r\n     * Initialize the background\r\n     * @returns {PIXI.Sprite}\r\n     */\r\n    initialize() {\r\n        let skyTileTexture = utils.getTexture(settings.textures.BACKGROUND);\r\n        this.backgroundSprite = new PIXI.extras.TilingSprite(skyTileTexture, settings.gameWidth, skyTileTexture.height);\r\n        this.backgroundSprite.y = this._getBackgroundSpriteYPosition(skyTileTexture.height);\r\n\r\n        return this.backgroundSprite;\r\n    },\r\n\r\n    /**\r\n     * Update loop of the background\r\n     */\r\n    loop() {\r\n        this.backgroundSprite.tilePosition.x += -settings.backgroundSpeed;\r\n    },\r\n\r\n    /**\r\n     * Get the y position for the background sprite\r\n     * @returns {Number}\r\n     * @private\r\n     */\r\n    _getBackgroundSpriteYPosition(height) {\r\n        return settings.playableAreaAboveWater - height + utils.getTexture(settings.textures.CEILING).height;\r\n    }\r\n};\r\n\r\nmodule.exports = background;\r\n","let settings = require('./settings');\r\nlet utils = require('./utils');\r\n\r\nlet audioPlayer = require('./audioPlayer');\r\n\r\nlet bird = {\r\n    sprite: undefined,\r\n\r\n    /**\r\n     * The velocity of the bird\r\n     */\r\n    velocity: 0,\r\n\r\n    /**\r\n     * Bool if the bird is below the water\r\n     */\r\n    isBelowWater: false,\r\n\r\n    /**\r\n     * The amount of frames the animation has\r\n     */\r\n    animationFrames: 4,\r\n\r\n    birdTextureNamePrefix: 'bird_',\r\n    birdTextureNameSuffix: '.png',\r\n\r\n    initialize() {\r\n        this.sprite = this._setupBirdSprite();\r\n        return this.sprite;\r\n    },\r\n\r\n    loop() {\r\n        if (this.isBelowWater) {\r\n            this.velocity -= settings.waterPushForce;\r\n        } else {\r\n            this.velocity += settings.gravity;\r\n        }\r\n\r\n        this.sprite.y += this.velocity;\r\n        this.sprite.rotation = Math.atan2(this.velocity, settings.forwardSpeed);\r\n    },\r\n\r\n    /**\r\n     * Flap behaviour, is different based on being below or above water\r\n     */\r\n    flap() {\r\n        // Setting to easily test different flap behaviour\r\n        if (settings.shouldBirdFlapResetVelocity) {\r\n            this.velocity = 0;\r\n        }\r\n\r\n        if (this.isBelowWater) {\r\n            this._swim();\r\n        } else {\r\n            this._flap();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Reset the position and velocity of the bird\r\n     */\r\n    reset() {\r\n        this.sprite.x = settings.birdStartPosition.x;\r\n        this.sprite.y = settings.birdStartPosition.y;\r\n        this.velocity = 0;\r\n    },\r\n\r\n    /**\r\n     * Simple helper function to get the top position of the bird\r\n     * @returns {number}\r\n     */\r\n    getTop() {\r\n        return this.sprite.y - this.sprite.height / 2;\r\n    },\r\n\r\n    /**\r\n     * Simple helper function to get the bottom position of the bird\r\n     * @returns {number}\r\n     */\r\n    getBottom() {\r\n        return this.sprite.y + this.sprite.height / 2;\r\n    },\r\n\r\n    /**\r\n     * Simple helper function to get the right position of the bird\r\n     * @returns {number}\r\n     */\r\n    getRight() {\r\n        return this.sprite.x + this.sprite.width / 2;\r\n    },\r\n\r\n    /**\r\n     * Simple helper function to get the left position of the bird\r\n     * @returns {number}\r\n     */\r\n    getLeft() {\r\n        return this.sprite.x - this.sprite.width / 2;\r\n    },\r\n\r\n    /**\r\n     * When the bird enters the water\r\n     */\r\n    enterWater() {\r\n        if (this.isBelowWater) return;\r\n        this.isBelowWater = true;\r\n\r\n        audioPlayer.play(audioPlayer.audioFragments.ENTER_WATER);\r\n    },\r\n\r\n    /**\r\n     * When the bird leaves the water\r\n     */\r\n    leaveWater() {\r\n        if (!this.isBelowWater) return;\r\n        this.isBelowWater = false;\r\n\r\n        audioPlayer.play(audioPlayer.audioFragments.EXIT_WATER);\r\n    },\r\n\r\n    /**\r\n     * Setup the bird sprite with its animations\r\n     * @returns {AnimatedSprite|*}\r\n     * @private\r\n     */\r\n    _setupBirdSprite() {\r\n        let spriteFrames = [];\r\n        for (let i = 0; i < this.animationFrames; i++) {\r\n            spriteFrames.push(utils.getTexture(this.birdTextureNamePrefix + i +  this.birdTextureNameSuffix));\r\n        }\r\n\r\n        let sprite = new PIXI.extras.AnimatedSprite(spriteFrames);\r\n\r\n        sprite.animationSpeed = settings.birdAnimationSpeed;\r\n        sprite.play();\r\n\r\n        sprite.anchor.x = 0.5;\r\n        sprite.anchor.y = 0.5;\r\n\r\n        sprite.x = settings.birdStartPosition.x;\r\n        sprite.y = settings.birdStartPosition.y;\r\n\r\n        return sprite;\r\n    },\r\n\r\n    /**\r\n     * The above water flap behaviour\r\n     * @private\r\n     */\r\n    _flap() {\r\n        audioPlayer.play(audioPlayer.audioFragments.FLAP);\r\n\r\n        this.velocity -= settings.birdFlapVelocity;\r\n    },\r\n\r\n    /**\r\n     * The below water flap (aka swim) behaviour\r\n     * @private\r\n     */\r\n    _swim() {\r\n        audioPlayer.play(audioPlayer.audioFragments.SWIM);\r\n\r\n        this.velocity += settings.birdFlapVelocity;\r\n    }\r\n};\r\n\r\nmodule.exports = bird;\r\n","let setup = require('./setup');\r\n\r\nlet gameOverScreen = require('./gameOverScreen');\r\nlet audioPlayer = require('./audioPlayer');\r\nlet settings = require('./settings');\r\nlet utils = require('./utils');\r\n\r\nlet background = require('./background');\r\nlet level = require('./level');\r\nlet bird = require('./bird');\r\n\r\nlet game = {\r\n    renderer: undefined,\r\n    stage: undefined,\r\n\r\n    /**\r\n     * Whether the game (loop) has stopped or not\r\n     */\r\n    hasStopped: false,\r\n\r\n    /**\r\n     * Start the game\r\n     */\r\n    start() {\r\n        this.renderer = setup.renderer();\r\n        setup.loadAssets(this.initialize.bind(this));\r\n    },\r\n\r\n    /**\r\n     * Initialize all required parts of the game\r\n     */\r\n    initialize() {\r\n        this.stage = new PIXI.Container();\r\n\r\n        this.stage.addChild(background.initialize());\r\n        this.stage.addChild(level.initialize());\r\n        this.stage.addChild(bird.initialize());\r\n\r\n        this.stage.addChild(this._getWaterSprite());\r\n\r\n        let onRestartClick = this._clickRestart.bind(this);\r\n        this.stage.addChild(gameOverScreen.initialize(onRestartClick));\r\n\r\n        this.renderer.render(this.stage);\r\n\r\n        this._setEvents();\r\n\r\n        this.loop();\r\n    },\r\n\r\n    /**\r\n     * The game loop\r\n     */\r\n    loop() {\r\n        requestAnimationFrame(this.loop.bind(this));\r\n\r\n        // This causes the game loop to freeze. Is used when the players hits something and a menu is shown to _restart\r\n        if (this.hasStopped) return;\r\n\r\n        background.loop();\r\n        level.loop();\r\n        bird.loop();\r\n\r\n        this._handleCollision();\r\n\r\n        this.renderer.render(this.stage);\r\n    },\r\n\r\n    /**\r\n     * Trigger game over happening\r\n     * @private\r\n     */\r\n    _gameOver() {\r\n        this._stop();\r\n        this._playDieAudio();\r\n\r\n        // Show game over screen\r\n        gameOverScreen.updateScores(level.score, level.bestScore);\r\n        gameOverScreen.show();\r\n    },\r\n\r\n    /**\r\n     * Function to be called when _restart is clicked from the game over screen\r\n     * @private\r\n     */\r\n    _clickRestart() {\r\n        this._restart();\r\n        gameOverScreen.hide();\r\n    },\r\n\r\n    /**\r\n     * Stop the game\r\n     * @private\r\n     */\r\n    _stop() {\r\n        this.hasStopped = true;\r\n    },\r\n\r\n    /**\r\n     * Continue the game after stopping\r\n     * @private\r\n     */\r\n    _restart() {\r\n        level.reset();\r\n        bird.reset();\r\n\r\n        this.hasStopped = false;\r\n    },\r\n\r\n    /**\r\n     * Handle collision between the bird and 'obstacles'\r\n     * @private\r\n     */\r\n    _handleCollision() {\r\n        // Check if the bird is below or underneath the water\r\n        if (bird.getTop() < level.getWaterLevel() && bird.isBelowWater) {\r\n            bird.leaveWater();\r\n        } else if (bird.getTop() >= level.getWaterLevel() && !bird.isBelowWater) {\r\n            bird.enterWater();\r\n        }\r\n\r\n        // Ceiling collision\r\n        if (bird.getTop() <= level.ceilingSprite.y + level.ceilingSprite.height) {\r\n            this._gameOver();\r\n        }\r\n\r\n        // Floor collision\r\n        if (bird.getBottom() >= level.ceilingSprite.y + level.ceilingSprite.height + settings.playableAreaAboveWater + settings.playableAreaBelowWater) {\r\n            this._gameOver();\r\n        }\r\n\r\n        if (level.pipeCollision(bird)) {\r\n            this._gameOver();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Play the audio for when the player dies\r\n     * @private\r\n     */\r\n    _playDieAudio() {\r\n        audioPlayer.play(audioPlayer.audioFragments.HIT,\r\n            audioPlayer.play.bind(audioPlayer, audioPlayer.audioFragments.DIE)\r\n        );\r\n    },\r\n\r\n    /**\r\n     * Set the required events for interacting with the game\r\n     * @private\r\n     */\r\n    _setEvents() {\r\n        window.addEventListener(\"keyup\", (e) => {\r\n            if (e.keyCode != 32) return; // Not spacebar\r\n            if (this.hasStopped) {\r\n                this._clickRestart();\r\n                return;\r\n            }\r\n            bird.flap();\r\n        }, false);\r\n\r\n        if (\"ontouchstart\" in window) {\r\n            window.addEventListener(\"touchstart\", () => {\r\n                if (this.hasStopped) return;\r\n                bird.flap();\r\n            });\r\n        } else {\r\n            window.addEventListener(\"mousedown\", () => {\r\n                if (this.hasStopped) return;\r\n                bird.flap();\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Create and get the tiled sprite for the water\r\n     * @returns {TilingSprite|PIXI.TilingSprite|{enumerable, get}|*}\r\n     * @private\r\n     */\r\n    _getWaterSprite() {\r\n        let waterTexture = utils.getTexture(settings.textures.WATER);\r\n        let waterSprite = new PIXI.extras.TilingSprite(waterTexture, settings.gameWidth, settings.playableAreaBelowWater);\r\n        waterSprite.y = utils.getTexture(settings.textures.CEILING).height + settings.playableAreaAboveWater;\r\n\r\n        return waterSprite;\r\n    }\r\n};\r\n\r\nmodule.exports = game;\r\n","let settings = require('./settings');\r\nlet utils = require('./utils');\r\n\r\nlet gameOverScreen = {\r\n\r\n    /**\r\n     * The callback when the _restart button is clicked\r\n     */\r\n    onClickRestart: undefined,\r\n\r\n    /**\r\n     * The container that will hold the game over container\r\n     */\r\n    container: undefined,\r\n\r\n    /**\r\n     * The container that will hold the the scores and the game over sprite\r\n     */\r\n    gameOverContainer: undefined,\r\n\r\n    scoreYPosition: 93,\r\n    bestScoreYPosition: 135,\r\n    restartButtonYPosition: 190,\r\n    gameOverContainerXPosition: 150,\r\n\r\n    /**\r\n     * Because the score box is not perfectly centered we add some offset\r\n     */\r\n    elementsXOffset: 2,\r\n\r\n    /**\r\n     * Create the game over screen, should only be called once\r\n     */\r\n    initialize(callback) {\r\n        this._setRestartCallback(callback);\r\n\r\n        this.container = new PIXI.Container();\r\n\r\n        this.container.y = this._getContainerYPosition();\r\n        this.container.x = this.gameOverContainerXPosition;\r\n\r\n        this.gameOverContainer = new PIXI.Sprite(utils.getTexture(settings.textures.GAME_OVER));\r\n\r\n        this._renderScores(0, 0);\r\n\r\n        let restartButton = new PIXI.Sprite(utils.getTexture(settings.textures.RESTART));\r\n        restartButton.x = this.gameOverContainer.width / 2 - restartButton.width / 2 + this.elementsXOffset;\r\n        restartButton.y = this.restartButtonYPosition;\r\n        restartButton.interactive = true;\r\n        restartButton.buttonMode = true;\r\n        restartButton.defaultCursor = 'pointer';\r\n\r\n        restartButton.addListener(\"click\", this.onClickRestart);\r\n\r\n        if (\"ontouchstart\" in window) {\r\n            restartButton.addListener(\"touchstart\", this.onClickRestart);\r\n        }\r\n\r\n        this.gameOverContainer.addChild(restartButton);\r\n\r\n        this.container.addChild(this.gameOverContainer);\r\n\r\n        this.hide();\r\n\r\n        return this.container;\r\n    },\r\n\r\n    /**\r\n     * Update the game over screen with the new scores\r\n     */\r\n    updateScores(score, bestScore) {\r\n        this._clearScores();\r\n        this._renderScores(score, bestScore);\r\n    },\r\n\r\n    /**\r\n     * Hide the game over screen\r\n     */\r\n    hide() {\r\n        this.gameOverContainer.visible = false;\r\n    },\r\n\r\n    /**\r\n     * Show the game over screen\r\n     */\r\n    show() {\r\n        this.gameOverContainer.visible = true;\r\n    },\r\n\r\n    /**\r\n     * Set the callback for when the _restart button has been pressed\r\n     * @param callback\r\n     * @private\r\n     */\r\n    _setRestartCallback(callback) {\r\n        if (typeof callback !== 'function') throw new Error('Supplied callback is not a function');\r\n\r\n        this.onClickRestart = callback;\r\n    },\r\n\r\n    /**\r\n     * @param score\r\n     * @param bestScore\r\n     * @private\r\n     */\r\n    _renderScores(score, bestScore) {\r\n        this.scoreSprite = utils.scoreToSprites(score, utils.scoreSize.SMALL);\r\n        this.scoreSprite.x = this.gameOverContainer.width / 2 - this.scoreSprite.width / 2 + this.elementsXOffset;\r\n        this.scoreSprite.y = this.scoreYPosition;\r\n\r\n        this.bestScoreSprite = utils.scoreToSprites(bestScore, utils.scoreSize.SMALL);\r\n        this.bestScoreSprite.x = this.gameOverContainer.width / 2 - this.bestScoreSprite.width / 2 + this.elementsXOffset;\r\n        this.bestScoreSprite.y = this.bestScoreYPosition;\r\n\r\n        this.gameOverContainer.addChild(this.scoreSprite);\r\n        this.gameOverContainer.addChild(this.bestScoreSprite);\r\n    },\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _clearScores() {\r\n        this.gameOverContainer.removeChild(this.scoreSprite);\r\n        this.gameOverContainer.removeChild(this.bestScoreSprite);\r\n    },\r\n\r\n    /**\r\n     * @returns {number}\r\n     * @private\r\n     */\r\n    _getContainerYPosition() {\r\n        let ceilingHeight = utils.getTexture(settings.textures.CEILING).height;\r\n        let gameOverScreenHeight = utils.getTexture(settings.textures.GAME_OVER).height;\r\n        return (ceilingHeight + settings.playableAreaAboveWater + settings.playableAreaBelowWater) / 2 - gameOverScreenHeight / 2;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = gameOverScreen;\r\n","let settings = require('./settings');\r\nlet utils = require('./utils.js');\r\n\r\nlet audioPlayer = require('./audioPlayer');\r\n\r\nlet Pipe = require('./Pipe');\r\n\r\nlet level = {\r\n    /**\r\n     * The container that will contain everything that needs to be moved towards the player\r\n     */\r\n    container: undefined,\r\n\r\n    /**\r\n     * Tiled floor sprite\r\n     */\r\n    floorSprite: undefined,\r\n\r\n    /**\r\n     * Tiled ceiling sprite\r\n     */\r\n    ceilingSprite: undefined,\r\n\r\n    /**\r\n     * Container that will contain all pipes\r\n     */\r\n    pipesContainer: undefined,\r\n\r\n    firstPipeFacing: Pipe.UP,\r\n\r\n    nextPipeFacing: 0,\r\n    placedPipesCount: 0,\r\n\r\n    playerInsidePipe: false,\r\n\r\n    score: 0,\r\n    bestScore: 0,\r\n    scoreContainer: undefined,\r\n\r\n    initialize() {\r\n        this.container = new PIXI.Container();\r\n\r\n        this.container.addChild(this._createCeiling());\r\n        this.container.addChild(this._createFloor());\r\n\r\n        this.container.addChild(this._createInitialPipes());\r\n\r\n        this.container.addChild(this._createScoreContainer());\r\n\r\n        return this.container;\r\n    },\r\n\r\n    loop() {\r\n        this.ceilingSprite.tilePosition.x += -settings.forwardSpeed;\r\n        this.floorSprite.tilePosition.x += -settings.forwardSpeed;\r\n\r\n        // Pipes stuff\r\n        this.pipesContainer.x += -settings.forwardSpeed;\r\n\r\n        // Remove pipes when they're off screen\r\n        if (this.pipesContainer.children.length > 0) {\r\n\r\n            if (this.pipesContainer.x < -this.pipesContainer.children[0].x - Pipe.textureWidth) {\r\n                this.pipesContainer.removeChild(this.pipesContainer.children[0]);\r\n                this._placeNewPipe(this.placedPipesCount);\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Reset the state of the level\r\n     */\r\n    reset() {\r\n        this.score = 0;\r\n        this.scoreContainer.removeChild(this.scoreContainer.children[0]);\r\n        this.scoreContainer.addChild(utils.scoreToSprites(this.score, utils.scoreSize.BIG));\r\n\r\n        this.pipesContainer.x = 0;\r\n        this.pipesContainer.children.splice(0);\r\n        this.playerInsidePipe = false;\r\n        this.nextPipeFacing = this.firstPipeFacing;\r\n        this.placedPipesCount = 0;\r\n        this.container.addChild(this._createInitialPipes());\r\n    },\r\n\r\n    /**\r\n     * Get the y position of the water\r\n     */\r\n    getWaterLevel() {\r\n        return settings.playableAreaAboveWater;\r\n    },\r\n\r\n    pipeCollision(bird) {\r\n        // Because of square collision it can feel unfair when hitting the sides of the pipes while at an angle\r\n        // Which often happens when diving through the gap. To make things a bit fairer, added a small margin;\r\n        let collisionMargin = 2;\r\n\r\n        let left = this.pipesContainer.x + this.pipesContainer.children[0].x + collisionMargin;\r\n        let right = left + utils.getTexture(settings.textures.PIPE).width - collisionMargin;\r\n        \r\n        // The bird is in the left/right boundaries of the first pipe\r\n        if (bird.getRight() > left && bird.getLeft() < right) {\r\n            this.playerInsidePipe = true;\r\n\r\n            // The bird is above the gap!\r\n            if (bird.getTop() < this.pipesContainer.children[0].gap.top || bird.getBottom() > this.pipesContainer.children[0].gap.bottom) {\r\n                return true;\r\n            }\r\n        } else if (this.playerInsidePipe) {\r\n            // Player has passed the pipe\r\n            this._increaseScore();\r\n            this.playerInsidePipe = false;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Create the tiled ceiling sprite\r\n     * @returns {PIXI.extras.TilingSprite}\r\n     * @private\r\n     */\r\n    _createCeiling() {\r\n        let ceilingTexture = utils.getTexture(settings.textures.CEILING);\r\n\r\n        this.ceilingSprite = new PIXI.extras.TilingSprite(ceilingTexture, settings.gameWidth, ceilingTexture.height);\r\n\r\n        return this.ceilingSprite;\r\n    },\r\n\r\n    /**\r\n     * Create the tiled floor sprite\r\n     * @returns {PIXI.extras.TilingSprite}\r\n     * @private\r\n     */\r\n    _createFloor() {\r\n        let floorTexture = utils.getTexture(settings.textures.FLOOR);\r\n\r\n        this.floorSprite = new PIXI.extras.TilingSprite(floorTexture, settings.gameWidth, floorTexture.height);\r\n        this.floorSprite.y = settings.playableAreaAboveWater + settings.playableAreaBelowWater + utils.getTexture(settings.textures.CEILING).height;\r\n\r\n        return this.floorSprite;\r\n    },\r\n\r\n    /**\r\n     * @returns {PIXI.Container}\r\n     * @private\r\n     */\r\n    _createInitialPipes() {\r\n        this.nextPipeFacing = this.firstPipeFacing;\r\n        this.pipesContainer = new PIXI.Container();\r\n\r\n        let startingPipesCount = Math.ceil(settings.gameWidth / settings.pipeDistance);\r\n\r\n        for (let i = 0; i < startingPipesCount; i++) {\r\n            this._placeNewPipe(i);\r\n        }\r\n\r\n        return this.pipesContainer;\r\n    },\r\n\r\n    /**\r\n     * @returns {PIXI.Container}\r\n     * @private\r\n     */\r\n    _createScoreContainer() {\r\n        this.scoreContainer = new PIXI.Container();\r\n        this.scoreContainer.addChild(utils.scoreToSprites(this.score, utils.scoreSize.BIG));\r\n\r\n        this.scoreContainer.x = settings.scorePosition.x;\r\n        this.scoreContainer.y = utils.getTexture(settings.textures.CEILING).height + settings.scorePosition.y;\r\n\r\n        return this.scoreContainer;\r\n    },\r\n\r\n    /**\r\n     * Create a new pipe, the position depends on the number\r\n     * @param number\r\n     * @private\r\n     */\r\n    _placeNewPipe(number) {\r\n        // We need total pipe amount, to calculate position of new one\r\n        let pipe = this._createPipe(this._getRandomPipeHeight(), this.nextPipeFacing);\r\n        pipe.container.x = settings.firstPipeDistance + settings.pipeDistance * number;\r\n        this.pipesContainer.addChild(pipe.container);\r\n\r\n        this.nextPipeFacing *= -1;\r\n        this.placedPipesCount++;\r\n    },\r\n\r\n    _createPipe(height, direction) {\r\n        return new Pipe(height, direction);\r\n    },\r\n\r\n    _increaseScore() {\r\n        audioPlayer.play(audioPlayer.audioFragments.POINT);\r\n        this.score++;\r\n\r\n        if (this.score > this.bestScore) this.bestScore = this.score;\r\n\r\n        // Because we put all digits inside one container, we only have to remove on child\r\n        this.scoreContainer.removeChild(this.scoreContainer.children[0]);\r\n\r\n        this.scoreContainer.addChild(utils.scoreToSprites(this.score, utils.scoreSize.BIG));\r\n   },\r\n\r\n    /**\r\n     * Get a random height for the pipe\r\n     * @returns {number}\r\n     * @private\r\n     */\r\n    _getRandomPipeHeight() {\r\n        return Math.random() * (settings.maxPipeHeight - settings.minPipeHeight) + settings.minPipeHeight;\r\n    },\r\n};\r\n\r\nmodule.exports = level;\r\n","const settings = {\r\n    /**\r\n     * The location of the assets json\r\n     */\r\n    assetFile: \"assets/assets.json\",\r\n\r\n    soundsPath: \"assets/sounds/\",\r\n\r\n    /**\r\n     * The area that is available above the water\r\n     */\r\n    playableAreaAboveWater: 260,\r\n\r\n    /**\r\n     * The area that is available below the water\r\n     */\r\n    playableAreaBelowWater: 260,\r\n\r\n    /**\r\n     * The width of the game, filled during init currently\r\n     */\r\n    gameWidth: 0,\r\n\r\n    /**\r\n     * The speed at which objects move towards the player\r\n     */\r\n    forwardSpeed: 5,\r\n\r\n    /**\r\n     * The speed at which the background moves\r\n     */\r\n    backgroundSpeed: 2,\r\n\r\n    /**\r\n     * The amount of gravity added to the velocity of the player while above the water\r\n     */\r\n    gravity: 0.3,\r\n\r\n    /**\r\n     * The amount of upward force added to the velocity of the player while below the water\r\n     */\r\n    waterPushForce: 0.3,\r\n\r\n    /**\r\n     * The amount of upward velocity is added to the player on 'flapping'.\r\n     */\r\n    birdFlapVelocity: 4.5,\r\n\r\n    /**\r\n     * The speed of the bird animation\r\n     */\r\n    birdAnimationSpeed: 0.2,\r\n\r\n    /**\r\n     * Starting position of the bird\r\n     */\r\n    birdStartPosition: {\r\n        x: 100,\r\n        y: 150,\r\n    },\r\n\r\n    /**\r\n     * The vertical gaps in the pipes for the player to fly through\r\n     */\r\n    pipeGapSize: 100,\r\n\r\n    /**\r\n     * The distance to the first pipe\r\n     */\r\n    firstPipeDistance: 800,\r\n\r\n    /**\r\n     * The distance between each pipe\r\n     */\r\n    pipeDistance: 400,\r\n\r\n    /**\r\n     * The min height of a pipe (handle with care)\r\n     */\r\n    minPipeHeight: 280,\r\n\r\n    /**\r\n     * The max height of a pipe (handle with care)\r\n     */\r\n    maxPipeHeight: 390,\r\n\r\n    /**\r\n     * The position of the score\r\n     */\r\n    scorePosition: {\r\n        x: 10,\r\n        y: 10 // Offset from the 'ceiling'\r\n    },\r\n\r\n    /**\r\n     * If vertical velocity of the player should be reset before applying the flap velocity\r\n     */\r\n    shouldBirdFlapResetVelocity: true,\r\n\r\n    textures: {\r\n        'BACKGROUND': 'sky.png',\r\n        'FLOOR': 'land.png',\r\n        'CEILING': 'ceiling.png',\r\n        'PIPE': 'pipe.png',\r\n        'PIPE_UP': 'pipe-up.png',\r\n        'PIPE_DOWN': 'pipe-down.png',\r\n        'WATER': 'water.png',\r\n        'GAME_OVER': 'scoreboard.png',\r\n        'RESTART': 'replay.png',\r\n        'BIG_0': 'font_big_0.png',\r\n        'BIG_1': 'font_big_1.png',\r\n        'BIG_2': 'font_big_2.png',\r\n        'BIG_3': 'font_big_3.png',\r\n        'BIG_4': 'font_big_4.png',\r\n        'BIG_5': 'font_big_5.png',\r\n        'BIG_6': 'font_big_6.png',\r\n        'BIG_7': 'font_big_7.png',\r\n        'BIG_8': 'font_big_8.png',\r\n        'BIG_9': 'font_big_9.png',\r\n        'SMALL_0': 'font_small_0.png',\r\n        'SMALL_1': 'font_small_1.png',\r\n        'SMALL_2': 'font_small_2.png',\r\n        'SMALL_3': 'font_small_3.png',\r\n        'SMALL_4': 'font_small_4.png',\r\n        'SMALL_5': 'font_small_5.png',\r\n        'SMALL_6': 'font_small_6.png',\r\n        'SMALL_7': 'font_small_7.png',\r\n        'SMALL_8': 'font_small_8.png',\r\n        'SMALL_9': 'font_small_9.png',\r\n    },\r\n\r\n    init() {\r\n        this.gameWidth = window.innerWidth;\r\n    }\r\n};\r\n\r\nsettings.init();\r\n\r\nmodule.exports = settings;\r\n","let settings = require('./settings');\r\n\r\nlet setup = {\r\n    /**\r\n     * Set up the renderer\r\n     * @returns {PIXI.WebGLRenderer|PIXI.CanvasRenderer}\r\n     */\r\n    renderer() {\r\n        let renderer = PIXI.autoDetectRenderer(settings.gameWidth, window.innerHeight);\r\n        renderer.view.style.position = \"absolute\";\r\n        renderer.view.style.display = \"block\";\r\n        renderer.backgroundColor = 0x4ec0ca;\r\n        renderer.autoResize = true;\r\n\r\n        document.body.appendChild(renderer.view);\r\n\r\n        return renderer;\r\n    },\r\n\r\n    /**\r\n     * Load the assets\r\n     * @param callback action to perform after assets have been loaded\r\n     */\r\n    loadAssets(callback) {\r\n        if (typeof callback !== 'function') throw new Error('Callback must be a function');\r\n\r\n        PIXI.loader.add(\"assets/assets.json\").load(callback);\r\n    }\r\n};\r\n\r\nmodule.exports = setup;\r\n","let settings = require('./settings');\r\n\r\nlet utils = {\r\n\r\n    scoreSize: {\r\n        'SMALL': 0,\r\n        'BIG': 1\r\n    },\r\n\r\n    /**\r\n     * Get a texture from the pixi loader by name\r\n     * @param name texture name, with extension\r\n     * @returns {*|PIXI.Texture|FrameObject}\r\n     */\r\n    getTexture(name) {\r\n        return PIXI.loader.resources[settings.assetFile].textures[name]\r\n    },\r\n\r\n    /**\r\n     * Generate score sprites based on passed score\r\n     * @param score\r\n     * @param size\r\n     * @returns {Container|*}\r\n     */\r\n    scoreToSprites(score, size) {\r\n        let stringScore = score.toString();\r\n\r\n        let texturePrefix = size === this.scoreSize.BIG ? 'BIG_' : 'SMALL_';\r\n        let letterSpacing = size === this.scoreSize.BIG ? 25 : 10;\r\n\r\n        let digitsContainer = new PIXI.Container();\r\n\r\n        for (let i = 0, len = stringScore.length; i < len; i++) {\r\n            let digit = new PIXI.Sprite(this.getTexture(settings.textures[texturePrefix + stringScore.charAt(i)]));\r\n            digit.x = i * letterSpacing;\r\n            digitsContainer.addChild(digit)\r\n        }\r\n\r\n        return digitsContainer;\r\n    }\r\n};\r\n\r\nmodule.exports = utils;\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImU6L0NvZGUvcGl4aS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwianNcXG1haW4uanMiLCJlOlxcQ29kZVxccGl4aVxcanNcXFBpcGUuanMiLCJlOlxcQ29kZVxccGl4aVxcanNcXGF1ZGlvUGxheWVyLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxiYWNrZ3JvdW5kLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxiaXJkLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxnYW1lLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxnYW1lT3ZlclNjcmVlbi5qcyIsImU6XFxDb2RlXFxwaXhpXFxqc1xcbGV2ZWwuanMiLCJlOlxcQ29kZVxccGl4aVxcanNcXHNldHRpbmdzLmpzIiwiZTpcXENvZGVcXHBpeGlcXGpzXFxzZXR1cC5qcyIsImU6XFxDb2RlXFxwaXhpXFxqc1xcdXRpbHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLElBQUksT0FBTyxRQUFRLFFBQVIsQ0FBWDs7QUFFQSxDQUFDLFlBQVc7QUFDUixTQUFLLEtBQUw7QUFDSCxDQUZEOzs7Ozs7Ozs7QUNGQSxJQUFJLFdBQVcsUUFBUSxZQUFSLENBQWY7QUFDQSxJQUFJLFFBQVEsUUFBUSxTQUFSLENBQVo7O0lBRU0sSTtBQUNGLGtCQUFZLE1BQVosRUFBb0IsTUFBcEIsRUFBNEI7QUFBQTs7QUFDeEIsYUFBSyxNQUFMLEdBQWMsTUFBZDtBQUNBLGFBQUssTUFBTCxHQUFjLE1BQWQ7O0FBRUEsYUFBSyxXQUFMLEdBQW1CLE1BQU0sVUFBTixDQUFpQixTQUFTLFFBQVQsQ0FBa0IsSUFBbkMsQ0FBbkI7QUFDQSxhQUFLLGNBQUwsR0FBc0IsTUFBTSxVQUFOLENBQWlCLFNBQVMsUUFBVCxDQUFrQixPQUFuQyxDQUF0QjtBQUNBLGFBQUssaUJBQUwsR0FBeUIsTUFBTSxVQUFOLENBQWlCLFNBQVMsUUFBVCxDQUFrQixTQUFuQyxDQUF6Qjs7QUFFQSxhQUFLLFVB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Qjs7Ozs7QUM5QkEsSUFBSSxXQUFXLFFBQVEsWUFBUixDQUFmOztBQUVBLElBQUksUUFBUTs7QUFFUixlQUFXO0FBQ1AsaUJBQVMsQ0FERjtBQUVQLGVBQU87QUFGQSxLQUZIOztBQU9SOzs7OztBQUtBLGNBWlEsc0JBWUcsSUFaSCxFQVlTO0FBQ2IsZUFBTyxLQUFLLE1BQUwsQ0FBWSxTQUFaLENBQXNCLFNBQVMsU0FBL0IsRUFBMEMsUUFBMUMsQ0FBbUQsSUFBbkQsQ0FBUDtBQUNILEtBZE87OztBQWdCUjs7Ozs7O0FBTUEsa0JBdEJRLDBCQXNCTyxLQXRCUCxFQXNCYyxJQXRCZCxFQXNCb0I7QUFDeEIsWUFBSSxjQUFjLE1BQU0sUUFBTixFQUFsQjs7QUFFQSxZQUFJLGdCQUFnQixTQUFTLEtBQUssU0FBTCxDQUFlLEdBQXhCLEdBQThCLE1BQTlCLEdBQXVDLFFBQTNEO0FBQ0EsWUFBSSxnQkFBZ0IsU0FBUyxLQUFLLFNBQUwsQ0FBZSxHQUF4QixHQUE4QixFQUE5QixHQUFtQyxFQUF2RDs7QUFFQSxZQUFJLGtCQUFrQixJQUFJLEtBQUssU0FBVCxFQUF0Qjs7QUFFQSxhQUFLLElBQUksSUFBSSxDQUFSLEVBQVcsTUFBTSxZQUFZLE1BQWxDLEVBQTBDLElBQUksR0FBOUMsRUFBbUQsR0FBbkQsRUFBd0Q7QUFDcEQsZ0JBQUksUUFBUSxJQUFJLEtBQUssTUFBVCxDQUFnQixLQUFLLFVBQUwsQ0FBZ0IsU0FBUyxRQUFULENBQWtCLGdCQUFnQixZQUFZLE1BQVosQ0FBbUIsQ0FBbkIsQ0FBbEMsQ0FBaEIsQ0FBaEIsQ0FBWjtBQUNBLGtCQUFNLENBQU4sR0FBVSxJQUFJLGFBQWQ7QUFDQSw0QkFBZ0IsUUFBaEIsQ0FBeUIsS0FBekI7QUFDSDs7QUFFRCxlQUFPLGVBQVA7QUFDSDtBQXJDTyxDQUFaOztBQXdDQSxPQUFPLE9BQVAsR0FBaUIsS0FBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibGV0IGdhbWUgPSByZXF1aXJlKCcuL2dhbWUnKTtcclxuXHJcbihmdW5jdGlvbigpIHtcclxuICAgIGdhbWUuc3RhcnQoKTtcclxufSkoKTtcclxuXHJcbiIsImxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MnKTtcclxubGV0IHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxuY2xhc3MgUGlwZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihoZWlnaHQsIGZhY2luZykge1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuZmFjaW5nID0gZmFjaW5nO1xyXG5cclxuICAgICAgICB0aGlzLnBpcGVUZXh0dXJlID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5QSVBFKTtcclxuICAgICAgICB0aGlzLnBpcGVUb3BUZXh0dXJlID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5QSVBFX1VQKTtcclxuICAgICAgICB0aGlzLnBpcGVCb3R0b21UZXh0dXJlID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5QSVBFX0RPV04pO1xyXG5cclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuXHJcbiAgICAgICAgbGV0IHRvdGFsUGxheUhlaWdodCA9IHNldHRpbmdzLnBsYXlhYmxlQXJlYUFib3ZlV2F0ZXIgKyBzZXR0aW5ncy5wbGF5YWJsZUFyZWFCZWxvd1dhdGVyO1xyXG5cclxuICAgICAgICBpZiAoZmFjaW5nID09PSBQaXBlLlVQKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9jcmVhdGVVcEZhY2luZ1BpcGUoaGVpZ2h0KSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChmYWNpbmcgPT09IFBpcGUuRE9XTikge1xyXG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXIuYWRkQ2hpbGQodGhpcy5fY3JlYXRlRG93bkZhY2luZ1BpcGUoaGVpZ2h0KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIHNwYWNlIGZvciBwaXBlIGluIG9wcG9zaXRlIGRpcmVjdGlvbiB0byBjb21wbGV0ZSB0aGUgZ2FwXHJcbiAgICAgICAgaWYgKGhlaWdodCArIHNldHRpbmdzLnBpcGVHYXBTaXplIDwgdG90YWxQbGF5SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGNhbiBmaXQgYW5vdGhlciBwaXBlIG9wcG9zaXRlIHRvIGl0XHJcbiAgICAgICAgICAgIGxldCBvcHBvc2l0ZVBpcGVIZWlnaHQgPSB0b3RhbFBsYXlIZWlnaHQgLSBoZWlnaHQgLSBzZXR0aW5ncy5waXBlR2FwU2l6ZTtcclxuICAgICAgICAgICAgaWYgKGZhY2luZyA9PT0gUGlwZS5VUClcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9jcmVhdGVEb3duRmFjaW5nUGlwZShvcHBvc2l0ZVBpcGVIZWlnaHQpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmYWNpbmcgPT09IFBpcGUuRE9XTilcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9jcmVhdGVVcEZhY2luZ1BpcGUob3Bwb3NpdGVQaXBlSGVpZ2h0KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY2VpbGluZ1Nwcml0ZUhlaWdodCA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuQ0VJTElORykuaGVpZ2h0O1xyXG5cclxuICAgICAgICAvLyBTdG9yZSB0aGUgaW5mb3JtYXRpb24gb2YgdGhlIGdhcCBwb3NpdGlvbiBpbiB0aGUgY29udGFpbmVyIG9iamVjdCBmb3IgZWFzaWVyIGNvbGxpc2lvbiBjaGVja3NcclxuICAgICAgICBsZXQgdG9wID0gKGZhY2luZyA9PT0gUGlwZS5VUCA/IHRvdGFsUGxheUhlaWdodCAtIGhlaWdodCAtIHNldHRpbmdzLnBpcGVHYXBTaXplIDogaGVpZ2h0KSArIGNlaWxpbmdTcHJpdGVIZWlnaHQ7XHJcbiAgICAgICAgbGV0IGJvdHRvbSA9IChmYWNpbmcgPT09IFBpcGUuVVAgPyB0b3RhbFBsYXlIZWlnaHQgLSBoZWlnaHQgOiBoZWlnaHQgKyBzZXR0aW5ncy5waXBlR2FwU2l6ZSkgKyBjZWlsaW5nU3ByaXRlSGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmdhcCA9IHsgdG9wLCBib3R0b20gfVxyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVVcEZhY2luZ1BpcGUoaGVpZ2h0KSB7XHJcbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xyXG5cclxuICAgICAgICBsZXQgcGlwZVRvcCA9IG5ldyBQSVhJLlNwcml0ZSh0aGlzLnBpcGVUb3BUZXh0dXJlKTtcclxuICAgICAgICBjb250YWluZXIuYWRkQ2hpbGQocGlwZVRvcCk7XHJcblxyXG4gICAgICAgIGxldCBwaXBlUGFydEhlaWdodCA9IGhlaWdodCAtIHRoaXMucGlwZVRvcFRleHR1cmUuaGVpZ2h0O1xyXG5cclxuICAgICAgICBsZXQgcGlwZSA9IG5ldyBQSVhJLmV4dHJhcy5UaWxpbmdTcHJpdGUodGhpcy5waXBlVGV4dHVyZSwgdGhpcy5waXBlVGV4dHVyZS53aWR0aCwgcGlwZVBhcnRIZWlnaHQpO1xyXG4gICAgICAgIHBpcGUueSA9IHRoaXMucGlwZVRvcFRleHR1cmUuaGVpZ2h0O1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDaGlsZChwaXBlKTtcclxuXHJcbiAgICAgICAgLy8gUGxhY2UgcGlwZSBvbiB0aGUgYm90dG9tXHJcbiAgICAgICAgY29udGFpbmVyLnkgPSBzZXR0aW5ncy5wbGF5YWJsZUFyZWFBYm92ZVdhdGVyICsgc2V0dGluZ3MucGxheWFibGVBcmVhQmVsb3dXYXRlciAtIGhlaWdodCArIHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuQ0VJTElORykuaGVpZ2h0O1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVEb3duRmFjaW5nUGlwZShoZWlnaHQpIHtcclxuICAgICAgICBsZXQgY29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIGxldCBwaXBlUGFydEhlaWdodCA9IGhlaWdodCAtIHRoaXMucGlwZUJvdHRvbVRleHR1cmUuaGVpZ2h0O1xyXG5cclxuICAgICAgICBsZXQgcGlwZSA9IG5ldyBQSVhJLmV4dHJhcy5UaWxpbmdTcHJpdGUodGhpcy5waXBlVGV4dHVyZSwgdGhpcy5waXBlVGV4dHVyZS53aWR0aCwgcGlwZVBhcnRIZWlnaHQpO1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDaGlsZChwaXBlKTtcclxuXHJcbiAgICAgICAgbGV0IHBpcGVCb3R0b20gPSBuZXcgUElYSS5TcHJpdGUodGhpcy5waXBlQm90dG9tVGV4dHVyZSk7XHJcbiAgICAgICAgcGlwZUJvdHRvbS55ID0gcGlwZVBhcnRIZWlnaHQ7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZENoaWxkKHBpcGVCb3R0b20pO1xyXG5cclxuICAgICAgICAvLyBXZSBjYW4gcGxhY2UgaXQgYWdhaW5zdCB0aGUgY2VpbGluZ1xyXG4gICAgICAgIGNvbnRhaW5lci55ID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5DRUlMSU5HKS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbnRhaW5lcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBjb250YWluZXIoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQgdGV4dHVyZVdpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLlBJUEUpLndpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQgVVAoKSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldCBET1dOKCkge1xyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQaXBlO1xyXG4iLCJsZXQgc2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldHRpbmdzJyk7XHJcblxyXG5sZXQgYXVkaW9QbGF5ZXIgPSB7XHJcblxyXG4gICAgYXVkaW9GcmFnbWVudHM6IHtcclxuICAgICAgICAnRkxBUCc6ICdzZnhfd2luZy5vZ2cnLFxyXG4gICAgICAgICdISVQnOiAnc2Z4X2hpdC5vZ2cnLFxyXG4gICAgICAgICdESUUnOiAnc2Z4X2RpZS5vZ2cnLFxyXG4gICAgICAgICdQT0lOVCc6ICdzZnhfcG9pbnQub2dnJyxcclxuICAgICAgICAnU1dJTSc6ICdzZnhfYmx1Yi5vZ2cnLFxyXG4gICAgICAgICdFTlRFUl9XQVRFUic6ICdzZnhfd2F0ZXItZW50ZXIub2dnJyxcclxuICAgICAgICAnRVhJVF9XQVRFUic6ICdzZnhfd2F0ZXItZXhpdC5vZ2cnLFxyXG4gICAgfSxcclxuXHJcbiAgICBfYXVkaW86IFtdLFxyXG5cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgLy8gVG9kbzogTWF5YmUgd2UgbmVlZCB0byB3YWl0IHdpdGggc3RhcnRpbmcgdGhlIGdhbWUgdW50aWwgdGhlc2UgaGF2ZSBiZWVuIGxvYWRlZFxyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLmF1ZGlvRnJhZ21lbnRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2F1ZGlvW3RoaXMuYXVkaW9GcmFnbWVudHNba2V5XV0gPSBuZXcgQXVkaW8oc2V0dGluZ3Muc291bmRzUGF0aCArIHRoaXMuYXVkaW9GcmFnbWVudHNba2V5XSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBwbGF5KGF1ZGlvRnJhZ21lbnQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2F1ZGlvW2F1ZGlvRnJhZ21lbnRdLmN1cnJlbnRUaW1lID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9hdWRpb1thdWRpb0ZyYWdtZW50XS5jdXJyZW50VGltZSA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9hdWRpb1thdWRpb0ZyYWdtZW50XS5wbGF5KCk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIHRoaXMuX2F1ZGlvW2F1ZGlvRnJhZ21lbnRdLmR1cmF0aW9uICogMTAwMCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5hdWRpb1BsYXllci5pbml0KCk7XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBhdWRpb1BsYXllcjtcclxuIiwibGV0IHNldHRpbmdzID0gcmVxdWlyZSgnLi9zZXR0aW5ncy5qcycpO1xyXG5sZXQgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzLmpzJyk7XHJcblxyXG52YXIgYmFja2dyb3VuZCA9IHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNvbnRhaW5lciB0aGF0IHdpbGwgY29udGFpbiBhbGwgYmFja2dyb3VuZCB0aWxlcyBsaW5lZCB1cFxyXG4gICAgICovXHJcbiAgICBiYWNrZ3JvdW5kU3ByaXRlOiB1bmRlZmluZWQsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIHRoZSBiYWNrZ3JvdW5kXHJcbiAgICAgKiBAcmV0dXJucyB7UElYSS5TcHJpdGV9XHJcbiAgICAgKi9cclxuICAgIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgbGV0IHNreVRpbGVUZXh0dXJlID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5CQUNLR1JPVU5EKTtcclxuICAgICAgICB0aGlzLmJhY2tncm91bmRTcHJpdGUgPSBuZXcgUElYSS5leHRyYXMuVGlsaW5nU3ByaXRlKHNreVRpbGVUZXh0dXJlLCBzZXR0aW5ncy5nYW1lV2lkdGgsIHNreVRpbGVUZXh0dXJlLmhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU3ByaXRlLnkgPSB0aGlzLl9nZXRCYWNrZ3JvdW5kU3ByaXRlWVBvc2l0aW9uKHNreVRpbGVUZXh0dXJlLmhlaWdodCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmJhY2tncm91bmRTcHJpdGU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIGxvb3Agb2YgdGhlIGJhY2tncm91bmRcclxuICAgICAqL1xyXG4gICAgbG9vcCgpIHtcclxuICAgICAgICB0aGlzLmJhY2tncm91bmRTcHJpdGUudGlsZVBvc2l0aW9uLnggKz0gLXNldHRpbmdzLmJhY2tncm91bmRTcGVlZDtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIHkgcG9zaXRpb24gZm9yIHRoZSBiYWNrZ3JvdW5kIHNwcml0ZVxyXG4gICAgICogQHJldHVybnMge051bWJlcn1cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9nZXRCYWNrZ3JvdW5kU3ByaXRlWVBvc2l0aW9uKGhlaWdodCkge1xyXG4gICAgICAgIHJldHVybiBzZXR0aW5ncy5wbGF5YWJsZUFyZWFBYm92ZVdhdGVyIC0gaGVpZ2h0ICsgdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5DRUlMSU5HKS5oZWlnaHQ7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGJhY2tncm91bmQ7XHJcbiIsImxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MnKTtcclxubGV0IHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxubGV0IGF1ZGlvUGxheWVyID0gcmVxdWlyZSgnLi9hdWRpb1BsYXllcicpO1xyXG5cclxubGV0IGJpcmQgPSB7XHJcbiAgICBzcHJpdGU6IHVuZGVmaW5lZCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB2ZWxvY2l0eSBvZiB0aGUgYmlyZFxyXG4gICAgICovXHJcbiAgICB2ZWxvY2l0eTogMCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEJvb2wgaWYgdGhlIGJpcmQgaXMgYmVsb3cgdGhlIHdhdGVyXHJcbiAgICAgKi9cclxuICAgIGlzQmVsb3dXYXRlcjogZmFsc2UsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYW1vdW50IG9mIGZyYW1lcyB0aGUgYW5pbWF0aW9uIGhhc1xyXG4gICAgICovXHJcbiAgICBhbmltYXRpb25GcmFtZXM6IDQsXHJcblxyXG4gICAgYmlyZFRleHR1cmVOYW1lUHJlZml4OiAnYmlyZF8nLFxyXG4gICAgYmlyZFRleHR1cmVOYW1lU3VmZml4OiAnLnBuZycsXHJcblxyXG4gICAgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICB0aGlzLnNwcml0ZSA9IHRoaXMuX3NldHVwQmlyZFNwcml0ZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZTtcclxuICAgIH0sXHJcblxyXG4gICAgbG9vcCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0JlbG93V2F0ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy52ZWxvY2l0eSAtPSBzZXR0aW5ncy53YXRlclB1c2hGb3JjZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnZlbG9jaXR5ICs9IHNldHRpbmdzLmdyYXZpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNwcml0ZS55ICs9IHRoaXMudmVsb2NpdHk7XHJcbiAgICAgICAgdGhpcy5zcHJpdGUucm90YXRpb24gPSBNYXRoLmF0YW4yKHRoaXMudmVsb2NpdHksIHNldHRpbmdzLmZvcndhcmRTcGVlZCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmxhcCBiZWhhdmlvdXIsIGlzIGRpZmZlcmVudCBiYXNlZCBvbiBiZWluZyBiZWxvdyBvciBhYm92ZSB3YXRlclxyXG4gICAgICovXHJcbiAgICBmbGFwKCkge1xyXG4gICAgICAgIC8vIFNldHRpbmcgdG8gZWFzaWx5IHRlc3QgZGlmZmVyZW50IGZsYXAgYmVoYXZpb3VyXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLnNob3VsZEJpcmRGbGFwUmVzZXRWZWxvY2l0eSkge1xyXG4gICAgICAgICAgICB0aGlzLnZlbG9jaXR5ID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzQmVsb3dXYXRlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9zd2ltKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZmxhcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldCB0aGUgcG9zaXRpb24gYW5kIHZlbG9jaXR5IG9mIHRoZSBiaXJkXHJcbiAgICAgKi9cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuc3ByaXRlLnggPSBzZXR0aW5ncy5iaXJkU3RhcnRQb3NpdGlvbi54O1xyXG4gICAgICAgIHRoaXMuc3ByaXRlLnkgPSBzZXR0aW5ncy5iaXJkU3RhcnRQb3NpdGlvbi55O1xyXG4gICAgICAgIHRoaXMudmVsb2NpdHkgPSAwO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNpbXBsZSBoZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSB0b3AgcG9zaXRpb24gb2YgdGhlIGJpcmRcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIGdldFRvcCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGUueSAtIHRoaXMuc3ByaXRlLmhlaWdodCAvIDI7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2ltcGxlIGhlbHBlciBmdW5jdGlvbiB0byBnZXQgdGhlIGJvdHRvbSBwb3NpdGlvbiBvZiB0aGUgYmlyZFxyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgZ2V0Qm90dG9tKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZS55ICsgdGhpcy5zcHJpdGUuaGVpZ2h0IC8gMjtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaW1wbGUgaGVscGVyIGZ1bmN0aW9uIHRvIGdldCB0aGUgcmlnaHQgcG9zaXRpb24gb2YgdGhlIGJpcmRcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIGdldFJpZ2h0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZS54ICsgdGhpcy5zcHJpdGUud2lkdGggLyAyO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNpbXBsZSBoZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSBsZWZ0IHBvc2l0aW9uIG9mIHRoZSBiaXJkXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBnZXRMZWZ0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZS54IC0gdGhpcy5zcHJpdGUud2lkdGggLyAyO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZW4gdGhlIGJpcmQgZW50ZXJzIHRoZSB3YXRlclxyXG4gICAgICovXHJcbiAgICBlbnRlcldhdGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQmVsb3dXYXRlcikgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuaXNCZWxvd1dhdGVyID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgYXVkaW9QbGF5ZXIucGxheShhdWRpb1BsYXllci5hdWRpb0ZyYWdtZW50cy5FTlRFUl9XQVRFUik7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hlbiB0aGUgYmlyZCBsZWF2ZXMgdGhlIHdhdGVyXHJcbiAgICAgKi9cclxuICAgIGxlYXZlV2F0ZXIoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQmVsb3dXYXRlcikgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuaXNCZWxvd1dhdGVyID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGF1ZGlvUGxheWVyLnBsYXkoYXVkaW9QbGF5ZXIuYXVkaW9GcmFnbWVudHMuRVhJVF9XQVRFUik7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0dXAgdGhlIGJpcmQgc3ByaXRlIHdpdGggaXRzIGFuaW1hdGlvbnNcclxuICAgICAqIEByZXR1cm5zIHtBbmltYXRlZFNwcml0ZXwqfVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3NldHVwQmlyZFNwcml0ZSgpIHtcclxuICAgICAgICBsZXQgc3ByaXRlRnJhbWVzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFuaW1hdGlvbkZyYW1lczsgaSsrKSB7XHJcbiAgICAgICAgICAgIHNwcml0ZUZyYW1lcy5wdXNoKHV0aWxzLmdldFRleHR1cmUodGhpcy5iaXJkVGV4dHVyZU5hbWVQcmVmaXggKyBpICsgIHRoaXMuYmlyZFRleHR1cmVOYW1lU3VmZml4KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc3ByaXRlID0gbmV3IFBJWEkuZXh0cmFzLkFuaW1hdGVkU3ByaXRlKHNwcml0ZUZyYW1lcyk7XHJcblxyXG4gICAgICAgIHNwcml0ZS5hbmltYXRpb25TcGVlZCA9IHNldHRpbmdzLmJpcmRBbmltYXRpb25TcGVlZDtcclxuICAgICAgICBzcHJpdGUucGxheSgpO1xyXG5cclxuICAgICAgICBzcHJpdGUuYW5jaG9yLnggPSAwLjU7XHJcbiAgICAgICAgc3ByaXRlLmFuY2hvci55ID0gMC41O1xyXG5cclxuICAgICAgICBzcHJpdGUueCA9IHNldHRpbmdzLmJpcmRTdGFydFBvc2l0aW9uLng7XHJcbiAgICAgICAgc3ByaXRlLnkgPSBzZXR0aW5ncy5iaXJkU3RhcnRQb3NpdGlvbi55O1xyXG5cclxuICAgICAgICByZXR1cm4gc3ByaXRlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhYm92ZSB3YXRlciBmbGFwIGJlaGF2aW91clxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2ZsYXAoKSB7XHJcbiAgICAgICAgYXVkaW9QbGF5ZXIucGxheShhdWRpb1BsYXllci5hdWRpb0ZyYWdtZW50cy5GTEFQKTtcclxuXHJcbiAgICAgICAgdGhpcy52ZWxvY2l0eSAtPSBzZXR0aW5ncy5iaXJkRmxhcFZlbG9jaXR5O1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBiZWxvdyB3YXRlciBmbGFwIChha2Egc3dpbSkgYmVoYXZpb3VyXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfc3dpbSgpIHtcclxuICAgICAgICBhdWRpb1BsYXllci5wbGF5KGF1ZGlvUGxheWVyLmF1ZGlvRnJhZ21lbnRzLlNXSU0pO1xyXG5cclxuICAgICAgICB0aGlzLnZlbG9jaXR5ICs9IHNldHRpbmdzLmJpcmRGbGFwVmVsb2NpdHk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGJpcmQ7XHJcbiIsImxldCBzZXR1cCA9IHJlcXVpcmUoJy4vc2V0dXAnKTtcclxuXHJcbmxldCBnYW1lT3ZlclNjcmVlbiA9IHJlcXVpcmUoJy4vZ2FtZU92ZXJTY3JlZW4nKTtcclxubGV0IGF1ZGlvUGxheWVyID0gcmVxdWlyZSgnLi9hdWRpb1BsYXllcicpO1xyXG5sZXQgc2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldHRpbmdzJyk7XHJcbmxldCB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuXHJcbmxldCBiYWNrZ3JvdW5kID0gcmVxdWlyZSgnLi9iYWNrZ3JvdW5kJyk7XHJcbmxldCBsZXZlbCA9IHJlcXVpcmUoJy4vbGV2ZWwnKTtcclxubGV0IGJpcmQgPSByZXF1aXJlKCcuL2JpcmQnKTtcclxuXHJcbmxldCBnYW1lID0ge1xyXG4gICAgcmVuZGVyZXI6IHVuZGVmaW5lZCxcclxuICAgIHN0YWdlOiB1bmRlZmluZWQsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGV0aGVyIHRoZSBnYW1lIChsb29wKSBoYXMgc3RvcHBlZCBvciBub3RcclxuICAgICAqL1xyXG4gICAgaGFzU3RvcHBlZDogZmFsc2UsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydCB0aGUgZ2FtZVxyXG4gICAgICovXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gc2V0dXAucmVuZGVyZXIoKTtcclxuICAgICAgICBzZXR1cC5sb2FkQXNzZXRzKHRoaXMuaW5pdGlhbGl6ZS5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGFsbCByZXF1aXJlZCBwYXJ0cyBvZiB0aGUgZ2FtZVxyXG4gICAgICovXHJcbiAgICBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIHRoaXMuc3RhZ2UgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGFnZS5hZGRDaGlsZChiYWNrZ3JvdW5kLmluaXRpYWxpemUoKSk7XHJcbiAgICAgICAgdGhpcy5zdGFnZS5hZGRDaGlsZChsZXZlbC5pbml0aWFsaXplKCkpO1xyXG4gICAgICAgIHRoaXMuc3RhZ2UuYWRkQ2hpbGQoYmlyZC5pbml0aWFsaXplKCkpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YWdlLmFkZENoaWxkKHRoaXMuX2dldFdhdGVyU3ByaXRlKCkpO1xyXG5cclxuICAgICAgICBsZXQgb25SZXN0YXJ0Q2xpY2sgPSB0aGlzLl9jbGlja1Jlc3RhcnQuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnN0YWdlLmFkZENoaWxkKGdhbWVPdmVyU2NyZWVuLmluaXRpYWxpemUob25SZXN0YXJ0Q2xpY2spKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5zdGFnZSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50cygpO1xyXG5cclxuICAgICAgICB0aGlzLmxvb3AoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZ2FtZSBsb29wXHJcbiAgICAgKi9cclxuICAgIGxvb3AoKSB7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMubG9vcC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgLy8gVGhpcyBjYXVzZXMgdGhlIGdhbWUgbG9vcCB0byBmcmVlemUuIElzIHVzZWQgd2hlbiB0aGUgcGxheWVycyBoaXRzIHNvbWV0aGluZyBhbmQgYSBtZW51IGlzIHNob3duIHRvIF9yZXN0YXJ0XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzU3RvcHBlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBiYWNrZ3JvdW5kLmxvb3AoKTtcclxuICAgICAgICBsZXZlbC5sb29wKCk7XHJcbiAgICAgICAgYmlyZC5sb29wKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNvbGxpc2lvbigpO1xyXG5cclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnN0YWdlKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmlnZ2VyIGdhbWUgb3ZlciBoYXBwZW5pbmdcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9nYW1lT3ZlcigpIHtcclxuICAgICAgICB0aGlzLl9zdG9wKCk7XHJcbiAgICAgICAgdGhpcy5fcGxheURpZUF1ZGlvKCk7XHJcblxyXG4gICAgICAgIC8vIFNob3cgZ2FtZSBvdmVyIHNjcmVlblxyXG4gICAgICAgIGdhbWVPdmVyU2NyZWVuLnVwZGF0ZVNjb3JlcyhsZXZlbC5zY29yZSwgbGV2ZWwuYmVzdFNjb3JlKTtcclxuICAgICAgICBnYW1lT3ZlclNjcmVlbi5zaG93KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gX3Jlc3RhcnQgaXMgY2xpY2tlZCBmcm9tIHRoZSBnYW1lIG92ZXIgc2NyZWVuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfY2xpY2tSZXN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMuX3Jlc3RhcnQoKTtcclxuICAgICAgICBnYW1lT3ZlclNjcmVlbi5oaWRlKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RvcCB0aGUgZ2FtZVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3N0b3AoKSB7XHJcbiAgICAgICAgdGhpcy5oYXNTdG9wcGVkID0gdHJ1ZTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb250aW51ZSB0aGUgZ2FtZSBhZnRlciBzdG9wcGluZ1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3Jlc3RhcnQoKSB7XHJcbiAgICAgICAgbGV2ZWwucmVzZXQoKTtcclxuICAgICAgICBiaXJkLnJlc2V0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuaGFzU3RvcHBlZCA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZSBjb2xsaXNpb24gYmV0d2VlbiB0aGUgYmlyZCBhbmQgJ29ic3RhY2xlcydcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9oYW5kbGVDb2xsaXNpb24oKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGJpcmQgaXMgYmVsb3cgb3IgdW5kZXJuZWF0aCB0aGUgd2F0ZXJcclxuICAgICAgICBpZiAoYmlyZC5nZXRUb3AoKSA8IGxldmVsLmdldFdhdGVyTGV2ZWwoKSAmJiBiaXJkLmlzQmVsb3dXYXRlcikge1xyXG4gICAgICAgICAgICBiaXJkLmxlYXZlV2F0ZXIoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGJpcmQuZ2V0VG9wKCkgPj0gbGV2ZWwuZ2V0V2F0ZXJMZXZlbCgpICYmICFiaXJkLmlzQmVsb3dXYXRlcikge1xyXG4gICAgICAgICAgICBiaXJkLmVudGVyV2F0ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENlaWxpbmcgY29sbGlzaW9uXHJcbiAgICAgICAgaWYgKGJpcmQuZ2V0VG9wKCkgPD0gbGV2ZWwuY2VpbGluZ1Nwcml0ZS55ICsgbGV2ZWwuY2VpbGluZ1Nwcml0ZS5oZWlnaHQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZ2FtZU92ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZsb29yIGNvbGxpc2lvblxyXG4gICAgICAgIGlmIChiaXJkLmdldEJvdHRvbSgpID49IGxldmVsLmNlaWxpbmdTcHJpdGUueSArIGxldmVsLmNlaWxpbmdTcHJpdGUuaGVpZ2h0ICsgc2V0dGluZ3MucGxheWFibGVBcmVhQWJvdmVXYXRlciArIHNldHRpbmdzLnBsYXlhYmxlQXJlYUJlbG93V2F0ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fZ2FtZU92ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChsZXZlbC5waXBlQ29sbGlzaW9uKGJpcmQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2dhbWVPdmVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFBsYXkgdGhlIGF1ZGlvIGZvciB3aGVuIHRoZSBwbGF5ZXIgZGllc1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3BsYXlEaWVBdWRpbygpIHtcclxuICAgICAgICBhdWRpb1BsYXllci5wbGF5KGF1ZGlvUGxheWVyLmF1ZGlvRnJhZ21lbnRzLkhJVCxcclxuICAgICAgICAgICAgYXVkaW9QbGF5ZXIucGxheS5iaW5kKGF1ZGlvUGxheWVyLCBhdWRpb1BsYXllci5hdWRpb0ZyYWdtZW50cy5ESUUpXHJcbiAgICAgICAgKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIHJlcXVpcmVkIGV2ZW50cyBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgZ2FtZVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3NldEV2ZW50cygpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgIT0gMzIpIHJldHVybjsgLy8gTm90IHNwYWNlYmFyXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmhhc1N0b3BwZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NsaWNrUmVzdGFydCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJpcmQuZmxhcCgpO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICAgICAgaWYgKFwib250b3VjaHN0YXJ0XCIgaW4gd2luZG93KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNTdG9wcGVkKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBiaXJkLmZsYXAoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzU3RvcHBlZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgYmlyZC5mbGFwKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYW5kIGdldCB0aGUgdGlsZWQgc3ByaXRlIGZvciB0aGUgd2F0ZXJcclxuICAgICAqIEByZXR1cm5zIHtUaWxpbmdTcHJpdGV8UElYSS5UaWxpbmdTcHJpdGV8e2VudW1lcmFibGUsIGdldH18Kn1cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9nZXRXYXRlclNwcml0ZSgpIHtcclxuICAgICAgICBsZXQgd2F0ZXJUZXh0dXJlID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5XQVRFUik7XHJcbiAgICAgICAgbGV0IHdhdGVyU3ByaXRlID0gbmV3IFBJWEkuZXh0cmFzLlRpbGluZ1Nwcml0ZSh3YXRlclRleHR1cmUsIHNldHRpbmdzLmdhbWVXaWR0aCwgc2V0dGluZ3MucGxheWFibGVBcmVhQmVsb3dXYXRlcik7XHJcbiAgICAgICAgd2F0ZXJTcHJpdGUueSA9IHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuQ0VJTElORykuaGVpZ2h0ICsgc2V0dGluZ3MucGxheWFibGVBcmVhQWJvdmVXYXRlcjtcclxuXHJcbiAgICAgICAgcmV0dXJuIHdhdGVyU3ByaXRlO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnYW1lO1xyXG4iLCJsZXQgc2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldHRpbmdzJyk7XHJcbmxldCB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuXHJcbmxldCBnYW1lT3ZlclNjcmVlbiA9IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjYWxsYmFjayB3aGVuIHRoZSBfcmVzdGFydCBidXR0b24gaXMgY2xpY2tlZFxyXG4gICAgICovXHJcbiAgICBvbkNsaWNrUmVzdGFydDogdW5kZWZpbmVkLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNvbnRhaW5lciB0aGF0IHdpbGwgaG9sZCB0aGUgZ2FtZSBvdmVyIGNvbnRhaW5lclxyXG4gICAgICovXHJcbiAgICBjb250YWluZXI6IHVuZGVmaW5lZCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjb250YWluZXIgdGhhdCB3aWxsIGhvbGQgdGhlIHRoZSBzY29yZXMgYW5kIHRoZSBnYW1lIG92ZXIgc3ByaXRlXHJcbiAgICAgKi9cclxuICAgIGdhbWVPdmVyQ29udGFpbmVyOiB1bmRlZmluZWQsXHJcblxyXG4gICAgc2NvcmVZUG9zaXRpb246IDkzLFxyXG4gICAgYmVzdFNjb3JlWVBvc2l0aW9uOiAxMzUsXHJcbiAgICByZXN0YXJ0QnV0dG9uWVBvc2l0aW9uOiAxOTAsXHJcbiAgICBnYW1lT3ZlckNvbnRhaW5lclhQb3NpdGlvbjogMTUwLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQmVjYXVzZSB0aGUgc2NvcmUgYm94IGlzIG5vdCBwZXJmZWN0bHkgY2VudGVyZWQgd2UgYWRkIHNvbWUgb2Zmc2V0XHJcbiAgICAgKi9cclxuICAgIGVsZW1lbnRzWE9mZnNldDogMixcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSB0aGUgZ2FtZSBvdmVyIHNjcmVlbiwgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uY2VcclxuICAgICAqL1xyXG4gICAgaW5pdGlhbGl6ZShjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuX3NldFJlc3RhcnRDYWxsYmFjayhjYWxsYmFjayk7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnkgPSB0aGlzLl9nZXRDb250YWluZXJZUG9zaXRpb24oKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci54ID0gdGhpcy5nYW1lT3ZlckNvbnRhaW5lclhQb3NpdGlvbjtcclxuXHJcbiAgICAgICAgdGhpcy5nYW1lT3ZlckNvbnRhaW5lciA9IG5ldyBQSVhJLlNwcml0ZSh1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLkdBTUVfT1ZFUikpO1xyXG5cclxuICAgICAgICB0aGlzLl9yZW5kZXJTY29yZXMoMCwgMCk7XHJcblxyXG4gICAgICAgIGxldCByZXN0YXJ0QnV0dG9uID0gbmV3IFBJWEkuU3ByaXRlKHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuUkVTVEFSVCkpO1xyXG4gICAgICAgIHJlc3RhcnRCdXR0b24ueCA9IHRoaXMuZ2FtZU92ZXJDb250YWluZXIud2lkdGggLyAyIC0gcmVzdGFydEJ1dHRvbi53aWR0aCAvIDIgKyB0aGlzLmVsZW1lbnRzWE9mZnNldDtcclxuICAgICAgICByZXN0YXJ0QnV0dG9uLnkgPSB0aGlzLnJlc3RhcnRCdXR0b25ZUG9zaXRpb247XHJcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5pbnRlcmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5idXR0b25Nb2RlID0gdHJ1ZTtcclxuICAgICAgICByZXN0YXJ0QnV0dG9uLmRlZmF1bHRDdXJzb3IgPSAncG9pbnRlcic7XHJcblxyXG4gICAgICAgIHJlc3RhcnRCdXR0b24uYWRkTGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLm9uQ2xpY2tSZXN0YXJ0KTtcclxuXHJcbiAgICAgICAgaWYgKFwib250b3VjaHN0YXJ0XCIgaW4gd2luZG93KSB7XHJcbiAgICAgICAgICAgIHJlc3RhcnRCdXR0b24uYWRkTGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMub25DbGlja1Jlc3RhcnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5nYW1lT3ZlckNvbnRhaW5lci5hZGRDaGlsZChyZXN0YXJ0QnV0dG9uKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5nYW1lT3ZlckNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIHRoaXMuaGlkZSgpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHRoZSBnYW1lIG92ZXIgc2NyZWVuIHdpdGggdGhlIG5ldyBzY29yZXNcclxuICAgICAqL1xyXG4gICAgdXBkYXRlU2NvcmVzKHNjb3JlLCBiZXN0U2NvcmUpIHtcclxuICAgICAgICB0aGlzLl9jbGVhclNjb3JlcygpO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlclNjb3JlcyhzY29yZSwgYmVzdFNjb3JlKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIaWRlIHRoZSBnYW1lIG92ZXIgc2NyZWVuXHJcbiAgICAgKi9cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lT3ZlckNvbnRhaW5lci52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyB0aGUgZ2FtZSBvdmVyIHNjcmVlblxyXG4gICAgICovXHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZU92ZXJDb250YWluZXIudmlzaWJsZSA9IHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBjYWxsYmFjayBmb3Igd2hlbiB0aGUgX3Jlc3RhcnQgYnV0dG9uIGhhcyBiZWVuIHByZXNzZWRcclxuICAgICAqIEBwYXJhbSBjYWxsYmFja1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3NldFJlc3RhcnRDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBFcnJvcignU3VwcGxpZWQgY2FsbGJhY2sgaXMgbm90IGEgZnVuY3Rpb24nKTtcclxuXHJcbiAgICAgICAgdGhpcy5vbkNsaWNrUmVzdGFydCA9IGNhbGxiYWNrO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBzY29yZVxyXG4gICAgICogQHBhcmFtIGJlc3RTY29yZVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3JlbmRlclNjb3JlcyhzY29yZSwgYmVzdFNjb3JlKSB7XHJcbiAgICAgICAgdGhpcy5zY29yZVNwcml0ZSA9IHV0aWxzLnNjb3JlVG9TcHJpdGVzKHNjb3JlLCB1dGlscy5zY29yZVNpemUuU01BTEwpO1xyXG4gICAgICAgIHRoaXMuc2NvcmVTcHJpdGUueCA9IHRoaXMuZ2FtZU92ZXJDb250YWluZXIud2lkdGggLyAyIC0gdGhpcy5zY29yZVNwcml0ZS53aWR0aCAvIDIgKyB0aGlzLmVsZW1lbnRzWE9mZnNldDtcclxuICAgICAgICB0aGlzLnNjb3JlU3ByaXRlLnkgPSB0aGlzLnNjb3JlWVBvc2l0aW9uO1xyXG5cclxuICAgICAgICB0aGlzLmJlc3RTY29yZVNwcml0ZSA9IHV0aWxzLnNjb3JlVG9TcHJpdGVzKGJlc3RTY29yZSwgdXRpbHMuc2NvcmVTaXplLlNNQUxMKTtcclxuICAgICAgICB0aGlzLmJlc3RTY29yZVNwcml0ZS54ID0gdGhpcy5nYW1lT3ZlckNvbnRhaW5lci53aWR0aCAvIDIgLSB0aGlzLmJlc3RTY29yZVNwcml0ZS53aWR0aCAvIDIgKyB0aGlzLmVsZW1lbnRzWE9mZnNldDtcclxuICAgICAgICB0aGlzLmJlc3RTY29yZVNwcml0ZS55ID0gdGhpcy5iZXN0U2NvcmVZUG9zaXRpb247XHJcblxyXG4gICAgICAgIHRoaXMuZ2FtZU92ZXJDb250YWluZXIuYWRkQ2hpbGQodGhpcy5zY29yZVNwcml0ZSk7XHJcbiAgICAgICAgdGhpcy5nYW1lT3ZlckNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLmJlc3RTY29yZVNwcml0ZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2NsZWFyU2NvcmVzKCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZU92ZXJDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5zY29yZVNwcml0ZSk7XHJcbiAgICAgICAgdGhpcy5nYW1lT3ZlckNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLmJlc3RTY29yZVNwcml0ZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9nZXRDb250YWluZXJZUG9zaXRpb24oKSB7XHJcbiAgICAgICAgbGV0IGNlaWxpbmdIZWlnaHQgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLkNFSUxJTkcpLmhlaWdodDtcclxuICAgICAgICBsZXQgZ2FtZU92ZXJTY3JlZW5IZWlnaHQgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLkdBTUVfT1ZFUikuaGVpZ2h0O1xyXG4gICAgICAgIHJldHVybiAoY2VpbGluZ0hlaWdodCArIHNldHRpbmdzLnBsYXlhYmxlQXJlYUFib3ZlV2F0ZXIgKyBzZXR0aW5ncy5wbGF5YWJsZUFyZWFCZWxvd1dhdGVyKSAvIDIgLSBnYW1lT3ZlclNjcmVlbkhlaWdodCAvIDI7XHJcbiAgICB9XHJcblxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnYW1lT3ZlclNjcmVlbjtcclxuIiwibGV0IHNldHRpbmdzID0gcmVxdWlyZSgnLi9zZXR0aW5ncycpO1xyXG5sZXQgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzLmpzJyk7XHJcblxyXG5sZXQgYXVkaW9QbGF5ZXIgPSByZXF1aXJlKCcuL2F1ZGlvUGxheWVyJyk7XHJcblxyXG5sZXQgUGlwZSA9IHJlcXVpcmUoJy4vUGlwZScpO1xyXG5cclxubGV0IGxldmVsID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY29udGFpbmVyIHRoYXQgd2lsbCBjb250YWluIGV2ZXJ5dGhpbmcgdGhhdCBuZWVkcyB0byBiZSBtb3ZlZCB0b3dhcmRzIHRoZSBwbGF5ZXJcclxuICAgICAqL1xyXG4gICAgY29udGFpbmVyOiB1bmRlZmluZWQsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaWxlZCBmbG9vciBzcHJpdGVcclxuICAgICAqL1xyXG4gICAgZmxvb3JTcHJpdGU6IHVuZGVmaW5lZCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRpbGVkIGNlaWxpbmcgc3ByaXRlXHJcbiAgICAgKi9cclxuICAgIGNlaWxpbmdTcHJpdGU6IHVuZGVmaW5lZCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnRhaW5lciB0aGF0IHdpbGwgY29udGFpbiBhbGwgcGlwZXNcclxuICAgICAqL1xyXG4gICAgcGlwZXNDb250YWluZXI6IHVuZGVmaW5lZCxcclxuXHJcbiAgICBmaXJzdFBpcGVGYWNpbmc6IFBpcGUuVVAsXHJcblxyXG4gICAgbmV4dFBpcGVGYWNpbmc6IDAsXHJcbiAgICBwbGFjZWRQaXBlc0NvdW50OiAwLFxyXG5cclxuICAgIHBsYXllckluc2lkZVBpcGU6IGZhbHNlLFxyXG5cclxuICAgIHNjb3JlOiAwLFxyXG4gICAgYmVzdFNjb3JlOiAwLFxyXG4gICAgc2NvcmVDb250YWluZXI6IHVuZGVmaW5lZCxcclxuXHJcbiAgICBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX2NyZWF0ZUNlaWxpbmcoKSk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5fY3JlYXRlRmxvb3IoKSk7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX2NyZWF0ZUluaXRpYWxQaXBlcygpKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5fY3JlYXRlU2NvcmVDb250YWluZXIoKSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcclxuICAgIH0sXHJcblxyXG4gICAgbG9vcCgpIHtcclxuICAgICAgICB0aGlzLmNlaWxpbmdTcHJpdGUudGlsZVBvc2l0aW9uLnggKz0gLXNldHRpbmdzLmZvcndhcmRTcGVlZDtcclxuICAgICAgICB0aGlzLmZsb29yU3ByaXRlLnRpbGVQb3NpdGlvbi54ICs9IC1zZXR0aW5ncy5mb3J3YXJkU3BlZWQ7XHJcblxyXG4gICAgICAgIC8vIFBpcGVzIHN0dWZmXHJcbiAgICAgICAgdGhpcy5waXBlc0NvbnRhaW5lci54ICs9IC1zZXR0aW5ncy5mb3J3YXJkU3BlZWQ7XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSBwaXBlcyB3aGVuIHRoZXkncmUgb2ZmIHNjcmVlblxyXG4gICAgICAgIGlmICh0aGlzLnBpcGVzQ29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBpcGVzQ29udGFpbmVyLnggPCAtdGhpcy5waXBlc0NvbnRhaW5lci5jaGlsZHJlblswXS54IC0gUGlwZS50ZXh0dXJlV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGlwZXNDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5waXBlc0NvbnRhaW5lci5jaGlsZHJlblswXSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wbGFjZU5ld1BpcGUodGhpcy5wbGFjZWRQaXBlc0NvdW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXQgdGhlIHN0YXRlIG9mIHRoZSBsZXZlbFxyXG4gICAgICovXHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLnNjb3JlID0gMDtcclxuICAgICAgICB0aGlzLnNjb3JlQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuc2NvcmVDb250YWluZXIuY2hpbGRyZW5bMF0pO1xyXG4gICAgICAgIHRoaXMuc2NvcmVDb250YWluZXIuYWRkQ2hpbGQodXRpbHMuc2NvcmVUb1Nwcml0ZXModGhpcy5zY29yZSwgdXRpbHMuc2NvcmVTaXplLkJJRykpO1xyXG5cclxuICAgICAgICB0aGlzLnBpcGVzQ29udGFpbmVyLnggPSAwO1xyXG4gICAgICAgIHRoaXMucGlwZXNDb250YWluZXIuY2hpbGRyZW4uc3BsaWNlKDApO1xyXG4gICAgICAgIHRoaXMucGxheWVySW5zaWRlUGlwZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubmV4dFBpcGVGYWNpbmcgPSB0aGlzLmZpcnN0UGlwZUZhY2luZztcclxuICAgICAgICB0aGlzLnBsYWNlZFBpcGVzQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX2NyZWF0ZUluaXRpYWxQaXBlcygpKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIHkgcG9zaXRpb24gb2YgdGhlIHdhdGVyXHJcbiAgICAgKi9cclxuICAgIGdldFdhdGVyTGV2ZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHNldHRpbmdzLnBsYXlhYmxlQXJlYUFib3ZlV2F0ZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIHBpcGVDb2xsaXNpb24oYmlyZCkge1xyXG4gICAgICAgIC8vIEJlY2F1c2Ugb2Ygc3F1YXJlIGNvbGxpc2lvbiBpdCBjYW4gZmVlbCB1bmZhaXIgd2hlbiBoaXR0aW5nIHRoZSBzaWRlcyBvZiB0aGUgcGlwZXMgd2hpbGUgYXQgYW4gYW5nbGVcclxuICAgICAgICAvLyBXaGljaCBvZnRlbiBoYXBwZW5zIHdoZW4gZGl2aW5nIHRocm91Z2ggdGhlIGdhcC4gVG8gbWFrZSB0aGluZ3MgYSBiaXQgZmFpcmVyLCBhZGRlZCBhIHNtYWxsIG1hcmdpbjtcclxuICAgICAgICBsZXQgY29sbGlzaW9uTWFyZ2luID0gMjtcclxuXHJcbiAgICAgICAgbGV0IGxlZnQgPSB0aGlzLnBpcGVzQ29udGFpbmVyLnggKyB0aGlzLnBpcGVzQ29udGFpbmVyLmNoaWxkcmVuWzBdLnggKyBjb2xsaXNpb25NYXJnaW47XHJcbiAgICAgICAgbGV0IHJpZ2h0ID0gbGVmdCArIHV0aWxzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXMuUElQRSkud2lkdGggLSBjb2xsaXNpb25NYXJnaW47XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVGhlIGJpcmQgaXMgaW4gdGhlIGxlZnQvcmlnaHQgYm91bmRhcmllcyBvZiB0aGUgZmlyc3QgcGlwZVxyXG4gICAgICAgIGlmIChiaXJkLmdldFJpZ2h0KCkgPiBsZWZ0ICYmIGJpcmQuZ2V0TGVmdCgpIDwgcmlnaHQpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJJbnNpZGVQaXBlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRoZSBiaXJkIGlzIGFib3ZlIHRoZSBnYXAhXHJcbiAgICAgICAgICAgIGlmIChiaXJkLmdldFRvcCgpIDwgdGhpcy5waXBlc0NvbnRhaW5lci5jaGlsZHJlblswXS5nYXAudG9wIHx8IGJpcmQuZ2V0Qm90dG9tKCkgPiB0aGlzLnBpcGVzQ29udGFpbmVyLmNoaWxkcmVuWzBdLmdhcC5ib3R0b20pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYXllckluc2lkZVBpcGUpIHtcclxuICAgICAgICAgICAgLy8gUGxheWVyIGhhcyBwYXNzZWQgdGhlIHBpcGVcclxuICAgICAgICAgICAgdGhpcy5faW5jcmVhc2VTY29yZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllckluc2lkZVBpcGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgdGhlIHRpbGVkIGNlaWxpbmcgc3ByaXRlXHJcbiAgICAgKiBAcmV0dXJucyB7UElYSS5leHRyYXMuVGlsaW5nU3ByaXRlfVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2NyZWF0ZUNlaWxpbmcoKSB7XHJcbiAgICAgICAgbGV0IGNlaWxpbmdUZXh0dXJlID0gdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5DRUlMSU5HKTtcclxuXHJcbiAgICAgICAgdGhpcy5jZWlsaW5nU3ByaXRlID0gbmV3IFBJWEkuZXh0cmFzLlRpbGluZ1Nwcml0ZShjZWlsaW5nVGV4dHVyZSwgc2V0dGluZ3MuZ2FtZVdpZHRoLCBjZWlsaW5nVGV4dHVyZS5oZWlnaHQpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5jZWlsaW5nU3ByaXRlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSB0aGUgdGlsZWQgZmxvb3Igc3ByaXRlXHJcbiAgICAgKiBAcmV0dXJucyB7UElYSS5leHRyYXMuVGlsaW5nU3ByaXRlfVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2NyZWF0ZUZsb29yKCkge1xyXG4gICAgICAgIGxldCBmbG9vclRleHR1cmUgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLkZMT09SKTtcclxuXHJcbiAgICAgICAgdGhpcy5mbG9vclNwcml0ZSA9IG5ldyBQSVhJLmV4dHJhcy5UaWxpbmdTcHJpdGUoZmxvb3JUZXh0dXJlLCBzZXR0aW5ncy5nYW1lV2lkdGgsIGZsb29yVGV4dHVyZS5oZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuZmxvb3JTcHJpdGUueSA9IHNldHRpbmdzLnBsYXlhYmxlQXJlYUFib3ZlV2F0ZXIgKyBzZXR0aW5ncy5wbGF5YWJsZUFyZWFCZWxvd1dhdGVyICsgdXRpbHMuZ2V0VGV4dHVyZShzZXR0aW5ncy50ZXh0dXJlcy5DRUlMSU5HKS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmZsb29yU3ByaXRlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtQSVhJLkNvbnRhaW5lcn1cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9jcmVhdGVJbml0aWFsUGlwZXMoKSB7XHJcbiAgICAgICAgdGhpcy5uZXh0UGlwZUZhY2luZyA9IHRoaXMuZmlyc3RQaXBlRmFjaW5nO1xyXG4gICAgICAgIHRoaXMucGlwZXNDb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuXHJcbiAgICAgICAgbGV0IHN0YXJ0aW5nUGlwZXNDb3VudCA9IE1hdGguY2VpbChzZXR0aW5ncy5nYW1lV2lkdGggLyBzZXR0aW5ncy5waXBlRGlzdGFuY2UpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXJ0aW5nUGlwZXNDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BsYWNlTmV3UGlwZShpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnBpcGVzQ29udGFpbmVyO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtQSVhJLkNvbnRhaW5lcn1cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9jcmVhdGVTY29yZUNvbnRhaW5lcigpIHtcclxuICAgICAgICB0aGlzLnNjb3JlQ29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcbiAgICAgICAgdGhpcy5zY29yZUNvbnRhaW5lci5hZGRDaGlsZCh1dGlscy5zY29yZVRvU3ByaXRlcyh0aGlzLnNjb3JlLCB1dGlscy5zY29yZVNpemUuQklHKSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2NvcmVDb250YWluZXIueCA9IHNldHRpbmdzLnNjb3JlUG9zaXRpb24ueDtcclxuICAgICAgICB0aGlzLnNjb3JlQ29udGFpbmVyLnkgPSB1dGlscy5nZXRUZXh0dXJlKHNldHRpbmdzLnRleHR1cmVzLkNFSUxJTkcpLmhlaWdodCArIHNldHRpbmdzLnNjb3JlUG9zaXRpb24ueTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcmVDb250YWluZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgbmV3IHBpcGUsIHRoZSBwb3NpdGlvbiBkZXBlbmRzIG9uIHRoZSBudW1iZXJcclxuICAgICAqIEBwYXJhbSBudW1iZXJcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9wbGFjZU5ld1BpcGUobnVtYmVyKSB7XHJcbiAgICAgICAgLy8gV2UgbmVlZCB0b3RhbCBwaXBlIGFtb3VudCwgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIG9mIG5ldyBvbmVcclxuICAgICAgICBsZXQgcGlwZSA9IHRoaXMuX2NyZWF0ZVBpcGUodGhpcy5fZ2V0UmFuZG9tUGlwZUhlaWdodCgpLCB0aGlzLm5leHRQaXBlRmFjaW5nKTtcclxuICAgICAgICBwaXBlLmNvbnRhaW5lci54ID0gc2V0dGluZ3MuZmlyc3RQaXBlRGlzdGFuY2UgKyBzZXR0aW5ncy5waXBlRGlzdGFuY2UgKiBudW1iZXI7XHJcbiAgICAgICAgdGhpcy5waXBlc0NvbnRhaW5lci5hZGRDaGlsZChwaXBlLmNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIHRoaXMubmV4dFBpcGVGYWNpbmcgKj0gLTE7XHJcbiAgICAgICAgdGhpcy5wbGFjZWRQaXBlc0NvdW50Kys7XHJcbiAgICB9LFxyXG5cclxuICAgIF9jcmVhdGVQaXBlKGhlaWdodCwgZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaXBlKGhlaWdodCwgZGlyZWN0aW9uKTtcclxuICAgIH0sXHJcblxyXG4gICAgX2luY3JlYXNlU2NvcmUoKSB7XHJcbiAgICAgICAgYXVkaW9QbGF5ZXIucGxheShhdWRpb1BsYXllci5hdWRpb0ZyYWdtZW50cy5QT0lOVCk7XHJcbiAgICAgICAgdGhpcy5zY29yZSsrO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zY29yZSA+IHRoaXMuYmVzdFNjb3JlKSB0aGlzLmJlc3RTY29yZSA9IHRoaXMuc2NvcmU7XHJcblxyXG4gICAgICAgIC8vIEJlY2F1c2Ugd2UgcHV0IGFsbCBkaWdpdHMgaW5zaWRlIG9uZSBjb250YWluZXIsIHdlIG9ubHkgaGF2ZSB0byByZW1vdmUgb24gY2hpbGRcclxuICAgICAgICB0aGlzLnNjb3JlQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuc2NvcmVDb250YWluZXIuY2hpbGRyZW5bMF0pO1xyXG5cclxuICAgICAgICB0aGlzLnNjb3JlQ29udGFpbmVyLmFkZENoaWxkKHV0aWxzLnNjb3JlVG9TcHJpdGVzKHRoaXMuc2NvcmUsIHV0aWxzLnNjb3JlU2l6ZS5CSUcpKTtcclxuICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIHJhbmRvbSBoZWlnaHQgZm9yIHRoZSBwaXBlXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2dldFJhbmRvbVBpcGVIZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAoc2V0dGluZ3MubWF4UGlwZUhlaWdodCAtIHNldHRpbmdzLm1pblBpcGVIZWlnaHQpICsgc2V0dGluZ3MubWluUGlwZUhlaWdodDtcclxuICAgIH0sXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGxldmVsO1xyXG4iLCJjb25zdCBzZXR0aW5ncyA9IHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGxvY2F0aW9uIG9mIHRoZSBhc3NldHMganNvblxyXG4gICAgICovXHJcbiAgICBhc3NldEZpbGU6IFwiYXNzZXRzL2Fzc2V0cy5qc29uXCIsXHJcblxyXG4gICAgc291bmRzUGF0aDogXCJhc3NldHMvc291bmRzL1wiLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGFyZWEgdGhhdCBpcyBhdmFpbGFibGUgYWJvdmUgdGhlIHdhdGVyXHJcbiAgICAgKi9cclxuICAgIHBsYXlhYmxlQXJlYUFib3ZlV2F0ZXI6IDI2MCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhcmVhIHRoYXQgaXMgYXZhaWxhYmxlIGJlbG93IHRoZSB3YXRlclxyXG4gICAgICovXHJcbiAgICBwbGF5YWJsZUFyZWFCZWxvd1dhdGVyOiAyNjAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgd2lkdGggb2YgdGhlIGdhbWUsIGZpbGxlZCBkdXJpbmcgaW5pdCBjdXJyZW50bHlcclxuICAgICAqL1xyXG4gICAgZ2FtZVdpZHRoOiAwLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHNwZWVkIGF0IHdoaWNoIG9iamVjdHMgbW92ZSB0b3dhcmRzIHRoZSBwbGF5ZXJcclxuICAgICAqL1xyXG4gICAgZm9yd2FyZFNwZWVkOiA1LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHNwZWVkIGF0IHdoaWNoIHRoZSBiYWNrZ3JvdW5kIG1vdmVzXHJcbiAgICAgKi9cclxuICAgIGJhY2tncm91bmRTcGVlZDogMixcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhbW91bnQgb2YgZ3Jhdml0eSBhZGRlZCB0byB0aGUgdmVsb2NpdHkgb2YgdGhlIHBsYXllciB3aGlsZSBhYm92ZSB0aGUgd2F0ZXJcclxuICAgICAqL1xyXG4gICAgZ3Jhdml0eTogMC4zLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGFtb3VudCBvZiB1cHdhcmQgZm9yY2UgYWRkZWQgdG8gdGhlIHZlbG9jaXR5IG9mIHRoZSBwbGF5ZXIgd2hpbGUgYmVsb3cgdGhlIHdhdGVyXHJcbiAgICAgKi9cclxuICAgIHdhdGVyUHVzaEZvcmNlOiAwLjMsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYW1vdW50IG9mIHVwd2FyZCB2ZWxvY2l0eSBpcyBhZGRlZCB0byB0aGUgcGxheWVyIG9uICdmbGFwcGluZycuXHJcbiAgICAgKi9cclxuICAgIGJpcmRGbGFwVmVsb2NpdHk6IDQuNSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzcGVlZCBvZiB0aGUgYmlyZCBhbmltYXRpb25cclxuICAgICAqL1xyXG4gICAgYmlyZEFuaW1hdGlvblNwZWVkOiAwLjIsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydGluZyBwb3NpdGlvbiBvZiB0aGUgYmlyZFxyXG4gICAgICovXHJcbiAgICBiaXJkU3RhcnRQb3NpdGlvbjoge1xyXG4gICAgICAgIHg6IDEwMCxcclxuICAgICAgICB5OiAxNTAsXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHZlcnRpY2FsIGdhcHMgaW4gdGhlIHBpcGVzIGZvciB0aGUgcGxheWVyIHRvIGZseSB0aHJvdWdoXHJcbiAgICAgKi9cclxuICAgIHBpcGVHYXBTaXplOiAxMDAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZGlzdGFuY2UgdG8gdGhlIGZpcnN0IHBpcGVcclxuICAgICAqL1xyXG4gICAgZmlyc3RQaXBlRGlzdGFuY2U6IDgwMCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBkaXN0YW5jZSBiZXR3ZWVuIGVhY2ggcGlwZVxyXG4gICAgICovXHJcbiAgICBwaXBlRGlzdGFuY2U6IDQwMCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtaW4gaGVpZ2h0IG9mIGEgcGlwZSAoaGFuZGxlIHdpdGggY2FyZSlcclxuICAgICAqL1xyXG4gICAgbWluUGlwZUhlaWdodDogMjgwLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1heCBoZWlnaHQgb2YgYSBwaXBlIChoYW5kbGUgd2l0aCBjYXJlKVxyXG4gICAgICovXHJcbiAgICBtYXhQaXBlSGVpZ2h0OiAzOTAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcG9zaXRpb24gb2YgdGhlIHNjb3JlXHJcbiAgICAgKi9cclxuICAgIHNjb3JlUG9zaXRpb246IHtcclxuICAgICAgICB4OiAxMCxcclxuICAgICAgICB5OiAxMCAvLyBPZmZzZXQgZnJvbSB0aGUgJ2NlaWxpbmcnXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSWYgdmVydGljYWwgdmVsb2NpdHkgb2YgdGhlIHBsYXllciBzaG91bGQgYmUgcmVzZXQgYmVmb3JlIGFwcGx5aW5nIHRoZSBmbGFwIHZlbG9jaXR5XHJcbiAgICAgKi9cclxuICAgIHNob3VsZEJpcmRGbGFwUmVzZXRWZWxvY2l0eTogdHJ1ZSxcclxuXHJcbiAgICB0ZXh0dXJlczoge1xyXG4gICAgICAgICdCQUNLR1JPVU5EJzogJ3NreS5wbmcnLFxyXG4gICAgICAgICdGTE9PUic6ICdsYW5kLnBuZycsXHJcbiAgICAgICAgJ0NFSUxJTkcnOiAnY2VpbGluZy5wbmcnLFxyXG4gICAgICAgICdQSVBFJzogJ3BpcGUucG5nJyxcclxuICAgICAgICAnUElQRV9VUCc6ICdwaXBlLXVwLnBuZycsXHJcbiAgICAgICAgJ1BJUEVfRE9XTic6ICdwaXBlLWRvd24ucG5nJyxcclxuICAgICAgICAnV0FURVInOiAnd2F0ZXIucG5nJyxcclxuICAgICAgICAnR0FNRV9PVkVSJzogJ3Njb3JlYm9hcmQucG5nJyxcclxuICAgICAgICAnUkVTVEFSVCc6ICdyZXBsYXkucG5nJyxcclxuICAgICAgICAnQklHXzAnOiAnZm9udF9iaWdfMC5wbmcnLFxyXG4gICAgICAgICdCSUdfMSc6ICdmb250X2JpZ18xLnBuZycsXHJcbiAgICAgICAgJ0JJR18yJzogJ2ZvbnRfYmlnXzIucG5nJyxcclxuICAgICAgICAnQklHXzMnOiAnZm9udF9iaWdfMy5wbmcnLFxyXG4gICAgICAgICdCSUdfNCc6ICdmb250X2JpZ180LnBuZycsXHJcbiAgICAgICAgJ0JJR181JzogJ2ZvbnRfYmlnXzUucG5nJyxcclxuICAgICAgICAnQklHXzYnOiAnZm9udF9iaWdfNi5wbmcnLFxyXG4gICAgICAgICdCSUdfNyc6ICdmb250X2JpZ183LnBuZycsXHJcbiAgICAgICAgJ0JJR184JzogJ2ZvbnRfYmlnXzgucG5nJyxcclxuICAgICAgICAnQklHXzknOiAnZm9udF9iaWdfOS5wbmcnLFxyXG4gICAgICAgICdTTUFMTF8wJzogJ2ZvbnRfc21hbGxfMC5wbmcnLFxyXG4gICAgICAgICdTTUFMTF8xJzogJ2ZvbnRfc21hbGxfMS5wbmcnLFxyXG4gICAgICAgICdTTUFMTF8yJzogJ2ZvbnRfc21hbGxfMi5wbmcnLFxyXG4gICAgICAgICdTTUFMTF8zJzogJ2ZvbnRfc21hbGxfMy5wbmcnLFxyXG4gICAgICAgICdTTUFMTF80JzogJ2ZvbnRfc21hbGxfNC5wbmcnLFxyXG4gICAgICAgICdTTUFMTF81JzogJ2ZvbnRfc21hbGxfNS5wbmcnLFxyXG4gICAgICAgICdTTUFMTF82JzogJ2ZvbnRfc21hbGxfNi5wbmcnLFxyXG4gICAgICAgICdTTUFMTF83JzogJ2ZvbnRfc21hbGxfNy5wbmcnLFxyXG4gICAgICAgICdTTUFMTF84JzogJ2ZvbnRfc21hbGxfOC5wbmcnLFxyXG4gICAgICAgICdTTUFMTF85JzogJ2ZvbnRfc21hbGxfOS5wbmcnLFxyXG4gICAgfSxcclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZVdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICB9XHJcbn07XHJcblxyXG5zZXR0aW5ncy5pbml0KCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHNldHRpbmdzO1xyXG4iLCJsZXQgc2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldHRpbmdzJyk7XHJcblxyXG5sZXQgc2V0dXAgPSB7XHJcbiAgICAvKipcclxuICAgICAqIFNldCB1cCB0aGUgcmVuZGVyZXJcclxuICAgICAqIEByZXR1cm5zIHtQSVhJLldlYkdMUmVuZGVyZXJ8UElYSS5DYW52YXNSZW5kZXJlcn1cclxuICAgICAqL1xyXG4gICAgcmVuZGVyZXIoKSB7XHJcbiAgICAgICAgbGV0IHJlbmRlcmVyID0gUElYSS5hdXRvRGV0ZWN0UmVuZGVyZXIoc2V0dGluZ3MuZ2FtZVdpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xyXG4gICAgICAgIHJlbmRlcmVyLnZpZXcuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgICAgcmVuZGVyZXIudmlldy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIHJlbmRlcmVyLmJhY2tncm91bmRDb2xvciA9IDB4NGVjMGNhO1xyXG4gICAgICAgIHJlbmRlcmVyLmF1dG9SZXNpemUgPSB0cnVlO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHJlbmRlcmVyLnZpZXcpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVuZGVyZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCB0aGUgYXNzZXRzXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgYWN0aW9uIHRvIHBlcmZvcm0gYWZ0ZXIgYXNzZXRzIGhhdmUgYmVlbiBsb2FkZWRcclxuICAgICAqL1xyXG4gICAgbG9hZEFzc2V0cyhjYWxsYmFjaykge1xyXG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBFcnJvcignQ2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcblxyXG4gICAgICAgIFBJWEkubG9hZGVyLmFkZChcImFzc2V0cy9hc3NldHMuanNvblwiKS5sb2FkKGNhbGxiYWNrKTtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gc2V0dXA7XHJcbiIsImxldCBzZXR0aW5ncyA9IHJlcXVpcmUoJy4vc2V0dGluZ3MnKTtcclxuXHJcbmxldCB1dGlscyA9IHtcclxuXHJcbiAgICBzY29yZVNpemU6IHtcclxuICAgICAgICAnU01BTEwnOiAwLFxyXG4gICAgICAgICdCSUcnOiAxXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgdGV4dHVyZSBmcm9tIHRoZSBwaXhpIGxvYWRlciBieSBuYW1lXHJcbiAgICAgKiBAcGFyYW0gbmFtZSB0ZXh0dXJlIG5hbWUsIHdpdGggZXh0ZW5zaW9uXHJcbiAgICAgKiBAcmV0dXJucyB7KnxQSVhJLlRleHR1cmV8RnJhbWVPYmplY3R9XHJcbiAgICAgKi9cclxuICAgIGdldFRleHR1cmUobmFtZSkge1xyXG4gICAgICAgIHJldHVybiBQSVhJLmxvYWRlci5yZXNvdXJjZXNbc2V0dGluZ3MuYXNzZXRGaWxlXS50ZXh0dXJlc1tuYW1lXVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlIHNjb3JlIHNwcml0ZXMgYmFzZWQgb24gcGFzc2VkIHNjb3JlXHJcbiAgICAgKiBAcGFyYW0gc2NvcmVcclxuICAgICAqIEBwYXJhbSBzaXplXHJcbiAgICAgKiBAcmV0dXJucyB7Q29udGFpbmVyfCp9XHJcbiAgICAgKi9cclxuICAgIHNjb3JlVG9TcHJpdGVzKHNjb3JlLCBzaXplKSB7XHJcbiAgICAgICAgbGV0IHN0cmluZ1Njb3JlID0gc2NvcmUudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgbGV0IHRleHR1cmVQcmVmaXggPSBzaXplID09PSB0aGlzLnNjb3JlU2l6ZS5CSUcgPyAnQklHXycgOiAnU01BTExfJztcclxuICAgICAgICBsZXQgbGV0dGVyU3BhY2luZyA9IHNpemUgPT09IHRoaXMuc2NvcmVTaXplLkJJRyA/IDI1IDogMTA7XHJcblxyXG4gICAgICAgIGxldCBkaWdpdHNDb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHN0cmluZ1Njb3JlLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBkaWdpdCA9IG5ldyBQSVhJLlNwcml0ZSh0aGlzLmdldFRleHR1cmUoc2V0dGluZ3MudGV4dHVyZXNbdGV4dHVyZVByZWZpeCArIHN0cmluZ1Njb3JlLmNoYXJBdChpKV0pKTtcclxuICAgICAgICAgICAgZGlnaXQueCA9IGkgKiBsZXR0ZXJTcGFjaW5nO1xyXG4gICAgICAgICAgICBkaWdpdHNDb250YWluZXIuYWRkQ2hpbGQoZGlnaXQpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGlnaXRzQ29udGFpbmVyO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB1dGlscztcclxuIl19"}